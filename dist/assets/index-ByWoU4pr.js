var wE=Object.defineProperty;var _E=(r,e,n)=>e in r?wE(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var is=(r,e,n)=>_E(r,typeof e!="symbol"?e+"":e,n);function xE(r,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function If(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function SE(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var o=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return r[i]}})}),n}var fh={exports:{}},Wa={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function EE(){if(o0)return Wa;o0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var m in o)m!=="key"&&(l[m]=o[m])}else l=o;return o=l.ref,{$$typeof:r,type:i,key:u,ref:o!==void 0?o:null,props:l}}return Wa.Fragment=e,Wa.jsx=n,Wa.jsxs=n,Wa}var l0;function TE(){return l0||(l0=1,fh.exports=EE()),fh.exports}var f=TE(),mh={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function CE(){if(c0)return we;c0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),_=Symbol.iterator;function x(A){return A===null||typeof A!="object"?null:(A=_&&A[_]||A["@@iterator"],typeof A=="function"?A:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,C={};function j(A,$,Q){this.props=A,this.context=$,this.refs=C,this.updater=Q||S}j.prototype.isReactComponent={},j.prototype.setState=function(A,$){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,$,"setState")},j.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function U(){}U.prototype=j.prototype;function M(A,$,Q){this.props=A,this.context=$,this.refs=C,this.updater=Q||S}var V=M.prototype=new U;V.constructor=M,T(V,j.prototype),V.isPureReactComponent=!0;var G=Array.isArray;function Y(){}var F={H:null,A:null,T:null,S:null},ye=Object.prototype.hasOwnProperty;function X(A,$,Q){var se=Q.ref;return{$$typeof:r,type:A,key:$,ref:se!==void 0?se:null,props:Q}}function be(A,$){return X(A.type,$,A.props)}function fe(A){return typeof A=="object"&&A!==null&&A.$$typeof===r}function Ce(A){var $={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(Q){return $[Q]})}var de=/\/+/g;function ke(A,$){return typeof A=="object"&&A!==null&&A.key!=null?Ce(""+A.key):$.toString(36)}function Xe(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(Y,Y):(A.status="pending",A.then(function($){A.status==="pending"&&(A.status="fulfilled",A.value=$)},function($){A.status==="pending"&&(A.status="rejected",A.reason=$)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function z(A,$,Q,se,_e){var Ae=typeof A;(Ae==="undefined"||Ae==="boolean")&&(A=null);var Se=!1;if(A===null)Se=!0;else switch(Ae){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(A.$$typeof){case r:case e:Se=!0;break;case v:return Se=A._init,z(Se(A._payload),$,Q,se,_e)}}if(Se)return _e=_e(A),Se=se===""?"."+ke(A,0):se,G(_e)?(Q="",Se!=null&&(Q=Se.replace(de,"$&/")+"/"),z(_e,$,Q,"",function(Cn){return Cn})):_e!=null&&(fe(_e)&&(_e=be(_e,Q+(_e.key==null||A&&A.key===_e.key?"":(""+_e.key).replace(de,"$&/")+"/")+Se)),$.push(_e)),1;Se=0;var pt=se===""?".":se+":";if(G(A))for(var Pe=0;Pe<A.length;Pe++)se=A[Pe],Ae=pt+ke(se,Pe),Se+=z(se,$,Q,Ae,_e);else if(Pe=x(A),typeof Pe=="function")for(A=Pe.call(A),Pe=0;!(se=A.next()).done;)se=se.value,Ae=pt+ke(se,Pe++),Se+=z(se,$,Q,Ae,_e);else if(Ae==="object"){if(typeof A.then=="function")return z(Xe(A),$,Q,se,_e);throw $=String(A),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Se}function W(A,$,Q){if(A==null)return A;var se=[],_e=0;return z(A,se,"","",function(Ae){return $.call(Q,Ae,_e++)}),se}function te(A){if(A._status===-1){var $=A._result;$=$(),$.then(function(Q){(A._status===0||A._status===-1)&&(A._status=1,A._result=Q)},function(Q){(A._status===0||A._status===-1)&&(A._status=2,A._result=Q)}),A._status===-1&&(A._status=0,A._result=$)}if(A._status===1)return A._result.default;throw A._result}var xe=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},Be={map:W,forEach:function(A,$,Q){W(A,function(){$.apply(this,arguments)},Q)},count:function(A){var $=0;return W(A,function(){$++}),$},toArray:function(A){return W(A,function($){return $})||[]},only:function(A){if(!fe(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return we.Activity=b,we.Children=Be,we.Component=j,we.Fragment=n,we.Profiler=o,we.PureComponent=M,we.StrictMode=i,we.Suspense=p,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,we.__COMPILER_RUNTIME={__proto__:null,c:function(A){return F.H.useMemoCache(A)}},we.cache=function(A){return function(){return A.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(A,$,Q){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var se=T({},A.props),_e=A.key;if($!=null)for(Ae in $.key!==void 0&&(_e=""+$.key),$)!ye.call($,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&$.ref===void 0||(se[Ae]=$[Ae]);var Ae=arguments.length-2;if(Ae===1)se.children=Q;else if(1<Ae){for(var Se=Array(Ae),pt=0;pt<Ae;pt++)Se[pt]=arguments[pt+2];se.children=Se}return X(A.type,_e,se)},we.createContext=function(A){return A={$$typeof:u,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:l,_context:A},A},we.createElement=function(A,$,Q){var se,_e={},Ae=null;if($!=null)for(se in $.key!==void 0&&(Ae=""+$.key),$)ye.call($,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(_e[se]=$[se]);var Se=arguments.length-2;if(Se===1)_e.children=Q;else if(1<Se){for(var pt=Array(Se),Pe=0;Pe<Se;Pe++)pt[Pe]=arguments[Pe+2];_e.children=pt}if(A&&A.defaultProps)for(se in Se=A.defaultProps,Se)_e[se]===void 0&&(_e[se]=Se[se]);return X(A,Ae,_e)},we.createRef=function(){return{current:null}},we.forwardRef=function(A){return{$$typeof:m,render:A}},we.isValidElement=fe,we.lazy=function(A){return{$$typeof:v,_payload:{_status:-1,_result:A},_init:te}},we.memo=function(A,$){return{$$typeof:g,type:A,compare:$===void 0?null:$}},we.startTransition=function(A){var $=F.T,Q={};F.T=Q;try{var se=A(),_e=F.S;_e!==null&&_e(Q,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Y,xe)}catch(Ae){xe(Ae)}finally{$!==null&&Q.types!==null&&($.types=Q.types),F.T=$}},we.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},we.use=function(A){return F.H.use(A)},we.useActionState=function(A,$,Q){return F.H.useActionState(A,$,Q)},we.useCallback=function(A,$){return F.H.useCallback(A,$)},we.useContext=function(A){return F.H.useContext(A)},we.useDebugValue=function(){},we.useDeferredValue=function(A,$){return F.H.useDeferredValue(A,$)},we.useEffect=function(A,$){return F.H.useEffect(A,$)},we.useEffectEvent=function(A){return F.H.useEffectEvent(A)},we.useId=function(){return F.H.useId()},we.useImperativeHandle=function(A,$,Q){return F.H.useImperativeHandle(A,$,Q)},we.useInsertionEffect=function(A,$){return F.H.useInsertionEffect(A,$)},we.useLayoutEffect=function(A,$){return F.H.useLayoutEffect(A,$)},we.useMemo=function(A,$){return F.H.useMemo(A,$)},we.useOptimistic=function(A,$){return F.H.useOptimistic(A,$)},we.useReducer=function(A,$,Q){return F.H.useReducer(A,$,Q)},we.useRef=function(A){return F.H.useRef(A)},we.useState=function(A){return F.H.useState(A)},we.useSyncExternalStore=function(A,$,Q){return F.H.useSyncExternalStore(A,$,Q)},we.useTransition=function(){return F.H.useTransition()},we.version="19.2.3",we}var u0;function Dc(){return u0||(u0=1,mh.exports=CE()),mh.exports}var D=Dc();const P=If(D);var ph={exports:{}},Ya={},gh={exports:{}},yh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0;function kE(){return d0||(d0=1,(function(r){function e(z,W){var te=z.length;z.push(W);e:for(;0<te;){var xe=te-1>>>1,Be=z[xe];if(0<o(Be,W))z[xe]=W,z[te]=Be,te=xe;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var W=z[0],te=z.pop();if(te!==W){z[0]=te;e:for(var xe=0,Be=z.length,A=Be>>>1;xe<A;){var $=2*(xe+1)-1,Q=z[$],se=$+1,_e=z[se];if(0>o(Q,te))se<Be&&0>o(_e,Q)?(z[xe]=_e,z[se]=te,xe=se):(z[xe]=Q,z[$]=te,xe=$);else if(se<Be&&0>o(_e,te))z[xe]=_e,z[se]=te,xe=se;else break e}}return W}function o(z,W){var te=z.sortIndex-W.sortIndex;return te!==0?te:z.id-W.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,m=u.now();r.unstable_now=function(){return u.now()-m}}var p=[],g=[],v=1,b=null,_=3,x=!1,S=!1,T=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function V(z){for(var W=n(g);W!==null;){if(W.callback===null)i(g);else if(W.startTime<=z)i(g),W.sortIndex=W.expirationTime,e(p,W);else break;W=n(g)}}function G(z){if(T=!1,V(z),!S)if(n(p)!==null)S=!0,Y||(Y=!0,Ce());else{var W=n(g);W!==null&&Xe(G,W.startTime-z)}}var Y=!1,F=-1,ye=5,X=-1;function be(){return C?!0:!(r.unstable_now()-X<ye)}function fe(){if(C=!1,Y){var z=r.unstable_now();X=z;var W=!0;try{e:{S=!1,T&&(T=!1,U(F),F=-1),x=!0;var te=_;try{t:{for(V(z),b=n(p);b!==null&&!(b.expirationTime>z&&be());){var xe=b.callback;if(typeof xe=="function"){b.callback=null,_=b.priorityLevel;var Be=xe(b.expirationTime<=z);if(z=r.unstable_now(),typeof Be=="function"){b.callback=Be,V(z),W=!0;break t}b===n(p)&&i(p),V(z)}else i(p);b=n(p)}if(b!==null)W=!0;else{var A=n(g);A!==null&&Xe(G,A.startTime-z),W=!1}}break e}finally{b=null,_=te,x=!1}W=void 0}}finally{W?Ce():Y=!1}}}var Ce;if(typeof M=="function")Ce=function(){M(fe)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,ke=de.port2;de.port1.onmessage=fe,Ce=function(){ke.postMessage(null)}}else Ce=function(){j(fe,0)};function Xe(z,W){F=j(function(){z(r.unstable_now())},W)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(z){z.callback=null},r.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<z?Math.floor(1e3/z):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_next=function(z){switch(_){case 1:case 2:case 3:var W=3;break;default:W=_}var te=_;_=W;try{return z()}finally{_=te}},r.unstable_requestPaint=function(){C=!0},r.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=_;_=z;try{return W()}finally{_=te}},r.unstable_scheduleCallback=function(z,W,te){var xe=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?xe+te:xe):te=xe,z){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=te+Be,z={id:v++,callback:W,priorityLevel:z,startTime:te,expirationTime:Be,sortIndex:-1},te>xe?(z.sortIndex=te,e(g,z),n(p)===null&&z===n(g)&&(T?(U(F),F=-1):T=!0,Xe(G,te-xe))):(z.sortIndex=Be,e(p,z),S||x||(S=!0,Y||(Y=!0,Ce()))),z},r.unstable_shouldYield=be,r.unstable_wrapCallback=function(z){var W=_;return function(){var te=_;_=W;try{return z.apply(this,arguments)}finally{_=te}}}})(yh)),yh}var h0;function AE(){return h0||(h0=1,gh.exports=kE()),gh.exports}var vh={exports:{}},kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function jE(){if(f0)return kt;f0=1;var r=Dc();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,g,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:g,implementation:v}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,kt.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},kt.flushSync=function(p){var g=u.T,v=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=g,i.p=v,i.d.f()}},kt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},kt.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},kt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,b=m(v,g.crossOrigin),_=typeof g.integrity=="string"?g.integrity:void 0,x=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:x}):v==="script"&&i.d.X(p,{crossOrigin:b,integrity:_,fetchPriority:x,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},kt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},kt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,b=m(v,g.crossOrigin);i.d.L(p,v,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},kt.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=m(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},kt.requestFormReset=function(p){i.d.r(p)},kt.unstable_batchedUpdates=function(p,g){return p(g)},kt.useFormState=function(p,g,v){return u.H.useFormState(p,g,v)},kt.useFormStatus=function(){return u.H.useHostTransitionStatus()},kt.version="19.2.3",kt}var m0;function Xv(){if(m0)return vh.exports;m0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),vh.exports=jE(),vh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function NE(){if(p0)return Ya;p0=1;var r=AE(),e=Dc(),n=Xv();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function l(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function u(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function m(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(l(t)!==t)throw Error(i(188))}function g(t){var s=t.alternate;if(!s){if(s=l(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,c=s;;){var d=a.return;if(d===null)break;var h=d.alternate;if(h===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===a)return p(d),t;if(h===c)return p(d),s;h=h.sibling}throw Error(i(188))}if(a.return!==c.return)a=d,c=h;else{for(var y=!1,w=d.child;w;){if(w===a){y=!0,a=d,c=h;break}if(w===c){y=!0,c=d,a=h;break}w=w.sibling}if(!y){for(w=h.child;w;){if(w===a){y=!0,a=h,c=d;break}if(w===c){y=!0,c=h,a=d;break}w=w.sibling}if(!y)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function v(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=v(t),s!==null)return s;t=t.sibling}return null}var b=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),M=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),be=Symbol.for("react.memo_cache_sentinel"),fe=Symbol.iterator;function Ce(t){return t===null||typeof t!="object"?null:(t=fe&&t[fe]||t["@@iterator"],typeof t=="function"?t:null)}var de=Symbol.for("react.client.reference");function ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===de?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case T:return"Fragment";case j:return"Profiler";case C:return"StrictMode";case G:return"Suspense";case Y:return"SuspenseList";case X:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case S:return"Portal";case M:return t.displayName||"Context";case U:return(t._context.displayName||"Context")+".Consumer";case V:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case F:return s=t.displayName||null,s!==null?s:ke(t.type)||"Memo";case ye:s=t._payload,t=t._init;try{return ke(t(s))}catch{}}return null}var Xe=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},xe=[],Be=-1;function A(t){return{current:t}}function $(t){0>Be||(t.current=xe[Be],xe[Be]=null,Be--)}function Q(t,s){Be++,xe[Be]=t.current,t.current=s}var se=A(null),_e=A(null),Ae=A(null),Se=A(null);function pt(t,s){switch(Q(Ae,s),Q(_e,t),Q(se,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Ny(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Ny(s),t=Oy(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(se),Q(se,t)}function Pe(){$(se),$(_e),$(Ae)}function Cn(t){t.memoizedState!==null&&Q(Se,t);var s=se.current,a=Oy(s,t.type);s!==a&&(Q(_e,t),Q(se,a))}function mn(t){_e.current===t&&($(se),$(_e)),Se.current===t&&($(Se),Va._currentValue=te)}var na,gs;function kn(t){if(na===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);na=s&&s[1]||"",gs=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+na+t+gs}var tn=!1;function Fr(t,s){if(!t||tn)return"";tn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(L){var I=L}Reflect.construct(t,[],H)}else{try{H.call()}catch(L){I=L}t.call(H.prototype)}}else{try{throw Error()}catch(L){I=L}(H=t())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(L){if(L&&I&&typeof L.stack=="string")return[L.stack,I.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=c.DetermineComponentFrameRoot(),y=h[0],w=h[1];if(y&&w){var E=y.split(`
`),R=w.split(`
`);for(d=c=0;c<E.length&&!E[c].includes("DetermineComponentFrameRoot");)c++;for(;d<R.length&&!R[d].includes("DetermineComponentFrameRoot");)d++;if(c===E.length||d===R.length)for(c=E.length-1,d=R.length-1;1<=c&&0<=d&&E[c]!==R[d];)d--;for(;1<=c&&0<=d;c--,d--)if(E[c]!==R[d]){if(c!==1||d!==1)do if(c--,d--,0>d||E[c]!==R[d]){var B=`
`+E[c].replace(" at new "," at ");return t.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",t.displayName)),B}while(1<=c&&0<=d);break}}}finally{tn=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?kn(a):""}function To(t,s){switch(t.tag){case 26:case 27:case 5:return kn(t.type);case 16:return kn("Lazy");case 13:return t.child!==s&&s!==null?kn("Suspense Fallback"):kn("Suspense");case 19:return kn("SuspenseList");case 0:case 15:return Fr(t.type,!1);case 11:return Fr(t.type.render,!1);case 1:return Fr(t.type,!0);case 31:return kn("Activity");default:return""}}function An(t){try{var s="",a=null;do s+=To(t,a),a=t,t=t.return;while(t);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ys=Object.prototype.hasOwnProperty,ir=r.unstable_scheduleCallback,ar=r.unstable_cancelCallback,ut=r.unstable_shouldYield,Co=r.unstable_requestPaint,Ct=r.unstable_now,ko=r.unstable_getCurrentPriorityLevel,Ao=r.unstable_ImmediatePriority,jo=r.unstable_UserBlockingPriority,Wr=r.unstable_NormalPriority,eu=r.unstable_LowPriority,pn=r.unstable_IdlePriority,No=r.log,K=r.unstable_setDisableYieldValue,le=null,me=null;function oe(t){if(typeof No=="function"&&K(t),me&&typeof me.setStrictMode=="function")try{me.setStrictMode(le,t)}catch{}}var ce=Math.clz32?Math.clz32:dt,Dt=Math.log,ve=Math.LN2;function dt(t){return t>>>=0,t===0?32:31-(Dt(t)/ve|0)|0}var vs=256,Yr=262144,Oo=4194304;function or(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ro(t,s,a){var c=t.pendingLanes;if(c===0)return 0;var d=0,h=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var w=c&134217727;return w!==0?(c=w&~h,c!==0?d=or(c):(y&=w,y!==0?d=or(y):a||(a=w&~t,a!==0&&(d=or(a))))):(w=c&~h,w!==0?d=or(w):y!==0?d=or(y):a||(a=c&~t,a!==0&&(d=or(a)))),d===0?0:s!==0&&s!==d&&(s&h)===0&&(h=d&-d,a=s&-s,h>=a||h===32&&(a&4194048)!==0)?s:d}function sa(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function ox(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dm(){var t=Oo;return Oo<<=1,(Oo&62914560)===0&&(Oo=4194304),t}function tu(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function ra(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function lx(t,s,a,c,d,h){var y=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,E=t.expirationTimes,R=t.hiddenUpdates;for(a=y&~a;0<a;){var B=31-ce(a),H=1<<B;w[B]=0,E[B]=-1;var I=R[B];if(I!==null)for(R[B]=null,B=0;B<I.length;B++){var L=I[B];L!==null&&(L.lane&=-536870913)}a&=~H}c!==0&&hm(t,c,0),h!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=h&~(y&~s))}function hm(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var c=31-ce(s);t.entangledLanes|=s,t.entanglements[c]=t.entanglements[c]|1073741824|a&261930}function fm(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var c=31-ce(a),d=1<<c;d&s|t[c]&s&&(t[c]|=s),a&=~d}}function mm(t,s){var a=s&-s;return a=(a&42)!==0?1:nu(a),(a&(t.suspendedLanes|s))!==0?0:a}function nu(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function su(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function pm(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:e0(t.type))}function gm(t,s){var a=W.p;try{return W.p=t,s()}finally{W.p=a}}var bs=Math.random().toString(36).slice(2),vt="__reactFiber$"+bs,Mt="__reactProps$"+bs,Jr="__reactContainer$"+bs,ru="__reactEvents$"+bs,cx="__reactListeners$"+bs,ux="__reactHandles$"+bs,ym="__reactResources$"+bs,ia="__reactMarker$"+bs;function iu(t){delete t[vt],delete t[Mt],delete t[ru],delete t[cx],delete t[ux]}function Xr(t){var s=t[vt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Jr]||a[vt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Ly(t);t!==null;){if(a=t[vt])return a;t=Ly(t)}return s}t=a,a=t.parentNode}return null}function Qr(t){if(t=t[vt]||t[Jr]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function aa(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function Zr(t){var s=t[ym];return s||(s=t[ym]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function gt(t){t[ia]=!0}var vm=new Set,bm={};function lr(t,s){ei(t,s),ei(t+"Capture",s)}function ei(t,s){for(bm[t]=s,t=0;t<s.length;t++)vm.add(s[t])}var dx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wm={},_m={};function hx(t){return ys.call(_m,t)?!0:ys.call(wm,t)?!1:dx.test(t)?_m[t]=!0:(wm[t]=!0,!1)}function Uo(t,s,a){if(hx(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Io(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function qn(t,s,a,c){if(c===null)t.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+c)}}function nn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xm(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function fx(t,s,a){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var d=c.get,h=c.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(y){a=""+y,h.call(this,y)}}),Object.defineProperty(t,s,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function au(t){if(!t._valueTracker){var s=xm(t)?"checked":"value";t._valueTracker=fx(t,s,""+t[s])}}function Sm(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return t&&(c=xm(t)?t.checked?"true":"false":t.value),t=c,t!==a?(s.setValue(t),!0):!1}function Do(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var mx=/[\n"\\]/g;function sn(t){return t.replace(mx,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ou(t,s,a,c,d,h,y,w){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),s!=null?y==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+nn(s)):t.value!==""+nn(s)&&(t.value=""+nn(s)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),s!=null?lu(t,y,nn(s)):a!=null?lu(t,y,nn(a)):c!=null&&t.removeAttribute("value"),d==null&&h!=null&&(t.defaultChecked=!!h),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+nn(w):t.removeAttribute("name")}function Em(t,s,a,c,d,h,y,w){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),s!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||s!=null)){au(t);return}a=a!=null?""+nn(a):"",s=s!=null?""+nn(s):a,w||s===t.value||(t.value=s),t.defaultValue=s}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=w?t.checked:!!c,t.defaultChecked=!!c,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),au(t)}function lu(t,s,a){s==="number"&&Do(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ti(t,s,a,c){if(t=t.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=s.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&c&&(t[a].defaultSelected=!0)}else{for(a=""+nn(a),s=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,c&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function Tm(t,s,a){if(s!=null&&(s=""+nn(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+nn(a):""}function Cm(t,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(i(92));if(Xe(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=nn(s),t.defaultValue=a,c=t.textContent,c===a&&c!==""&&c!==null&&(t.value=c),au(t)}function ni(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var px=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function km(t,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":c?t.setProperty(s,a):typeof a!="number"||a===0||px.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function Am(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var d in s)c=s[d],s.hasOwnProperty(d)&&a[d]!==c&&km(t,d,c)}else for(var h in s)s.hasOwnProperty(h)&&km(t,h,s[h])}function cu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mo(t){return yx.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Hn(){}var uu=null;function du(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var si=null,ri=null;function jm(t){var s=Qr(t);if(s&&(t=s.stateNode)){var a=t[Mt]||null;e:switch(t=s.stateNode,s.type){case"input":if(ou(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+sn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==t&&c.form===t.form){var d=c[Mt]||null;if(!d)throw Error(i(90));ou(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===t.form&&Sm(c)}break e;case"textarea":Tm(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ti(t,!!a.multiple,s,!1)}}}var hu=!1;function Nm(t,s,a){if(hu)return t(s,a);hu=!0;try{var c=t(s);return c}finally{if(hu=!1,(si!==null||ri!==null)&&(Sl(),si&&(s=si,t=ri,ri=si=null,jm(s),t)))for(s=0;s<t.length;s++)jm(t[s])}}function oa(t,s){var a=t.stateNode;if(a===null)return null;var c=a[Mt]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fu=!1;if($n)try{var la={};Object.defineProperty(la,"passive",{get:function(){fu=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{fu=!1}var ws=null,mu=null,Po=null;function Om(){if(Po)return Po;var t,s=mu,a=s.length,c,d="value"in ws?ws.value:ws.textContent,h=d.length;for(t=0;t<a&&s[t]===d[t];t++);var y=a-t;for(c=1;c<=y&&s[a-c]===d[h-c];c++);return Po=d.slice(t,1<c?1-c:void 0)}function Lo(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function zo(){return!0}function Rm(){return!1}function Pt(t){function s(a,c,d,h,y){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=h,this.target=y,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(h):h[w]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?zo:Rm,this.isPropagationStopped=Rm,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zo)},persist:function(){},isPersistent:zo}),s}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bo=Pt(cr),ca=b({},cr,{view:0,detail:0}),vx=Pt(ca),pu,gu,ua,qo=b({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ua&&(ua&&t.type==="mousemove"?(pu=t.screenX-ua.screenX,gu=t.screenY-ua.screenY):gu=pu=0,ua=t),pu)},movementY:function(t){return"movementY"in t?t.movementY:gu}}),Um=Pt(qo),bx=b({},qo,{dataTransfer:0}),wx=Pt(bx),_x=b({},ca,{relatedTarget:0}),yu=Pt(_x),xx=b({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Sx=Pt(xx),Ex=b({},cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tx=Pt(Ex),Cx=b({},cr,{data:0}),Im=Pt(Cx),kx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ax={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nx(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=jx[t])?!!s[t]:!1}function vu(){return Nx}var Ox=b({},ca,{key:function(t){if(t.key){var s=kx[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Lo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ax[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vu,charCode:function(t){return t.type==="keypress"?Lo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rx=Pt(Ox),Ux=b({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dm=Pt(Ux),Ix=b({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vu}),Dx=Pt(Ix),Mx=b({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Px=Pt(Mx),Lx=b({},qo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zx=Pt(Lx),Bx=b({},cr,{newState:0,oldState:0}),qx=Pt(Bx),Hx=[9,13,27,32],bu=$n&&"CompositionEvent"in window,da=null;$n&&"documentMode"in document&&(da=document.documentMode);var $x=$n&&"TextEvent"in window&&!da,Mm=$n&&(!bu||da&&8<da&&11>=da),Pm=" ",Lm=!1;function zm(t,s){switch(t){case"keyup":return Hx.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ii=!1;function Vx(t,s){switch(t){case"compositionend":return Bm(s);case"keypress":return s.which!==32?null:(Lm=!0,Pm);case"textInput":return t=s.data,t===Pm&&Lm?null:t;default:return null}}function Gx(t,s){if(ii)return t==="compositionend"||!bu&&zm(t,s)?(t=Om(),Po=mu=ws=null,ii=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Mm&&s.locale!=="ko"?null:s.data;default:return null}}var Kx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qm(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Kx[t.type]:s==="textarea"}function Hm(t,s,a,c){si?ri?ri.push(c):ri=[c]:si=c,s=Nl(s,"onChange"),0<s.length&&(a=new Bo("onChange","change",null,a,c),t.push({event:a,listeners:s}))}var ha=null,fa=null;function Fx(t){Ey(t,0)}function Ho(t){var s=aa(t);if(Sm(s))return t}function $m(t,s){if(t==="change")return s}var Vm=!1;if($n){var wu;if($n){var _u="oninput"in document;if(!_u){var Gm=document.createElement("div");Gm.setAttribute("oninput","return;"),_u=typeof Gm.oninput=="function"}wu=_u}else wu=!1;Vm=wu&&(!document.documentMode||9<document.documentMode)}function Km(){ha&&(ha.detachEvent("onpropertychange",Fm),fa=ha=null)}function Fm(t){if(t.propertyName==="value"&&Ho(fa)){var s=[];Hm(s,fa,t,du(t)),Nm(Fx,s)}}function Wx(t,s,a){t==="focusin"?(Km(),ha=s,fa=a,ha.attachEvent("onpropertychange",Fm)):t==="focusout"&&Km()}function Yx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ho(fa)}function Jx(t,s){if(t==="click")return Ho(s)}function Xx(t,s){if(t==="input"||t==="change")return Ho(s)}function Qx(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Vt=typeof Object.is=="function"?Object.is:Qx;function ma(t,s){if(Vt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!ys.call(s,d)||!Vt(t[d],s[d]))return!1}return!0}function Wm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ym(t,s){var a=Wm(t);t=0;for(var c;a;){if(a.nodeType===3){if(c=t+a.textContent.length,t<=s&&c>=s)return{node:a,offset:s-t};t=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Wm(a)}}function Jm(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Jm(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Xm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Do(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Do(t.document)}return s}function xu(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Zx=$n&&"documentMode"in document&&11>=document.documentMode,ai=null,Su=null,pa=null,Eu=!1;function Qm(t,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Eu||ai==null||ai!==Do(c)||(c=ai,"selectionStart"in c&&xu(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),pa&&ma(pa,c)||(pa=c,c=Nl(Su,"onSelect"),0<c.length&&(s=new Bo("onSelect","select",null,s,a),t.push({event:s,listeners:c}),s.target=ai)))}function ur(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var oi={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},Tu={},Zm={};$n&&(Zm=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function dr(t){if(Tu[t])return Tu[t];if(!oi[t])return t;var s=oi[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Zm)return Tu[t]=s[a];return t}var ep=dr("animationend"),tp=dr("animationiteration"),np=dr("animationstart"),eS=dr("transitionrun"),tS=dr("transitionstart"),nS=dr("transitioncancel"),sp=dr("transitionend"),rp=new Map,Cu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cu.push("scrollEnd");function gn(t,s){rp.set(t,s),lr(s,[t])}var $o=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},rn=[],li=0,ku=0;function Vo(){for(var t=li,s=ku=li=0;s<t;){var a=rn[s];rn[s++]=null;var c=rn[s];rn[s++]=null;var d=rn[s];rn[s++]=null;var h=rn[s];if(rn[s++]=null,c!==null&&d!==null){var y=c.pending;y===null?d.next=d:(d.next=y.next,y.next=d),c.pending=d}h!==0&&ip(a,d,h)}}function Go(t,s,a,c){rn[li++]=t,rn[li++]=s,rn[li++]=a,rn[li++]=c,ku|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function Au(t,s,a,c){return Go(t,s,a,c),Ko(t)}function hr(t,s){return Go(t,null,null,s),Ko(t)}function ip(t,s,a){t.lanes|=a;var c=t.alternate;c!==null&&(c.lanes|=a);for(var d=!1,h=t.return;h!==null;)h.childLanes|=a,c=h.alternate,c!==null&&(c.childLanes|=a),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(d=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,d&&s!==null&&(d=31-ce(a),t=h.hiddenUpdates,c=t[d],c===null?t[d]=[s]:c.push(s),s.lane=a|536870912),h):null}function Ko(t){if(50<Pa)throw Pa=0,Pd=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ci={};function sS(t,s,a,c){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,s,a,c){return new sS(t,s,a,c)}function ju(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vn(t,s){var a=t.alternate;return a===null?(a=Gt(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ap(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Fo(t,s,a,c,d,h){var y=0;if(c=t,typeof t=="function")ju(t)&&(y=1);else if(typeof t=="string")y=lE(t,a,se.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case X:return t=Gt(31,a,s,d),t.elementType=X,t.lanes=h,t;case T:return fr(a.children,d,h,s);case C:y=8,d|=24;break;case j:return t=Gt(12,a,s,d|2),t.elementType=j,t.lanes=h,t;case G:return t=Gt(13,a,s,d),t.elementType=G,t.lanes=h,t;case Y:return t=Gt(19,a,s,d),t.elementType=Y,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case M:y=10;break e;case U:y=9;break e;case V:y=11;break e;case F:y=14;break e;case ye:y=16,c=null;break e}y=29,a=Error(i(130,t===null?"null":typeof t,"")),c=null}return s=Gt(y,a,s,d),s.elementType=t,s.type=c,s.lanes=h,s}function fr(t,s,a,c){return t=Gt(7,t,c,s),t.lanes=a,t}function Nu(t,s,a){return t=Gt(6,t,null,s),t.lanes=a,t}function op(t){var s=Gt(18,null,null,0);return s.stateNode=t,s}function Ou(t,s,a){return s=Gt(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var lp=new WeakMap;function an(t,s){if(typeof t=="object"&&t!==null){var a=lp.get(t);return a!==void 0?a:(s={value:t,source:s,stack:An(s)},lp.set(t,s),s)}return{value:t,source:s,stack:An(s)}}var ui=[],di=0,Wo=null,ga=0,on=[],ln=0,_s=null,jn=1,Nn="";function Gn(t,s){ui[di++]=ga,ui[di++]=Wo,Wo=t,ga=s}function cp(t,s,a){on[ln++]=jn,on[ln++]=Nn,on[ln++]=_s,_s=t;var c=jn;t=Nn;var d=32-ce(c)-1;c&=~(1<<d),a+=1;var h=32-ce(s)+d;if(30<h){var y=d-d%5;h=(c&(1<<y)-1).toString(32),c>>=y,d-=y,jn=1<<32-ce(s)+d|a<<d|c,Nn=h+t}else jn=1<<h|a<<d|c,Nn=t}function Ru(t){t.return!==null&&(Gn(t,1),cp(t,1,0))}function Uu(t){for(;t===Wo;)Wo=ui[--di],ui[di]=null,ga=ui[--di],ui[di]=null;for(;t===_s;)_s=on[--ln],on[ln]=null,Nn=on[--ln],on[ln]=null,jn=on[--ln],on[ln]=null}function up(t,s){on[ln++]=jn,on[ln++]=Nn,on[ln++]=_s,jn=s.id,Nn=s.overflow,_s=t}var bt=null,We=null,Ue=!1,xs=null,cn=!1,Iu=Error(i(519));function Ss(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ya(an(s,t)),Iu}function dp(t){var s=t.stateNode,a=t.type,c=t.memoizedProps;switch(s[vt]=t,s[Mt]=c,a){case"dialog":Ne("cancel",s),Ne("close",s);break;case"iframe":case"object":case"embed":Ne("load",s);break;case"video":case"audio":for(a=0;a<za.length;a++)Ne(za[a],s);break;case"source":Ne("error",s);break;case"img":case"image":case"link":Ne("error",s),Ne("load",s);break;case"details":Ne("toggle",s);break;case"input":Ne("invalid",s),Em(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ne("invalid",s);break;case"textarea":Ne("invalid",s),Cm(s,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||Ay(s.textContent,a)?(c.popover!=null&&(Ne("beforetoggle",s),Ne("toggle",s)),c.onScroll!=null&&Ne("scroll",s),c.onScrollEnd!=null&&Ne("scrollend",s),c.onClick!=null&&(s.onclick=Hn),s=!0):s=!1,s||Ss(t,!0)}function hp(t){for(bt=t.return;bt;)switch(bt.tag){case 5:case 31:case 13:cn=!1;return;case 27:case 3:cn=!0;return;default:bt=bt.return}}function hi(t){if(t!==bt)return!1;if(!Ue)return hp(t),Ue=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Qd(t.type,t.memoizedProps)),a=!a),a&&We&&Ss(t),hp(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));We=Py(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));We=Py(t)}else s===27?(s=We,Ps(t.type)?(t=sh,sh=null,We=t):We=s):We=bt?dn(t.stateNode.nextSibling):null;return!0}function mr(){We=bt=null,Ue=!1}function Du(){var t=xs;return t!==null&&(qt===null?qt=t:qt.push.apply(qt,t),xs=null),t}function ya(t){xs===null?xs=[t]:xs.push(t)}var Mu=A(null),pr=null,Kn=null;function Es(t,s,a){Q(Mu,s._currentValue),s._currentValue=a}function Fn(t){t._currentValue=Mu.current,$(Mu)}function Pu(t,s,a){for(;t!==null;){var c=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),t===a)break;t=t.return}}function Lu(t,s,a,c){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var h=d.dependencies;if(h!==null){var y=d.child;h=h.firstContext;e:for(;h!==null;){var w=h;h=d;for(var E=0;E<s.length;E++)if(w.context===s[E]){h.lanes|=a,w=h.alternate,w!==null&&(w.lanes|=a),Pu(h.return,a,t),c||(y=null);break e}h=w.next}}else if(d.tag===18){if(y=d.return,y===null)throw Error(i(341));y.lanes|=a,h=y.alternate,h!==null&&(h.lanes|=a),Pu(y,a,t),y=null}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===t){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}}function fi(t,s,a,c){t=null;for(var d=s,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var y=d.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var w=d.type;Vt(d.pendingProps.value,y.value)||(t!==null?t.push(w):t=[w])}}else if(d===Se.current){if(y=d.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Va):t=[Va])}d=d.return}t!==null&&Lu(s,t,a,c),s.flags|=262144}function Yo(t){for(t=t.firstContext;t!==null;){if(!Vt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function gr(t){pr=t,Kn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function wt(t){return fp(pr,t)}function Jo(t,s){return pr===null&&gr(t),fp(t,s)}function fp(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Kn===null){if(t===null)throw Error(i(308));Kn=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Kn=Kn.next=s;return a}var rS=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,c){t.push(c)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},iS=r.unstable_scheduleCallback,aS=r.unstable_NormalPriority,rt={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zu(){return{controller:new rS,data:new Map,refCount:0}}function va(t){t.refCount--,t.refCount===0&&iS(aS,function(){t.controller.abort()})}var ba=null,Bu=0,mi=0,pi=null;function oS(t,s){if(ba===null){var a=ba=[];Bu=0,mi=$d(),pi={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Bu++,s.then(mp,mp),s}function mp(){if(--Bu===0&&ba!==null){pi!==null&&(pi.status="fulfilled");var t=ba;ba=null,mi=0,pi=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function lS(t,s){var a=[],c={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){c.status="fulfilled",c.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(c.status="rejected",c.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),c}var pp=z.S;z.S=function(t,s){Qg=Ct(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&oS(t,s),pp!==null&&pp(t,s)};var yr=A(null);function qu(){var t=yr.current;return t!==null?t:Ve.pooledCache}function Xo(t,s){s===null?Q(yr,yr.current):Q(yr,s.pool)}function gp(){var t=qu();return t===null?null:{parent:rt._currentValue,pool:t}}var gi=Error(i(460)),Hu=Error(i(474)),Qo=Error(i(542)),Zo={then:function(){}};function yp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function vp(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(Hn,Hn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,wp(t),t;default:if(typeof s.status=="string")s.then(Hn,Hn);else{if(t=Ve,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(c){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=c}},function(c){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,wp(t),t}throw br=s,gi}}function vr(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(br=a,gi):a}}var br=null;function bp(){if(br===null)throw Error(i(459));var t=br;return br=null,t}function wp(t){if(t===gi||t===Qo)throw Error(i(483))}var yi=null,wa=0;function el(t){var s=wa;return wa+=1,yi===null&&(yi=[]),vp(yi,t,s)}function _a(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function tl(t,s){throw s.$$typeof===_?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function _p(t){function s(N,k){if(t){var O=N.deletions;O===null?(N.deletions=[k],N.flags|=16):O.push(k)}}function a(N,k){if(!t)return null;for(;k!==null;)s(N,k),k=k.sibling;return null}function c(N){for(var k=new Map;N!==null;)N.key!==null?k.set(N.key,N):k.set(N.index,N),N=N.sibling;return k}function d(N,k){return N=Vn(N,k),N.index=0,N.sibling=null,N}function h(N,k,O){return N.index=O,t?(O=N.alternate,O!==null?(O=O.index,O<k?(N.flags|=67108866,k):O):(N.flags|=67108866,k)):(N.flags|=1048576,k)}function y(N){return t&&N.alternate===null&&(N.flags|=67108866),N}function w(N,k,O,q){return k===null||k.tag!==6?(k=Nu(O,N.mode,q),k.return=N,k):(k=d(k,O),k.return=N,k)}function E(N,k,O,q){var ue=O.type;return ue===T?B(N,k,O.props.children,q,O.key):k!==null&&(k.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===ye&&vr(ue)===k.type)?(k=d(k,O.props),_a(k,O),k.return=N,k):(k=Fo(O.type,O.key,O.props,null,N.mode,q),_a(k,O),k.return=N,k)}function R(N,k,O,q){return k===null||k.tag!==4||k.stateNode.containerInfo!==O.containerInfo||k.stateNode.implementation!==O.implementation?(k=Ou(O,N.mode,q),k.return=N,k):(k=d(k,O.children||[]),k.return=N,k)}function B(N,k,O,q,ue){return k===null||k.tag!==7?(k=fr(O,N.mode,q,ue),k.return=N,k):(k=d(k,O),k.return=N,k)}function H(N,k,O){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Nu(""+k,N.mode,O),k.return=N,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case x:return O=Fo(k.type,k.key,k.props,null,N.mode,O),_a(O,k),O.return=N,O;case S:return k=Ou(k,N.mode,O),k.return=N,k;case ye:return k=vr(k),H(N,k,O)}if(Xe(k)||Ce(k))return k=fr(k,N.mode,O,null),k.return=N,k;if(typeof k.then=="function")return H(N,el(k),O);if(k.$$typeof===M)return H(N,Jo(N,k),O);tl(N,k)}return null}function I(N,k,O,q){var ue=k!==null?k.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return ue!==null?null:w(N,k,""+O,q);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case x:return O.key===ue?E(N,k,O,q):null;case S:return O.key===ue?R(N,k,O,q):null;case ye:return O=vr(O),I(N,k,O,q)}if(Xe(O)||Ce(O))return ue!==null?null:B(N,k,O,q,null);if(typeof O.then=="function")return I(N,k,el(O),q);if(O.$$typeof===M)return I(N,k,Jo(N,O),q);tl(N,O)}return null}function L(N,k,O,q,ue){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return N=N.get(O)||null,w(k,N,""+q,ue);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case x:return N=N.get(q.key===null?O:q.key)||null,E(k,N,q,ue);case S:return N=N.get(q.key===null?O:q.key)||null,R(k,N,q,ue);case ye:return q=vr(q),L(N,k,O,q,ue)}if(Xe(q)||Ce(q))return N=N.get(O)||null,B(k,N,q,ue,null);if(typeof q.then=="function")return L(N,k,O,el(q),ue);if(q.$$typeof===M)return L(N,k,O,Jo(k,q),ue);tl(k,q)}return null}function re(N,k,O,q){for(var ue=null,Ie=null,ie=k,Te=k=0,Re=null;ie!==null&&Te<O.length;Te++){ie.index>Te?(Re=ie,ie=null):Re=ie.sibling;var De=I(N,ie,O[Te],q);if(De===null){ie===null&&(ie=Re);break}t&&ie&&De.alternate===null&&s(N,ie),k=h(De,k,Te),Ie===null?ue=De:Ie.sibling=De,Ie=De,ie=Re}if(Te===O.length)return a(N,ie),Ue&&Gn(N,Te),ue;if(ie===null){for(;Te<O.length;Te++)ie=H(N,O[Te],q),ie!==null&&(k=h(ie,k,Te),Ie===null?ue=ie:Ie.sibling=ie,Ie=ie);return Ue&&Gn(N,Te),ue}for(ie=c(ie);Te<O.length;Te++)Re=L(ie,N,Te,O[Te],q),Re!==null&&(t&&Re.alternate!==null&&ie.delete(Re.key===null?Te:Re.key),k=h(Re,k,Te),Ie===null?ue=Re:Ie.sibling=Re,Ie=Re);return t&&ie.forEach(function(Hs){return s(N,Hs)}),Ue&&Gn(N,Te),ue}function he(N,k,O,q){if(O==null)throw Error(i(151));for(var ue=null,Ie=null,ie=k,Te=k=0,Re=null,De=O.next();ie!==null&&!De.done;Te++,De=O.next()){ie.index>Te?(Re=ie,ie=null):Re=ie.sibling;var Hs=I(N,ie,De.value,q);if(Hs===null){ie===null&&(ie=Re);break}t&&ie&&Hs.alternate===null&&s(N,ie),k=h(Hs,k,Te),Ie===null?ue=Hs:Ie.sibling=Hs,Ie=Hs,ie=Re}if(De.done)return a(N,ie),Ue&&Gn(N,Te),ue;if(ie===null){for(;!De.done;Te++,De=O.next())De=H(N,De.value,q),De!==null&&(k=h(De,k,Te),Ie===null?ue=De:Ie.sibling=De,Ie=De);return Ue&&Gn(N,Te),ue}for(ie=c(ie);!De.done;Te++,De=O.next())De=L(ie,N,Te,De.value,q),De!==null&&(t&&De.alternate!==null&&ie.delete(De.key===null?Te:De.key),k=h(De,k,Te),Ie===null?ue=De:Ie.sibling=De,Ie=De);return t&&ie.forEach(function(bE){return s(N,bE)}),Ue&&Gn(N,Te),ue}function $e(N,k,O,q){if(typeof O=="object"&&O!==null&&O.type===T&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case x:e:{for(var ue=O.key;k!==null;){if(k.key===ue){if(ue=O.type,ue===T){if(k.tag===7){a(N,k.sibling),q=d(k,O.props.children),q.return=N,N=q;break e}}else if(k.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===ye&&vr(ue)===k.type){a(N,k.sibling),q=d(k,O.props),_a(q,O),q.return=N,N=q;break e}a(N,k);break}else s(N,k);k=k.sibling}O.type===T?(q=fr(O.props.children,N.mode,q,O.key),q.return=N,N=q):(q=Fo(O.type,O.key,O.props,null,N.mode,q),_a(q,O),q.return=N,N=q)}return y(N);case S:e:{for(ue=O.key;k!==null;){if(k.key===ue)if(k.tag===4&&k.stateNode.containerInfo===O.containerInfo&&k.stateNode.implementation===O.implementation){a(N,k.sibling),q=d(k,O.children||[]),q.return=N,N=q;break e}else{a(N,k);break}else s(N,k);k=k.sibling}q=Ou(O,N.mode,q),q.return=N,N=q}return y(N);case ye:return O=vr(O),$e(N,k,O,q)}if(Xe(O))return re(N,k,O,q);if(Ce(O)){if(ue=Ce(O),typeof ue!="function")throw Error(i(150));return O=ue.call(O),he(N,k,O,q)}if(typeof O.then=="function")return $e(N,k,el(O),q);if(O.$$typeof===M)return $e(N,k,Jo(N,O),q);tl(N,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,k!==null&&k.tag===6?(a(N,k.sibling),q=d(k,O),q.return=N,N=q):(a(N,k),q=Nu(O,N.mode,q),q.return=N,N=q),y(N)):a(N,k)}return function(N,k,O,q){try{wa=0;var ue=$e(N,k,O,q);return yi=null,ue}catch(ie){if(ie===gi||ie===Qo)throw ie;var Ie=Gt(29,ie,null,N.mode);return Ie.lanes=q,Ie.return=N,Ie}finally{}}}var wr=_p(!0),xp=_p(!1),Ts=!1;function $u(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vu(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Cs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ks(t,s,a){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Me&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,s=Ko(t),ip(t,null,a),s}return Go(t,c,s,a),Ko(t)}function xa(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=t.pendingLanes,a|=c,s.lanes=a,fm(t,a)}}function Gu(t,s){var a=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?d=h=y:h=h.next=y,a=a.next}while(a!==null);h===null?d=h=s:h=h.next=s}else d=h=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:c.shared,callbacks:c.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Ku=!1;function Sa(){if(Ku){var t=pi;if(t!==null)throw t}}function Ea(t,s,a,c){Ku=!1;var d=t.updateQueue;Ts=!1;var h=d.firstBaseUpdate,y=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var E=w,R=E.next;E.next=null,y===null?h=R:y.next=R,y=E;var B=t.alternate;B!==null&&(B=B.updateQueue,w=B.lastBaseUpdate,w!==y&&(w===null?B.firstBaseUpdate=R:w.next=R,B.lastBaseUpdate=E))}if(h!==null){var H=d.baseState;y=0,B=R=E=null,w=h;do{var I=w.lane&-536870913,L=I!==w.lane;if(L?(Oe&I)===I:(c&I)===I){I!==0&&I===mi&&(Ku=!0),B!==null&&(B=B.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var re=t,he=w;I=s;var $e=a;switch(he.tag){case 1:if(re=he.payload,typeof re=="function"){H=re.call($e,H,I);break e}H=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=he.payload,I=typeof re=="function"?re.call($e,H,I):re,I==null)break e;H=b({},H,I);break e;case 2:Ts=!0}}I=w.callback,I!==null&&(t.flags|=64,L&&(t.flags|=8192),L=d.callbacks,L===null?d.callbacks=[I]:L.push(I))}else L={lane:I,tag:w.tag,payload:w.payload,callback:w.callback,next:null},B===null?(R=B=L,E=H):B=B.next=L,y|=I;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;L=w,w=L.next,L.next=null,d.lastBaseUpdate=L,d.shared.pending=null}}while(!0);B===null&&(E=H),d.baseState=E,d.firstBaseUpdate=R,d.lastBaseUpdate=B,h===null&&(d.shared.lanes=0),Rs|=y,t.lanes=y,t.memoizedState=H}}function Sp(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function Ep(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Sp(a[t],s)}var vi=A(null),nl=A(0);function Tp(t,s){t=ns,Q(nl,t),Q(vi,s),ns=t|s.baseLanes}function Fu(){Q(nl,ns),Q(vi,vi.current)}function Wu(){ns=nl.current,$(vi),$(nl)}var Kt=A(null),un=null;function As(t){var s=t.alternate;Q(nt,nt.current&1),Q(Kt,t),un===null&&(s===null||vi.current!==null||s.memoizedState!==null)&&(un=t)}function Yu(t){Q(nt,nt.current),Q(Kt,t),un===null&&(un=t)}function Cp(t){t.tag===22?(Q(nt,nt.current),Q(Kt,t),un===null&&(un=t)):js()}function js(){Q(nt,nt.current),Q(Kt,Kt.current)}function Ft(t){$(Kt),un===t&&(un=null),$(nt)}var nt=A(0);function sl(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||th(a)||nh(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Wn=0,Ee=null,qe=null,it=null,rl=!1,bi=!1,_r=!1,il=0,Ta=0,wi=null,cS=0;function et(){throw Error(i(321))}function Ju(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Vt(t[a],s[a]))return!1;return!0}function Xu(t,s,a,c,d,h){return Wn=h,Ee=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,z.H=t===null||t.memoizedState===null?cg:hd,_r=!1,h=a(c,d),_r=!1,bi&&(h=Ap(s,a,c,d)),kp(t),h}function kp(t){z.H=Aa;var s=qe!==null&&qe.next!==null;if(Wn=0,it=qe=Ee=null,rl=!1,Ta=0,wi=null,s)throw Error(i(300));t===null||at||(t=t.dependencies,t!==null&&Yo(t)&&(at=!0))}function Ap(t,s,a,c){Ee=t;var d=0;do{if(bi&&(wi=null),Ta=0,bi=!1,25<=d)throw Error(i(301));if(d+=1,it=qe=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}z.H=ug,h=s(a,c)}while(bi);return h}function uS(){var t=z.H,s=t.useState()[0];return s=typeof s.then=="function"?Ca(s):s,t=t.useState()[0],(qe!==null?qe.memoizedState:null)!==t&&(Ee.flags|=1024),s}function Qu(){var t=il!==0;return il=0,t}function Zu(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function ed(t){if(rl){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}rl=!1}Wn=0,it=qe=Ee=null,bi=!1,Ta=il=0,wi=null}function Nt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Ee.memoizedState=it=t:it=it.next=t,it}function st(){if(qe===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var s=it===null?Ee.memoizedState:it.next;if(s!==null)it=s,qe=t;else{if(t===null)throw Ee.alternate===null?Error(i(467)):Error(i(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},it===null?Ee.memoizedState=it=t:it=it.next=t}return it}function al(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ca(t){var s=Ta;return Ta+=1,wi===null&&(wi=[]),t=vp(wi,t,s),s=Ee,(it===null?s.memoizedState:it.next)===null&&(s=s.alternate,z.H=s===null||s.memoizedState===null?cg:hd),t}function ol(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ca(t);if(t.$$typeof===M)return wt(t)}throw Error(i(438,String(t)))}function td(t){var s=null,a=Ee.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=Ee.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=al(),Ee.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),c=0;c<t;c++)a[c]=be;return s.index++,a}function Yn(t,s){return typeof s=="function"?s(t):s}function ll(t){var s=st();return nd(s,qe,t)}function nd(t,s,a){var c=t.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var d=t.baseQueue,h=c.pending;if(h!==null){if(d!==null){var y=d.next;d.next=h.next,h.next=y}s.baseQueue=d=h,c.pending=null}if(h=t.baseState,d===null)t.memoizedState=h;else{s=d.next;var w=y=null,E=null,R=s,B=!1;do{var H=R.lane&-536870913;if(H!==R.lane?(Oe&H)===H:(Wn&H)===H){var I=R.revertLane;if(I===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),H===mi&&(B=!0);else if((Wn&I)===I){R=R.next,I===mi&&(B=!0);continue}else H={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},E===null?(w=E=H,y=h):E=E.next=H,Ee.lanes|=I,Rs|=I;H=R.action,_r&&a(h,H),h=R.hasEagerState?R.eagerState:a(h,H)}else I={lane:H,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},E===null?(w=E=I,y=h):E=E.next=I,Ee.lanes|=H,Rs|=H;R=R.next}while(R!==null&&R!==s);if(E===null?y=h:E.next=w,!Vt(h,t.memoizedState)&&(at=!0,B&&(a=pi,a!==null)))throw a;t.memoizedState=h,t.baseState=y,t.baseQueue=E,c.lastRenderedState=h}return d===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function sd(t){var s=st(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var c=a.dispatch,d=a.pending,h=s.memoizedState;if(d!==null){a.pending=null;var y=d=d.next;do h=t(h,y.action),y=y.next;while(y!==d);Vt(h,s.memoizedState)||(at=!0),s.memoizedState=h,s.baseQueue===null&&(s.baseState=h),a.lastRenderedState=h}return[h,c]}function jp(t,s,a){var c=Ee,d=st(),h=Ue;if(h){if(a===void 0)throw Error(i(407));a=a()}else a=s();var y=!Vt((qe||d).memoizedState,a);if(y&&(d.memoizedState=a,at=!0),d=d.queue,ad(Rp.bind(null,c,d,t),[t]),d.getSnapshot!==s||y||it!==null&&it.memoizedState.tag&1){if(c.flags|=2048,_i(9,{destroy:void 0},Op.bind(null,c,d,a,s),null),Ve===null)throw Error(i(349));h||(Wn&127)!==0||Np(c,s,a)}return a}function Np(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ee.updateQueue,s===null?(s=al(),Ee.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Op(t,s,a,c){s.value=a,s.getSnapshot=c,Up(s)&&Ip(t)}function Rp(t,s,a){return a(function(){Up(s)&&Ip(t)})}function Up(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Vt(t,a)}catch{return!0}}function Ip(t){var s=hr(t,2);s!==null&&Ht(s,t,2)}function rd(t){var s=Nt();if(typeof t=="function"){var a=t;if(t=a(),_r){oe(!0);try{a()}finally{oe(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:t},s}function Dp(t,s,a,c){return t.baseState=a,nd(t,qe,typeof c=="function"?c:Yn)}function dS(t,s,a,c,d){if(dl(t))throw Error(i(485));if(t=s.action,t!==null){var h={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){h.listeners.push(y)}};z.T!==null?a(!0):h.isTransition=!1,c(h),a=s.pending,a===null?(h.next=s.pending=h,Mp(s,h)):(h.next=a.next,s.pending=a.next=h)}}function Mp(t,s){var a=s.action,c=s.payload,d=t.state;if(s.isTransition){var h=z.T,y={};z.T=y;try{var w=a(d,c),E=z.S;E!==null&&E(y,w),Pp(t,s,w)}catch(R){id(t,s,R)}finally{h!==null&&y.types!==null&&(h.types=y.types),z.T=h}}else try{h=a(d,c),Pp(t,s,h)}catch(R){id(t,s,R)}}function Pp(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Lp(t,s,c)},function(c){return id(t,s,c)}):Lp(t,s,a)}function Lp(t,s,a){s.status="fulfilled",s.value=a,zp(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Mp(t,a)))}function id(t,s,a){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,zp(s),s=s.next;while(s!==c)}t.action=null}function zp(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Bp(t,s){return s}function qp(t,s){if(Ue){var a=Ve.formState;if(a!==null){e:{var c=Ee;if(Ue){if(We){t:{for(var d=We,h=cn;d.nodeType!==8;){if(!h){d=null;break t}if(d=dn(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){We=dn(d.nextSibling),c=d.data==="F!";break e}}Ss(c)}c=!1}c&&(s=a[0])}}return a=Nt(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bp,lastRenderedState:s},a.queue=c,a=ag.bind(null,Ee,c),c.dispatch=a,c=rd(!1),h=dd.bind(null,Ee,!1,c.queue),c=Nt(),d={state:s,dispatch:null,action:t,pending:null},c.queue=d,a=dS.bind(null,Ee,d,h,a),d.dispatch=a,c.memoizedState=t,[s,a,!1]}function Hp(t){var s=st();return $p(s,qe,t)}function $p(t,s,a){if(s=nd(t,s,Bp)[0],t=ll(Yn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Ca(s)}catch(y){throw y===gi?Qo:y}else c=s;s=st();var d=s.queue,h=d.dispatch;return a!==s.memoizedState&&(Ee.flags|=2048,_i(9,{destroy:void 0},hS.bind(null,d,a),null)),[c,h,t]}function hS(t,s){t.action=s}function Vp(t){var s=st(),a=qe;if(a!==null)return $p(s,a,t);st(),s=s.memoizedState,a=st();var c=a.queue.dispatch;return a.memoizedState=t,[s,c,!1]}function _i(t,s,a,c){return t={tag:t,create:a,deps:c,inst:s,next:null},s=Ee.updateQueue,s===null&&(s=al(),Ee.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(c=a.next,a.next=t,t.next=c,s.lastEffect=t),t}function Gp(){return st().memoizedState}function cl(t,s,a,c){var d=Nt();Ee.flags|=t,d.memoizedState=_i(1|s,{destroy:void 0},a,c===void 0?null:c)}function ul(t,s,a,c){var d=st();c=c===void 0?null:c;var h=d.memoizedState.inst;qe!==null&&c!==null&&Ju(c,qe.memoizedState.deps)?d.memoizedState=_i(s,h,a,c):(Ee.flags|=t,d.memoizedState=_i(1|s,h,a,c))}function Kp(t,s){cl(8390656,8,t,s)}function ad(t,s){ul(2048,8,t,s)}function fS(t){Ee.flags|=4;var s=Ee.updateQueue;if(s===null)s=al(),Ee.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function Fp(t){var s=st().memoizedState;return fS({ref:s,nextImpl:t}),function(){if((Me&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Wp(t,s){return ul(4,2,t,s)}function Yp(t,s){return ul(4,4,t,s)}function Jp(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Xp(t,s,a){a=a!=null?a.concat([t]):null,ul(4,4,Jp.bind(null,s,t),a)}function od(){}function Qp(t,s){var a=st();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&Ju(s,c[1])?c[0]:(a.memoizedState=[t,s],t)}function Zp(t,s){var a=st();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&Ju(s,c[1]))return c[0];if(c=t(),_r){oe(!0);try{t()}finally{oe(!1)}}return a.memoizedState=[c,s],c}function ld(t,s,a){return a===void 0||(Wn&1073741824)!==0&&(Oe&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=ey(),Ee.lanes|=t,Rs|=t,a)}function eg(t,s,a,c){return Vt(a,s)?a:vi.current!==null?(t=ld(t,a,c),Vt(t,s)||(at=!0),t):(Wn&42)===0||(Wn&1073741824)!==0&&(Oe&261930)===0?(at=!0,t.memoizedState=a):(t=ey(),Ee.lanes|=t,Rs|=t,s)}function tg(t,s,a,c,d){var h=W.p;W.p=h!==0&&8>h?h:8;var y=z.T,w={};z.T=w,dd(t,!1,s,a);try{var E=d(),R=z.S;if(R!==null&&R(w,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var B=lS(E,c);ka(t,s,B,Jt(t))}else ka(t,s,c,Jt(t))}catch(H){ka(t,s,{then:function(){},status:"rejected",reason:H},Jt())}finally{W.p=h,y!==null&&w.types!==null&&(y.types=w.types),z.T=y}}function mS(){}function cd(t,s,a,c){if(t.tag!==5)throw Error(i(476));var d=ng(t).queue;tg(t,d,s,te,a===null?mS:function(){return sg(t),a(c)})}function ng(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:te},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function sg(t){var s=ng(t);s.next===null&&(s=t.alternate.memoizedState),ka(t,s.next.queue,{},Jt())}function ud(){return wt(Va)}function rg(){return st().memoizedState}function ig(){return st().memoizedState}function pS(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Jt();t=Cs(a);var c=ks(s,t,a);c!==null&&(Ht(c,s,a),xa(c,s,a)),s={cache:zu()},t.payload=s;return}s=s.return}}function gS(t,s,a){var c=Jt();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},dl(t)?og(s,a):(a=Au(t,s,a,c),a!==null&&(Ht(a,t,c),lg(a,s,c)))}function ag(t,s,a){var c=Jt();ka(t,s,a,c)}function ka(t,s,a,c){var d={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(dl(t))og(s,d);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=s.lastRenderedReducer,h!==null))try{var y=s.lastRenderedState,w=h(y,a);if(d.hasEagerState=!0,d.eagerState=w,Vt(w,y))return Go(t,s,d,0),Ve===null&&Vo(),!1}catch{}finally{}if(a=Au(t,s,d,c),a!==null)return Ht(a,t,c),lg(a,s,c),!0}return!1}function dd(t,s,a,c){if(c={lane:2,revertLane:$d(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},dl(t)){if(s)throw Error(i(479))}else s=Au(t,a,c,2),s!==null&&Ht(s,t,2)}function dl(t){var s=t.alternate;return t===Ee||s!==null&&s===Ee}function og(t,s){bi=rl=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function lg(t,s,a){if((a&4194048)!==0){var c=s.lanes;c&=t.pendingLanes,a|=c,s.lanes=a,fm(t,a)}}var Aa={readContext:wt,use:ol,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et};Aa.useEffectEvent=et;var cg={readContext:wt,use:ol,useCallback:function(t,s){return Nt().memoizedState=[t,s===void 0?null:s],t},useContext:wt,useEffect:Kp,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,cl(4194308,4,Jp.bind(null,s,t),a)},useLayoutEffect:function(t,s){return cl(4194308,4,t,s)},useInsertionEffect:function(t,s){cl(4,2,t,s)},useMemo:function(t,s){var a=Nt();s=s===void 0?null:s;var c=t();if(_r){oe(!0);try{t()}finally{oe(!1)}}return a.memoizedState=[c,s],c},useReducer:function(t,s,a){var c=Nt();if(a!==void 0){var d=a(s);if(_r){oe(!0);try{a(s)}finally{oe(!1)}}}else d=s;return c.memoizedState=c.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},c.queue=t,t=t.dispatch=gS.bind(null,Ee,t),[c.memoizedState,t]},useRef:function(t){var s=Nt();return t={current:t},s.memoizedState=t},useState:function(t){t=rd(t);var s=t.queue,a=ag.bind(null,Ee,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:od,useDeferredValue:function(t,s){var a=Nt();return ld(a,t,s)},useTransition:function(){var t=rd(!1);return t=tg.bind(null,Ee,t.queue,!0,!1),Nt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var c=Ee,d=Nt();if(Ue){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),Ve===null)throw Error(i(349));(Oe&127)!==0||Np(c,s,a)}d.memoizedState=a;var h={value:a,getSnapshot:s};return d.queue=h,Kp(Rp.bind(null,c,h,t),[t]),c.flags|=2048,_i(9,{destroy:void 0},Op.bind(null,c,h,a,s),null),a},useId:function(){var t=Nt(),s=Ve.identifierPrefix;if(Ue){var a=Nn,c=jn;a=(c&~(1<<32-ce(c)-1)).toString(32)+a,s="_"+s+"R_"+a,a=il++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=cS++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:ud,useFormState:qp,useActionState:qp,useOptimistic:function(t){var s=Nt();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=dd.bind(null,Ee,!0,a),a.dispatch=s,[t,s]},useMemoCache:td,useCacheRefresh:function(){return Nt().memoizedState=pS.bind(null,Ee)},useEffectEvent:function(t){var s=Nt(),a={impl:t};return s.memoizedState=a,function(){if((Me&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},hd={readContext:wt,use:ol,useCallback:Qp,useContext:wt,useEffect:ad,useImperativeHandle:Xp,useInsertionEffect:Wp,useLayoutEffect:Yp,useMemo:Zp,useReducer:ll,useRef:Gp,useState:function(){return ll(Yn)},useDebugValue:od,useDeferredValue:function(t,s){var a=st();return eg(a,qe.memoizedState,t,s)},useTransition:function(){var t=ll(Yn)[0],s=st().memoizedState;return[typeof t=="boolean"?t:Ca(t),s]},useSyncExternalStore:jp,useId:rg,useHostTransitionStatus:ud,useFormState:Hp,useActionState:Hp,useOptimistic:function(t,s){var a=st();return Dp(a,qe,t,s)},useMemoCache:td,useCacheRefresh:ig};hd.useEffectEvent=Fp;var ug={readContext:wt,use:ol,useCallback:Qp,useContext:wt,useEffect:ad,useImperativeHandle:Xp,useInsertionEffect:Wp,useLayoutEffect:Yp,useMemo:Zp,useReducer:sd,useRef:Gp,useState:function(){return sd(Yn)},useDebugValue:od,useDeferredValue:function(t,s){var a=st();return qe===null?ld(a,t,s):eg(a,qe.memoizedState,t,s)},useTransition:function(){var t=sd(Yn)[0],s=st().memoizedState;return[typeof t=="boolean"?t:Ca(t),s]},useSyncExternalStore:jp,useId:rg,useHostTransitionStatus:ud,useFormState:Vp,useActionState:Vp,useOptimistic:function(t,s){var a=st();return qe!==null?Dp(a,qe,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:td,useCacheRefresh:ig};ug.useEffectEvent=Fp;function fd(t,s,a,c){s=t.memoizedState,a=a(c,s),a=a==null?s:b({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var md={enqueueSetState:function(t,s,a){t=t._reactInternals;var c=Jt(),d=Cs(c);d.payload=s,a!=null&&(d.callback=a),s=ks(t,d,c),s!==null&&(Ht(s,t,c),xa(s,t,c))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var c=Jt(),d=Cs(c);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=ks(t,d,c),s!==null&&(Ht(s,t,c),xa(s,t,c))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Jt(),c=Cs(a);c.tag=2,s!=null&&(c.callback=s),s=ks(t,c,a),s!==null&&(Ht(s,t,a),xa(s,t,a))}};function dg(t,s,a,c,d,h,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,h,y):s.prototype&&s.prototype.isPureReactComponent?!ma(a,c)||!ma(d,h):!0}function hg(t,s,a,c){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==t&&md.enqueueReplaceState(s,s.state,null)}function xr(t,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(t=t.defaultProps){a===s&&(a=b({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function fg(t){$o(t)}function mg(t){console.error(t)}function pg(t){$o(t)}function hl(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function gg(t,s,a){try{var c=t.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function pd(t,s,a){return a=Cs(a),a.tag=3,a.payload={element:null},a.callback=function(){hl(t,s)},a}function yg(t){return t=Cs(t),t.tag=3,t}function vg(t,s,a,c){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var h=c.value;t.payload=function(){return d(h)},t.callback=function(){gg(s,a,c)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){gg(s,a,c),typeof d!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function yS(t,s,a,c,d){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&fi(s,a,d,!0),a=Kt.current,a!==null){switch(a.tag){case 31:case 13:return un===null?El():a.alternate===null&&tt===0&&(tt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,c===Zo?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),Bd(t,c,d)),!1;case 22:return a.flags|=65536,c===Zo?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),Bd(t,c,d)),!1}throw Error(i(435,a.tag))}return Bd(t,c,d),El(),!1}if(Ue)return s=Kt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,c!==Iu&&(t=Error(i(422),{cause:c}),ya(an(t,a)))):(c!==Iu&&(s=Error(i(423),{cause:c}),ya(an(s,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,c=an(c,a),d=pd(t.stateNode,c,d),Gu(t,d),tt!==4&&(tt=2)),!1;var h=Error(i(520),{cause:c});if(h=an(h,a),Ma===null?Ma=[h]:Ma.push(h),tt!==4&&(tt=2),s===null)return!0;c=an(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=pd(a.stateNode,c,t),Gu(a,t),!1;case 1:if(s=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Us===null||!Us.has(h))))return a.flags|=65536,d&=-d,a.lanes|=d,d=yg(d),vg(d,t,a,c),Gu(a,d),!1}a=a.return}while(a!==null);return!1}var gd=Error(i(461)),at=!1;function _t(t,s,a,c){s.child=t===null?xp(s,null,a,c):wr(s,t.child,a,c)}function bg(t,s,a,c,d){a=a.render;var h=s.ref;if("ref"in c){var y={};for(var w in c)w!=="ref"&&(y[w]=c[w])}else y=c;return gr(s),c=Xu(t,s,a,y,h,d),w=Qu(),t!==null&&!at?(Zu(t,s,d),Jn(t,s,d)):(Ue&&w&&Ru(s),s.flags|=1,_t(t,s,c,d),s.child)}function wg(t,s,a,c,d){if(t===null){var h=a.type;return typeof h=="function"&&!ju(h)&&h.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=h,_g(t,s,h,c,d)):(t=Fo(a.type,null,c,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(h=t.child,!Ed(t,d)){var y=h.memoizedProps;if(a=a.compare,a=a!==null?a:ma,a(y,c)&&t.ref===s.ref)return Jn(t,s,d)}return s.flags|=1,t=Vn(h,c),t.ref=s.ref,t.return=s,s.child=t}function _g(t,s,a,c,d){if(t!==null){var h=t.memoizedProps;if(ma(h,c)&&t.ref===s.ref)if(at=!1,s.pendingProps=c=h,Ed(t,d))(t.flags&131072)!==0&&(at=!0);else return s.lanes=t.lanes,Jn(t,s,d)}return yd(t,s,a,c,d)}function xg(t,s,a,c){var d=c.children,h=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(h=h!==null?h.baseLanes|a:a,t!==null){for(c=s.child=t.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;c=d&~h}else c=0,s.child=null;return Sg(t,s,h,a,c)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Xo(s,h!==null?h.cachePool:null),h!==null?Tp(s,h):Fu(),Cp(s);else return c=s.lanes=536870912,Sg(t,s,h!==null?h.baseLanes|a:a,a,c)}else h!==null?(Xo(s,h.cachePool),Tp(s,h),js(),s.memoizedState=null):(t!==null&&Xo(s,null),Fu(),js());return _t(t,s,d,a),s.child}function ja(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Sg(t,s,a,c,d){var h=qu();return h=h===null?null:{parent:rt._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},t!==null&&Xo(s,null),Fu(),Cp(s),t!==null&&fi(t,s,c,!0),s.childLanes=d,null}function fl(t,s){return s=pl({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Eg(t,s,a){return wr(s,t.child,null,a),t=fl(s,s.pendingProps),t.flags|=2,Ft(s),s.memoizedState=null,t}function vS(t,s,a){var c=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Ue){if(c.mode==="hidden")return t=fl(s,c),s.lanes=536870912,ja(null,t);if(Yu(s),(t=We)?(t=My(t,cn),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:_s!==null?{id:jn,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},a=op(t),a.return=s,s.child=a,bt=s,We=null)):t=null,t===null)throw Ss(s);return s.lanes=536870912,null}return fl(s,c)}var h=t.memoizedState;if(h!==null){var y=h.dehydrated;if(Yu(s),d)if(s.flags&256)s.flags&=-257,s=Eg(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(at||fi(t,s,a,!1),d=(a&t.childLanes)!==0,at||d){if(c=Ve,c!==null&&(y=mm(c,a),y!==0&&y!==h.retryLane))throw h.retryLane=y,hr(t,y),Ht(c,t,y),gd;El(),s=Eg(t,s,a)}else t=h.treeContext,We=dn(y.nextSibling),bt=s,Ue=!0,xs=null,cn=!1,t!==null&&up(s,t),s=fl(s,c),s.flags|=4096;return s}return t=Vn(t.child,{mode:c.mode,children:c.children}),t.ref=s.ref,s.child=t,t.return=s,t}function ml(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function yd(t,s,a,c,d){return gr(s),a=Xu(t,s,a,c,void 0,d),c=Qu(),t!==null&&!at?(Zu(t,s,d),Jn(t,s,d)):(Ue&&c&&Ru(s),s.flags|=1,_t(t,s,a,d),s.child)}function Tg(t,s,a,c,d,h){return gr(s),s.updateQueue=null,a=Ap(s,c,a,d),kp(t),c=Qu(),t!==null&&!at?(Zu(t,s,h),Jn(t,s,h)):(Ue&&c&&Ru(s),s.flags|=1,_t(t,s,a,h),s.child)}function Cg(t,s,a,c,d){if(gr(s),s.stateNode===null){var h=ci,y=a.contextType;typeof y=="object"&&y!==null&&(h=wt(y)),h=new a(c,h),s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=md,s.stateNode=h,h._reactInternals=s,h=s.stateNode,h.props=c,h.state=s.memoizedState,h.refs={},$u(s),y=a.contextType,h.context=typeof y=="object"&&y!==null?wt(y):ci,h.state=s.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(fd(s,a,y,c),h.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(y=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),y!==h.state&&md.enqueueReplaceState(h,h.state,null),Ea(s,c,h,d),Sa(),h.state=s.memoizedState),typeof h.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(t===null){h=s.stateNode;var w=s.memoizedProps,E=xr(a,w);h.props=E;var R=h.context,B=a.contextType;y=ci,typeof B=="object"&&B!==null&&(y=wt(B));var H=a.getDerivedStateFromProps;B=typeof H=="function"||typeof h.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,B||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(w||R!==y)&&hg(s,h,c,y),Ts=!1;var I=s.memoizedState;h.state=I,Ea(s,c,h,d),Sa(),R=s.memoizedState,w||I!==R||Ts?(typeof H=="function"&&(fd(s,a,H,c),R=s.memoizedState),(E=Ts||dg(s,a,E,c,I,R,y))?(B||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(s.flags|=4194308)):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=R),h.props=c,h.state=R,h.context=y,c=E):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{h=s.stateNode,Vu(t,s),y=s.memoizedProps,B=xr(a,y),h.props=B,H=s.pendingProps,I=h.context,R=a.contextType,E=ci,typeof R=="object"&&R!==null&&(E=wt(R)),w=a.getDerivedStateFromProps,(R=typeof w=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==H||I!==E)&&hg(s,h,c,E),Ts=!1,I=s.memoizedState,h.state=I,Ea(s,c,h,d),Sa();var L=s.memoizedState;y!==H||I!==L||Ts||t!==null&&t.dependencies!==null&&Yo(t.dependencies)?(typeof w=="function"&&(fd(s,a,w,c),L=s.memoizedState),(B=Ts||dg(s,a,B,c,I,L,E)||t!==null&&t.dependencies!==null&&Yo(t.dependencies))?(R||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(c,L,E),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(c,L,E)),typeof h.componentDidUpdate=="function"&&(s.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof h.componentDidUpdate!="function"||y===t.memoizedProps&&I===t.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&I===t.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=L),h.props=c,h.state=L,h.context=E,c=B):(typeof h.componentDidUpdate!="function"||y===t.memoizedProps&&I===t.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&I===t.memoizedState||(s.flags|=1024),c=!1)}return h=c,ml(t,s),c=(s.flags&128)!==0,h||c?(h=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:h.render(),s.flags|=1,t!==null&&c?(s.child=wr(s,t.child,null,d),s.child=wr(s,null,a,d)):_t(t,s,a,d),s.memoizedState=h.state,t=s.child):t=Jn(t,s,d),t}function kg(t,s,a,c){return mr(),s.flags|=256,_t(t,s,a,c),s.child}var vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bd(t){return{baseLanes:t,cachePool:gp()}}function wd(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Yt),t}function Ag(t,s,a){var c=s.pendingProps,d=!1,h=(s.flags&128)!==0,y;if((y=h)||(y=t!==null&&t.memoizedState===null?!1:(nt.current&2)!==0),y&&(d=!0,s.flags&=-129),y=(s.flags&32)!==0,s.flags&=-33,t===null){if(Ue){if(d?As(s):js(),(t=We)?(t=My(t,cn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:_s!==null?{id:jn,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},a=op(t),a.return=s,s.child=a,bt=s,We=null)):t=null,t===null)throw Ss(s);return nh(t)?s.lanes=32:s.lanes=536870912,null}var w=c.children;return c=c.fallback,d?(js(),d=s.mode,w=pl({mode:"hidden",children:w},d),c=fr(c,d,a,null),w.return=s,c.return=s,w.sibling=c,s.child=w,c=s.child,c.memoizedState=bd(a),c.childLanes=wd(t,y,a),s.memoizedState=vd,ja(null,c)):(As(s),_d(s,w))}var E=t.memoizedState;if(E!==null&&(w=E.dehydrated,w!==null)){if(h)s.flags&256?(As(s),s.flags&=-257,s=xd(t,s,a)):s.memoizedState!==null?(js(),s.child=t.child,s.flags|=128,s=null):(js(),w=c.fallback,d=s.mode,c=pl({mode:"visible",children:c.children},d),w=fr(w,d,a,null),w.flags|=2,c.return=s,w.return=s,c.sibling=w,s.child=c,wr(s,t.child,null,a),c=s.child,c.memoizedState=bd(a),c.childLanes=wd(t,y,a),s.memoizedState=vd,s=ja(null,c));else if(As(s),nh(w)){if(y=w.nextSibling&&w.nextSibling.dataset,y)var R=y.dgst;y=R,c=Error(i(419)),c.stack="",c.digest=y,ya({value:c,source:null,stack:null}),s=xd(t,s,a)}else if(at||fi(t,s,a,!1),y=(a&t.childLanes)!==0,at||y){if(y=Ve,y!==null&&(c=mm(y,a),c!==0&&c!==E.retryLane))throw E.retryLane=c,hr(t,c),Ht(y,t,c),gd;th(w)||El(),s=xd(t,s,a)}else th(w)?(s.flags|=192,s.child=t.child,s=null):(t=E.treeContext,We=dn(w.nextSibling),bt=s,Ue=!0,xs=null,cn=!1,t!==null&&up(s,t),s=_d(s,c.children),s.flags|=4096);return s}return d?(js(),w=c.fallback,d=s.mode,E=t.child,R=E.sibling,c=Vn(E,{mode:"hidden",children:c.children}),c.subtreeFlags=E.subtreeFlags&65011712,R!==null?w=Vn(R,w):(w=fr(w,d,a,null),w.flags|=2),w.return=s,c.return=s,c.sibling=w,s.child=c,ja(null,c),c=s.child,w=t.child.memoizedState,w===null?w=bd(a):(d=w.cachePool,d!==null?(E=rt._currentValue,d=d.parent!==E?{parent:E,pool:E}:d):d=gp(),w={baseLanes:w.baseLanes|a,cachePool:d}),c.memoizedState=w,c.childLanes=wd(t,y,a),s.memoizedState=vd,ja(t.child,c)):(As(s),a=t.child,t=a.sibling,a=Vn(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,t!==null&&(y=s.deletions,y===null?(s.deletions=[t],s.flags|=16):y.push(t)),s.child=a,s.memoizedState=null,a)}function _d(t,s){return s=pl({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function pl(t,s){return t=Gt(22,t,null,s),t.lanes=0,t}function xd(t,s,a){return wr(s,t.child,null,a),t=_d(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function jg(t,s,a){t.lanes|=s;var c=t.alternate;c!==null&&(c.lanes|=s),Pu(t.return,s,a)}function Sd(t,s,a,c,d,h){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d,treeForkCount:h}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=a,y.tailMode=d,y.treeForkCount=h)}function Ng(t,s,a){var c=s.pendingProps,d=c.revealOrder,h=c.tail;c=c.children;var y=nt.current,w=(y&2)!==0;if(w?(y=y&1|2,s.flags|=128):y&=1,Q(nt,y),_t(t,s,c,a),c=Ue?ga:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jg(t,a,s);else if(t.tag===19)jg(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=s.child,d=null;a!==null;)t=a.alternate,t!==null&&sl(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Sd(s,!1,d,a,h,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&sl(t)===null){s.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}Sd(s,!0,a,null,h,c);break;case"together":Sd(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function Jn(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Rs|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(fi(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=Vn(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=Vn(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Ed(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Yo(t)))}function bS(t,s,a){switch(s.tag){case 3:pt(s,s.stateNode.containerInfo),Es(s,rt,t.memoizedState.cache),mr();break;case 27:case 5:Cn(s);break;case 4:pt(s,s.stateNode.containerInfo);break;case 10:Es(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Yu(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(As(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Ag(t,s,a):(As(s),t=Jn(t,s,a),t!==null?t.sibling:null);As(s);break;case 19:var d=(t.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(fi(t,s,a,!1),c=(a&s.childLanes)!==0),d){if(c)return Ng(t,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Q(nt,nt.current),c)break;return null;case 22:return s.lanes=0,xg(t,s,a,s.pendingProps);case 24:Es(s,rt,t.memoizedState.cache)}return Jn(t,s,a)}function Og(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)at=!0;else{if(!Ed(t,a)&&(s.flags&128)===0)return at=!1,bS(t,s,a);at=(t.flags&131072)!==0}else at=!1,Ue&&(s.flags&1048576)!==0&&cp(s,ga,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(t=vr(s.elementType),s.type=t,typeof t=="function")ju(t)?(c=xr(t,c),s.tag=1,s=Cg(null,s,t,c,a)):(s.tag=0,s=yd(null,s,t,c,a));else{if(t!=null){var d=t.$$typeof;if(d===V){s.tag=11,s=bg(null,s,t,c,a);break e}else if(d===F){s.tag=14,s=wg(null,s,t,c,a);break e}}throw s=ke(t)||t,Error(i(306,s,""))}}return s;case 0:return yd(t,s,s.type,s.pendingProps,a);case 1:return c=s.type,d=xr(c,s.pendingProps),Cg(t,s,c,d,a);case 3:e:{if(pt(s,s.stateNode.containerInfo),t===null)throw Error(i(387));c=s.pendingProps;var h=s.memoizedState;d=h.element,Vu(t,s),Ea(s,c,null,a);var y=s.memoizedState;if(c=y.cache,Es(s,rt,c),c!==h.cache&&Lu(s,[rt],a,!0),Sa(),c=y.element,h.isDehydrated)if(h={element:c,isDehydrated:!1,cache:y.cache},s.updateQueue.baseState=h,s.memoizedState=h,s.flags&256){s=kg(t,s,c,a);break e}else if(c!==d){d=an(Error(i(424)),s),ya(d),s=kg(t,s,c,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(We=dn(t.firstChild),bt=s,Ue=!0,xs=null,cn=!0,a=xp(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(mr(),c===d){s=Jn(t,s,a);break e}_t(t,s,c,a)}s=s.child}return s;case 26:return ml(t,s),t===null?(a=Hy(s.type,null,s.pendingProps,null))?s.memoizedState=a:Ue||(a=s.type,t=s.pendingProps,c=Ol(Ae.current).createElement(a),c[vt]=s,c[Mt]=t,xt(c,a,t),gt(c),s.stateNode=c):s.memoizedState=Hy(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Cn(s),t===null&&Ue&&(c=s.stateNode=zy(s.type,s.pendingProps,Ae.current),bt=s,cn=!0,d=We,Ps(s.type)?(sh=d,We=dn(c.firstChild)):We=d),_t(t,s,s.pendingProps.children,a),ml(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Ue&&((d=c=We)&&(c=YS(c,s.type,s.pendingProps,cn),c!==null?(s.stateNode=c,bt=s,We=dn(c.firstChild),cn=!1,d=!0):d=!1),d||Ss(s)),Cn(s),d=s.type,h=s.pendingProps,y=t!==null?t.memoizedProps:null,c=h.children,Qd(d,h)?c=null:y!==null&&Qd(d,y)&&(s.flags|=32),s.memoizedState!==null&&(d=Xu(t,s,uS,null,null,a),Va._currentValue=d),ml(t,s),_t(t,s,c,a),s.child;case 6:return t===null&&Ue&&((t=a=We)&&(a=JS(a,s.pendingProps,cn),a!==null?(s.stateNode=a,bt=s,We=null,t=!0):t=!1),t||Ss(s)),null;case 13:return Ag(t,s,a);case 4:return pt(s,s.stateNode.containerInfo),c=s.pendingProps,t===null?s.child=wr(s,null,c,a):_t(t,s,c,a),s.child;case 11:return bg(t,s,s.type,s.pendingProps,a);case 7:return _t(t,s,s.pendingProps,a),s.child;case 8:return _t(t,s,s.pendingProps.children,a),s.child;case 12:return _t(t,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,Es(s,s.type,c.value),_t(t,s,c.children,a),s.child;case 9:return d=s.type._context,c=s.pendingProps.children,gr(s),d=wt(d),c=c(d),s.flags|=1,_t(t,s,c,a),s.child;case 14:return wg(t,s,s.type,s.pendingProps,a);case 15:return _g(t,s,s.type,s.pendingProps,a);case 19:return Ng(t,s,a);case 31:return vS(t,s,a);case 22:return xg(t,s,a,s.pendingProps);case 24:return gr(s),c=wt(rt),t===null?(d=qu(),d===null&&(d=Ve,h=zu(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=a),d=h),s.memoizedState={parent:c,cache:d},$u(s),Es(s,rt,d)):((t.lanes&a)!==0&&(Vu(t,s),Ea(s,null,null,a),Sa()),d=t.memoizedState,h=s.memoizedState,d.parent!==c?(d={parent:c,cache:c},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Es(s,rt,c)):(c=h.cache,Es(s,rt,c),c!==d.cache&&Lu(s,[rt],a,!0))),_t(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Xn(t){t.flags|=4}function Td(t,s,a,c,d){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(ry())t.flags|=8192;else throw br=Zo,Hu}else t.flags&=-16777217}function Rg(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Fy(s))if(ry())t.flags|=8192;else throw br=Zo,Hu}function gl(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?dm():536870912,t.lanes|=s,Ti|=s)}function Na(t,s){if(!Ue)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Ye(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,c=0;if(s)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=c,t.childLanes=a,s}function wS(t,s,a){var c=s.pendingProps;switch(Uu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(s),null;case 1:return Ye(s),null;case 3:return a=s.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Fn(rt),Pe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(hi(s)?Xn(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Du())),Ye(s),null;case 26:var d=s.type,h=s.memoizedState;return t===null?(Xn(s),h!==null?(Ye(s),Rg(s,h)):(Ye(s),Td(s,d,null,c,a))):h?h!==t.memoizedState?(Xn(s),Ye(s),Rg(s,h)):(Ye(s),s.flags&=-16777217):(t=t.memoizedProps,t!==c&&Xn(s),Ye(s),Td(s,d,t,c,a)),null;case 27:if(mn(s),a=Ae.current,d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&Xn(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Ye(s),null}t=se.current,hi(s)?dp(s):(t=zy(d,c,a),s.stateNode=t,Xn(s))}return Ye(s),null;case 5:if(mn(s),d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&Xn(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Ye(s),null}if(h=se.current,hi(s))dp(s);else{var y=Ol(Ae.current);switch(h){case 1:h=y.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=y.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=y.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof c.is=="string"?y.createElement("select",{is:c.is}):y.createElement("select"),c.multiple?h.multiple=!0:c.size&&(h.size=c.size);break;default:h=typeof c.is=="string"?y.createElement(d,{is:c.is}):y.createElement(d)}}h[vt]=s,h[Mt]=c;e:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)h.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break e;for(;y.sibling===null;){if(y.return===null||y.return===s)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=h;e:switch(xt(h,d,c),d){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Xn(s)}}return Ye(s),Td(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==c&&Xn(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(t=Ae.current,hi(s)){if(t=s.stateNode,a=s.memoizedProps,c=null,d=bt,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}t[vt]=s,t=!!(t.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Ay(t.nodeValue,a)),t||Ss(s,!0)}else t=Ol(t).createTextNode(c),t[vt]=s,s.stateNode=t}return Ye(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(c=hi(s),a!==null){if(t===null){if(!c)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[vt]=s}else mr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ye(s),t=!1}else a=Du(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Ft(s),s):(Ft(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Ye(s),null;case 13:if(c=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=hi(s),c!==null&&c.dehydrated!==null){if(t===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[vt]=s}else mr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ye(s),d=!1}else d=Du(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Ft(s),s):(Ft(s),null)}return Ft(s),(s.flags&128)!==0?(s.lanes=a,s):(a=c!==null,t=t!==null&&t.memoizedState!==null,a&&(c=s.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool),h=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(h=c.memoizedState.cachePool.pool),h!==d&&(c.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),gl(s,s.updateQueue),Ye(s),null);case 4:return Pe(),t===null&&Fd(s.stateNode.containerInfo),Ye(s),null;case 10:return Fn(s.type),Ye(s),null;case 19:if($(nt),c=s.memoizedState,c===null)return Ye(s),null;if(d=(s.flags&128)!==0,h=c.rendering,h===null)if(d)Na(c,!1);else{if(tt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(h=sl(t),h!==null){for(s.flags|=128,Na(c,!1),t=h.updateQueue,s.updateQueue=t,gl(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)ap(a,t),a=a.sibling;return Q(nt,nt.current&1|2),Ue&&Gn(s,c.treeForkCount),s.child}t=t.sibling}c.tail!==null&&Ct()>_l&&(s.flags|=128,d=!0,Na(c,!1),s.lanes=4194304)}else{if(!d)if(t=sl(h),t!==null){if(s.flags|=128,d=!0,t=t.updateQueue,s.updateQueue=t,gl(s,t),Na(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!Ue)return Ye(s),null}else 2*Ct()-c.renderingStartTime>_l&&a!==536870912&&(s.flags|=128,d=!0,Na(c,!1),s.lanes=4194304);c.isBackwards?(h.sibling=s.child,s.child=h):(t=c.last,t!==null?t.sibling=h:s.child=h,c.last=h)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Ct(),t.sibling=null,a=nt.current,Q(nt,d?a&1|2:a&1),Ue&&Gn(s,c.treeForkCount),t):(Ye(s),null);case 22:case 23:return Ft(s),Wu(),c=s.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(Ye(s),s.subtreeFlags&6&&(s.flags|=8192)):Ye(s),a=s.updateQueue,a!==null&&gl(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),t!==null&&$(yr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Fn(rt),Ye(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function _S(t,s){switch(Uu(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Fn(rt),Pe(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return mn(s),null;case 31:if(s.memoizedState!==null){if(Ft(s),s.alternate===null)throw Error(i(340));mr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Ft(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));mr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return $(nt),null;case 4:return Pe(),null;case 10:return Fn(s.type),null;case 22:case 23:return Ft(s),Wu(),t!==null&&$(yr),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Fn(rt),null;case 25:return null;default:return null}}function Ug(t,s){switch(Uu(s),s.tag){case 3:Fn(rt),Pe();break;case 26:case 27:case 5:mn(s);break;case 4:Pe();break;case 31:s.memoizedState!==null&&Ft(s);break;case 13:Ft(s);break;case 19:$(nt);break;case 10:Fn(s.type);break;case 22:case 23:Ft(s),Wu(),t!==null&&$(yr);break;case 24:Fn(rt)}}function Oa(t,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var d=c.next;a=d;do{if((a.tag&t)===t){c=void 0;var h=a.create,y=a.inst;c=h(),y.destroy=c}a=a.next}while(a!==d)}}catch(w){ze(s,s.return,w)}}function Ns(t,s,a){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var h=d.next;c=h;do{if((c.tag&t)===t){var y=c.inst,w=y.destroy;if(w!==void 0){y.destroy=void 0,d=s;var E=a,R=w;try{R()}catch(B){ze(d,E,B)}}}c=c.next}while(c!==h)}}catch(B){ze(s,s.return,B)}}function Ig(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Ep(s,a)}catch(c){ze(t,t.return,c)}}}function Dg(t,s,a){a.props=xr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(c){ze(t,s,c)}}function Ra(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof a=="function"?t.refCleanup=a(c):a.current=c}}catch(d){ze(t,s,d)}}function On(t,s){var a=t.ref,c=t.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(d){ze(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ze(t,s,d)}else a.current=null}function Mg(t){var s=t.type,a=t.memoizedProps,c=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(d){ze(t,t.return,d)}}function Cd(t,s,a){try{var c=t.stateNode;$S(c,t.type,a,s),c[Mt]=s}catch(d){ze(t,t.return,d)}}function Pg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ps(t.type)||t.tag===4}function kd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ps(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ad(t,s,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Hn));else if(c!==4&&(c===27&&Ps(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Ad(t,s,a),t=t.sibling;t!==null;)Ad(t,s,a),t=t.sibling}function yl(t,s,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(c!==4&&(c===27&&Ps(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(yl(t,s,a),t=t.sibling;t!==null;)yl(t,s,a),t=t.sibling}function Lg(t){var s=t.stateNode,a=t.memoizedProps;try{for(var c=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);xt(s,c,a),s[vt]=t,s[Mt]=a}catch(h){ze(t,t.return,h)}}var Qn=!1,ot=!1,jd=!1,zg=typeof WeakSet=="function"?WeakSet:Set,yt=null;function xS(t,s){if(t=t.containerInfo,Jd=Ll,t=Xm(t),xu(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var y=0,w=-1,E=-1,R=0,B=0,H=t,I=null;t:for(;;){for(var L;H!==a||d!==0&&H.nodeType!==3||(w=y+d),H!==h||c!==0&&H.nodeType!==3||(E=y+c),H.nodeType===3&&(y+=H.nodeValue.length),(L=H.firstChild)!==null;)I=H,H=L;for(;;){if(H===t)break t;if(I===a&&++R===d&&(w=y),I===h&&++B===c&&(E=y),(L=H.nextSibling)!==null)break;H=I,I=H.parentNode}H=L}a=w===-1||E===-1?null:{start:w,end:E}}else a=null}a=a||{start:0,end:0}}else a=null;for(Xd={focusedElem:t,selectionRange:a},Ll=!1,yt=s;yt!==null;)if(s=yt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,yt=t;else for(;yt!==null;){switch(s=yt,h=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,a=s,d=h.memoizedProps,h=h.memoizedState,c=a.stateNode;try{var re=xr(a.type,d);t=c.getSnapshotBeforeUpdate(re,h),c.__reactInternalSnapshotBeforeUpdate=t}catch(he){ze(a,a.return,he)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)eh(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":eh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,yt=t;break}yt=s.return}}function Bg(t,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:es(t,a),c&4&&Oa(5,a);break;case 1:if(es(t,a),c&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(y){ze(a,a.return,y)}else{var d=xr(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(y){ze(a,a.return,y)}}c&64&&Ig(a),c&512&&Ra(a,a.return);break;case 3:if(es(t,a),c&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Ep(t,s)}catch(y){ze(a,a.return,y)}}break;case 27:s===null&&c&4&&Lg(a);case 26:case 5:es(t,a),s===null&&c&4&&Mg(a),c&512&&Ra(a,a.return);break;case 12:es(t,a);break;case 31:es(t,a),c&4&&$g(t,a);break;case 13:es(t,a),c&4&&Vg(t,a),c&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=OS.bind(null,a),XS(t,a))));break;case 22:if(c=a.memoizedState!==null||Qn,!c){s=s!==null&&s.memoizedState!==null||ot,d=Qn;var h=ot;Qn=c,(ot=s)&&!h?ts(t,a,(a.subtreeFlags&8772)!==0):es(t,a),Qn=d,ot=h}break;case 30:break;default:es(t,a)}}function qg(t){var s=t.alternate;s!==null&&(t.alternate=null,qg(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&iu(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Qe=null,Lt=!1;function Zn(t,s,a){for(a=a.child;a!==null;)Hg(t,s,a),a=a.sibling}function Hg(t,s,a){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(le,a)}catch{}switch(a.tag){case 26:ot||On(a,s),Zn(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ot||On(a,s);var c=Qe,d=Lt;Ps(a.type)&&(Qe=a.stateNode,Lt=!1),Zn(t,s,a),qa(a.stateNode),Qe=c,Lt=d;break;case 5:ot||On(a,s);case 6:if(c=Qe,d=Lt,Qe=null,Zn(t,s,a),Qe=c,Lt=d,Qe!==null)if(Lt)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(a.stateNode)}catch(h){ze(a,s,h)}else try{Qe.removeChild(a.stateNode)}catch(h){ze(a,s,h)}break;case 18:Qe!==null&&(Lt?(t=Qe,Iy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ui(t)):Iy(Qe,a.stateNode));break;case 4:c=Qe,d=Lt,Qe=a.stateNode.containerInfo,Lt=!0,Zn(t,s,a),Qe=c,Lt=d;break;case 0:case 11:case 14:case 15:Ns(2,a,s),ot||Ns(4,a,s),Zn(t,s,a);break;case 1:ot||(On(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Dg(a,s,c)),Zn(t,s,a);break;case 21:Zn(t,s,a);break;case 22:ot=(c=ot)||a.memoizedState!==null,Zn(t,s,a),ot=c;break;default:Zn(t,s,a)}}function $g(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ui(t)}catch(a){ze(s,s.return,a)}}}function Vg(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ui(t)}catch(a){ze(s,s.return,a)}}function SS(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new zg),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new zg),s;default:throw Error(i(435,t.tag))}}function vl(t,s){var a=SS(t);s.forEach(function(c){if(!a.has(c)){a.add(c);var d=RS.bind(null,t,c);c.then(d,d)}})}function zt(t,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c],h=t,y=s,w=y;e:for(;w!==null;){switch(w.tag){case 27:if(Ps(w.type)){Qe=w.stateNode,Lt=!1;break e}break;case 5:Qe=w.stateNode,Lt=!1;break e;case 3:case 4:Qe=w.stateNode.containerInfo,Lt=!0;break e}w=w.return}if(Qe===null)throw Error(i(160));Hg(h,y,d),Qe=null,Lt=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Gg(s,t),s=s.sibling}var yn=null;function Gg(t,s){var a=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:zt(s,t),Bt(t),c&4&&(Ns(3,t,t.return),Oa(3,t),Ns(5,t,t.return));break;case 1:zt(s,t),Bt(t),c&512&&(ot||a===null||On(a,a.return)),c&64&&Qn&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var d=yn;if(zt(s,t),Bt(t),c&512&&(ot||a===null||On(a,a.return)),c&4){var h=a!==null?a.memoizedState:null;if(c=t.memoizedState,a===null)if(c===null)if(t.stateNode===null){e:{c=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":h=d.getElementsByTagName("title")[0],(!h||h[ia]||h[vt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(c),d.head.insertBefore(h,d.querySelector("head > title"))),xt(h,c,a),h[vt]=t,gt(h),c=h;break e;case"link":var y=Gy("link","href",d).get(c+(a.href||""));if(y){for(var w=0;w<y.length;w++)if(h=y[w],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(w,1);break t}}h=d.createElement(c),xt(h,c,a),d.head.appendChild(h);break;case"meta":if(y=Gy("meta","content",d).get(c+(a.content||""))){for(w=0;w<y.length;w++)if(h=y[w],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(w,1);break t}}h=d.createElement(c),xt(h,c,a),d.head.appendChild(h);break;default:throw Error(i(468,c))}h[vt]=t,gt(h),c=h}t.stateNode=c}else Ky(d,t.type,t.stateNode);else t.stateNode=Vy(d,c,t.memoizedProps);else h!==c?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,c===null?Ky(d,t.type,t.stateNode):Vy(d,c,t.memoizedProps)):c===null&&t.stateNode!==null&&Cd(t,t.memoizedProps,a.memoizedProps)}break;case 27:zt(s,t),Bt(t),c&512&&(ot||a===null||On(a,a.return)),a!==null&&c&4&&Cd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(zt(s,t),Bt(t),c&512&&(ot||a===null||On(a,a.return)),t.flags&32){d=t.stateNode;try{ni(d,"")}catch(re){ze(t,t.return,re)}}c&4&&t.stateNode!=null&&(d=t.memoizedProps,Cd(t,d,a!==null?a.memoizedProps:d)),c&1024&&(jd=!0);break;case 6:if(zt(s,t),Bt(t),c&4){if(t.stateNode===null)throw Error(i(162));c=t.memoizedProps,a=t.stateNode;try{a.nodeValue=c}catch(re){ze(t,t.return,re)}}break;case 3:if(Il=null,d=yn,yn=Rl(s.containerInfo),zt(s,t),yn=d,Bt(t),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Ui(s.containerInfo)}catch(re){ze(t,t.return,re)}jd&&(jd=!1,Kg(t));break;case 4:c=yn,yn=Rl(t.stateNode.containerInfo),zt(s,t),Bt(t),yn=c;break;case 12:zt(s,t),Bt(t);break;case 31:zt(s,t),Bt(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,vl(t,c)));break;case 13:zt(s,t),Bt(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(wl=Ct()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,vl(t,c)));break;case 22:d=t.memoizedState!==null;var E=a!==null&&a.memoizedState!==null,R=Qn,B=ot;if(Qn=R||d,ot=B||E,zt(s,t),ot=B,Qn=R,Bt(t),c&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||E||Qn||ot||Sr(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){E=a=s;try{if(h=E.stateNode,d)y=h.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{w=E.stateNode;var H=E.memoizedProps.style,I=H!=null&&H.hasOwnProperty("display")?H.display:null;w.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(re){ze(E,E.return,re)}}}else if(s.tag===6){if(a===null){E=s;try{E.stateNode.nodeValue=d?"":E.memoizedProps}catch(re){ze(E,E.return,re)}}}else if(s.tag===18){if(a===null){E=s;try{var L=E.stateNode;d?Dy(L,!0):Dy(E.stateNode,!1)}catch(re){ze(E,E.return,re)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=t.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,vl(t,a))));break;case 19:zt(s,t),Bt(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,vl(t,c)));break;case 30:break;case 21:break;default:zt(s,t),Bt(t)}}function Bt(t){var s=t.flags;if(s&2){try{for(var a,c=t.return;c!==null;){if(Pg(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,h=kd(t);yl(t,h,d);break;case 5:var y=a.stateNode;a.flags&32&&(ni(y,""),a.flags&=-33);var w=kd(t);yl(t,w,y);break;case 3:case 4:var E=a.stateNode.containerInfo,R=kd(t);Ad(t,R,E);break;default:throw Error(i(161))}}catch(B){ze(t,t.return,B)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Kg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Kg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function es(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Bg(t,s.alternate,s),s=s.sibling}function Sr(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Ns(4,s,s.return),Sr(s);break;case 1:On(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Dg(s,s.return,a),Sr(s);break;case 27:qa(s.stateNode);case 26:case 5:On(s,s.return),Sr(s);break;case 22:s.memoizedState===null&&Sr(s);break;case 30:Sr(s);break;default:Sr(s)}t=t.sibling}}function ts(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,d=t,h=s,y=h.flags;switch(h.tag){case 0:case 11:case 15:ts(d,h,a),Oa(4,h);break;case 1:if(ts(d,h,a),c=h,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(R){ze(c,c.return,R)}if(c=h,d=c.updateQueue,d!==null){var w=c.stateNode;try{var E=d.shared.hiddenCallbacks;if(E!==null)for(d.shared.hiddenCallbacks=null,d=0;d<E.length;d++)Sp(E[d],w)}catch(R){ze(c,c.return,R)}}a&&y&64&&Ig(h),Ra(h,h.return);break;case 27:Lg(h);case 26:case 5:ts(d,h,a),a&&c===null&&y&4&&Mg(h),Ra(h,h.return);break;case 12:ts(d,h,a);break;case 31:ts(d,h,a),a&&y&4&&$g(d,h);break;case 13:ts(d,h,a),a&&y&4&&Vg(d,h);break;case 22:h.memoizedState===null&&ts(d,h,a),Ra(h,h.return);break;case 30:break;default:ts(d,h,a)}s=s.sibling}}function Nd(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&va(a))}function Od(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&va(t))}function vn(t,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Fg(t,s,a,c),s=s.sibling}function Fg(t,s,a,c){var d=s.flags;switch(s.tag){case 0:case 11:case 15:vn(t,s,a,c),d&2048&&Oa(9,s);break;case 1:vn(t,s,a,c);break;case 3:vn(t,s,a,c),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&va(t)));break;case 12:if(d&2048){vn(t,s,a,c),t=s.stateNode;try{var h=s.memoizedProps,y=h.id,w=h.onPostCommit;typeof w=="function"&&w(y,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(E){ze(s,s.return,E)}}else vn(t,s,a,c);break;case 31:vn(t,s,a,c);break;case 13:vn(t,s,a,c);break;case 23:break;case 22:h=s.stateNode,y=s.alternate,s.memoizedState!==null?h._visibility&2?vn(t,s,a,c):Ua(t,s):h._visibility&2?vn(t,s,a,c):(h._visibility|=2,xi(t,s,a,c,(s.subtreeFlags&10256)!==0||!1)),d&2048&&Nd(y,s);break;case 24:vn(t,s,a,c),d&2048&&Od(s.alternate,s);break;default:vn(t,s,a,c)}}function xi(t,s,a,c,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var h=t,y=s,w=a,E=c,R=y.flags;switch(y.tag){case 0:case 11:case 15:xi(h,y,w,E,d),Oa(8,y);break;case 23:break;case 22:var B=y.stateNode;y.memoizedState!==null?B._visibility&2?xi(h,y,w,E,d):Ua(h,y):(B._visibility|=2,xi(h,y,w,E,d)),d&&R&2048&&Nd(y.alternate,y);break;case 24:xi(h,y,w,E,d),d&&R&2048&&Od(y.alternate,y);break;default:xi(h,y,w,E,d)}s=s.sibling}}function Ua(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,c=s,d=c.flags;switch(c.tag){case 22:Ua(a,c),d&2048&&Nd(c.alternate,c);break;case 24:Ua(a,c),d&2048&&Od(c.alternate,c);break;default:Ua(a,c)}s=s.sibling}}var Ia=8192;function Si(t,s,a){if(t.subtreeFlags&Ia)for(t=t.child;t!==null;)Wg(t,s,a),t=t.sibling}function Wg(t,s,a){switch(t.tag){case 26:Si(t,s,a),t.flags&Ia&&t.memoizedState!==null&&cE(a,yn,t.memoizedState,t.memoizedProps);break;case 5:Si(t,s,a);break;case 3:case 4:var c=yn;yn=Rl(t.stateNode.containerInfo),Si(t,s,a),yn=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=Ia,Ia=16777216,Si(t,s,a),Ia=c):Si(t,s,a));break;default:Si(t,s,a)}}function Yg(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Da(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];yt=c,Xg(c,t)}Yg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jg(t),t=t.sibling}function Jg(t){switch(t.tag){case 0:case 11:case 15:Da(t),t.flags&2048&&Ns(9,t,t.return);break;case 3:Da(t);break;case 12:Da(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,bl(t)):Da(t);break;default:Da(t)}}function bl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];yt=c,Xg(c,t)}Yg(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Ns(8,s,s.return),bl(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,bl(s));break;default:bl(s)}t=t.sibling}}function Xg(t,s){for(;yt!==null;){var a=yt;switch(a.tag){case 0:case 11:case 15:Ns(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:va(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,yt=c;else e:for(a=t;yt!==null;){c=yt;var d=c.sibling,h=c.return;if(qg(c),c===a){yt=null;break e}if(d!==null){d.return=h,yt=d;break e}yt=h}}}var ES={getCacheForType:function(t){var s=wt(rt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return wt(rt).controller.signal}},TS=typeof WeakMap=="function"?WeakMap:Map,Me=0,Ve=null,je=null,Oe=0,Le=0,Wt=null,Os=!1,Ei=!1,Rd=!1,ns=0,tt=0,Rs=0,Er=0,Ud=0,Yt=0,Ti=0,Ma=null,qt=null,Id=!1,wl=0,Qg=0,_l=1/0,xl=null,Us=null,ht=0,Is=null,Ci=null,ss=0,Dd=0,Md=null,Zg=null,Pa=0,Pd=null;function Jt(){return(Me&2)!==0&&Oe!==0?Oe&-Oe:z.T!==null?$d():pm()}function ey(){if(Yt===0)if((Oe&536870912)===0||Ue){var t=Yr;Yr<<=1,(Yr&3932160)===0&&(Yr=262144),Yt=t}else Yt=536870912;return t=Kt.current,t!==null&&(t.flags|=32),Yt}function Ht(t,s,a){(t===Ve&&(Le===2||Le===9)||t.cancelPendingCommit!==null)&&(ki(t,0),Ds(t,Oe,Yt,!1)),ra(t,a),((Me&2)===0||t!==Ve)&&(t===Ve&&((Me&2)===0&&(Er|=a),tt===4&&Ds(t,Oe,Yt,!1)),Rn(t))}function ty(t,s,a){if((Me&6)!==0)throw Error(i(327));var c=!a&&(s&127)===0&&(s&t.expiredLanes)===0||sa(t,s),d=c?AS(t,s):zd(t,s,!0),h=c;do{if(d===0){Ei&&!c&&Ds(t,s,0,!1);break}else{if(a=t.current.alternate,h&&!CS(a)){d=zd(t,s,!1),h=!1;continue}if(d===2){if(h=s,t.errorRecoveryDisabledLanes&h)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){s=y;e:{var w=t;d=Ma;var E=w.current.memoizedState.isDehydrated;if(E&&(ki(w,y).flags|=256),y=zd(w,y,!1),y!==2){if(Rd&&!E){w.errorRecoveryDisabledLanes|=h,Er|=h,d=4;break e}h=qt,qt=d,h!==null&&(qt===null?qt=h:qt.push.apply(qt,h))}d=y}if(h=!1,d!==2)continue}}if(d===1){ki(t,0),Ds(t,s,0,!0);break}e:{switch(c=t,h=d,h){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ds(c,s,Yt,!Os);break e;case 2:qt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=wl+300-Ct(),10<d)){if(Ds(c,s,Yt,!Os),Ro(c,0,!0)!==0)break e;ss=s,c.timeoutHandle=Ry(ny.bind(null,c,a,qt,xl,Id,s,Yt,Er,Ti,Os,h,"Throttled",-0,0),d);break e}ny(c,a,qt,xl,Id,s,Yt,Er,Ti,Os,h,null,-0,0)}}break}while(!0);Rn(t)}function ny(t,s,a,c,d,h,y,w,E,R,B,H,I,L){if(t.timeoutHandle=-1,H=s.subtreeFlags,H&8192||(H&16785408)===16785408){H={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Hn},Wg(s,h,H);var re=(h&62914560)===h?wl-Ct():(h&4194048)===h?Qg-Ct():0;if(re=uE(H,re),re!==null){ss=h,t.cancelPendingCommit=re(uy.bind(null,t,s,h,a,c,d,y,w,E,B,H,null,I,L)),Ds(t,h,y,!R);return}}uy(t,s,h,a,c,d,y,w,E)}function CS(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var d=a[c],h=d.getSnapshot;d=d.value;try{if(!Vt(h(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ds(t,s,a,c){s&=~Ud,s&=~Er,t.suspendedLanes|=s,t.pingedLanes&=~s,c&&(t.warmLanes|=s),c=t.expirationTimes;for(var d=s;0<d;){var h=31-ce(d),y=1<<h;c[h]=-1,d&=~y}a!==0&&hm(t,a,s)}function Sl(){return(Me&6)===0?(La(0),!1):!0}function Ld(){if(je!==null){if(Le===0)var t=je.return;else t=je,Kn=pr=null,ed(t),yi=null,wa=0,t=je;for(;t!==null;)Ug(t.alternate,t),t=t.return;je=null}}function ki(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,KS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ss=0,Ld(),Ve=t,je=a=Vn(t.current,null),Oe=s,Le=0,Wt=null,Os=!1,Ei=sa(t,s),Rd=!1,Ti=Yt=Ud=Er=Rs=tt=0,qt=Ma=null,Id=!1,(s&8)!==0&&(s|=s&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=s;0<c;){var d=31-ce(c),h=1<<d;s|=t[d],c&=~h}return ns=s,Vo(),a}function sy(t,s){Ee=null,z.H=Aa,s===gi||s===Qo?(s=bp(),Le=3):s===Hu?(s=bp(),Le=4):Le=s===gd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Wt=s,je===null&&(tt=1,hl(t,an(s,t.current)))}function ry(){var t=Kt.current;return t===null?!0:(Oe&4194048)===Oe?un===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?t===un:!1}function iy(){var t=z.H;return z.H=Aa,t===null?Aa:t}function ay(){var t=z.A;return z.A=ES,t}function El(){tt=4,Os||(Oe&4194048)!==Oe&&Kt.current!==null||(Ei=!0),(Rs&134217727)===0&&(Er&134217727)===0||Ve===null||Ds(Ve,Oe,Yt,!1)}function zd(t,s,a){var c=Me;Me|=2;var d=iy(),h=ay();(Ve!==t||Oe!==s)&&(xl=null,ki(t,s)),s=!1;var y=tt;e:do try{if(Le!==0&&je!==null){var w=je,E=Wt;switch(Le){case 8:Ld(),y=6;break e;case 3:case 2:case 9:case 6:Kt.current===null&&(s=!0);var R=Le;if(Le=0,Wt=null,Ai(t,w,E,R),a&&Ei){y=0;break e}break;default:R=Le,Le=0,Wt=null,Ai(t,w,E,R)}}kS(),y=tt;break}catch(B){sy(t,B)}while(!0);return s&&t.shellSuspendCounter++,Kn=pr=null,Me=c,z.H=d,z.A=h,je===null&&(Ve=null,Oe=0,Vo()),y}function kS(){for(;je!==null;)oy(je)}function AS(t,s){var a=Me;Me|=2;var c=iy(),d=ay();Ve!==t||Oe!==s?(xl=null,_l=Ct()+500,ki(t,s)):Ei=sa(t,s);e:do try{if(Le!==0&&je!==null){s=je;var h=Wt;t:switch(Le){case 1:Le=0,Wt=null,Ai(t,s,h,1);break;case 2:case 9:if(yp(h)){Le=0,Wt=null,ly(s);break}s=function(){Le!==2&&Le!==9||Ve!==t||(Le=7),Rn(t)},h.then(s,s);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:yp(h)?(Le=0,Wt=null,ly(s)):(Le=0,Wt=null,Ai(t,s,h,7));break;case 5:var y=null;switch(je.tag){case 26:y=je.memoizedState;case 5:case 27:var w=je;if(y?Fy(y):w.stateNode.complete){Le=0,Wt=null;var E=w.sibling;if(E!==null)je=E;else{var R=w.return;R!==null?(je=R,Tl(R)):je=null}break t}}Le=0,Wt=null,Ai(t,s,h,5);break;case 6:Le=0,Wt=null,Ai(t,s,h,6);break;case 8:Ld(),tt=6;break e;default:throw Error(i(462))}}jS();break}catch(B){sy(t,B)}while(!0);return Kn=pr=null,z.H=c,z.A=d,Me=a,je!==null?0:(Ve=null,Oe=0,Vo(),tt)}function jS(){for(;je!==null&&!ut();)oy(je)}function oy(t){var s=Og(t.alternate,t,ns);t.memoizedProps=t.pendingProps,s===null?Tl(t):je=s}function ly(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=Tg(a,s,s.pendingProps,s.type,void 0,Oe);break;case 11:s=Tg(a,s,s.pendingProps,s.type.render,s.ref,Oe);break;case 5:ed(s);default:Ug(a,s),s=je=ap(s,ns),s=Og(a,s,ns)}t.memoizedProps=t.pendingProps,s===null?Tl(t):je=s}function Ai(t,s,a,c){Kn=pr=null,ed(s),yi=null,wa=0;var d=s.return;try{if(yS(t,d,s,a,Oe)){tt=1,hl(t,an(a,t.current)),je=null;return}}catch(h){if(d!==null)throw je=d,h;tt=1,hl(t,an(a,t.current)),je=null;return}s.flags&32768?(Ue||c===1?t=!0:Ei||(Oe&536870912)!==0?t=!1:(Os=t=!0,(c===2||c===9||c===3||c===6)&&(c=Kt.current,c!==null&&c.tag===13&&(c.flags|=16384))),cy(s,t)):Tl(s)}function Tl(t){var s=t;do{if((s.flags&32768)!==0){cy(s,Os);return}t=s.return;var a=wS(s.alternate,s,ns);if(a!==null){je=a;return}if(s=s.sibling,s!==null){je=s;return}je=s=t}while(s!==null);tt===0&&(tt=5)}function cy(t,s){do{var a=_S(t.alternate,t);if(a!==null){a.flags&=32767,je=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){je=t;return}je=t=a}while(t!==null);tt=6,je=null}function uy(t,s,a,c,d,h,y,w,E){t.cancelPendingCommit=null;do Cl();while(ht!==0);if((Me&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(h=s.lanes|s.childLanes,h|=ku,lx(t,a,h,y,w,E),t===Ve&&(je=Ve=null,Oe=0),Ci=s,Is=t,ss=a,Dd=h,Md=d,Zg=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,US(Wr,function(){return py(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=z.T,z.T=null,d=W.p,W.p=2,y=Me,Me|=4;try{xS(t,s,a)}finally{Me=y,W.p=d,z.T=c}}ht=1,dy(),hy(),fy()}}function dy(){if(ht===1){ht=0;var t=Is,s=Ci,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var c=W.p;W.p=2;var d=Me;Me|=4;try{Gg(s,t);var h=Xd,y=Xm(t.containerInfo),w=h.focusedElem,E=h.selectionRange;if(y!==w&&w&&w.ownerDocument&&Jm(w.ownerDocument.documentElement,w)){if(E!==null&&xu(w)){var R=E.start,B=E.end;if(B===void 0&&(B=R),"selectionStart"in w)w.selectionStart=R,w.selectionEnd=Math.min(B,w.value.length);else{var H=w.ownerDocument||document,I=H&&H.defaultView||window;if(I.getSelection){var L=I.getSelection(),re=w.textContent.length,he=Math.min(E.start,re),$e=E.end===void 0?he:Math.min(E.end,re);!L.extend&&he>$e&&(y=$e,$e=he,he=y);var N=Ym(w,he),k=Ym(w,$e);if(N&&k&&(L.rangeCount!==1||L.anchorNode!==N.node||L.anchorOffset!==N.offset||L.focusNode!==k.node||L.focusOffset!==k.offset)){var O=H.createRange();O.setStart(N.node,N.offset),L.removeAllRanges(),he>$e?(L.addRange(O),L.extend(k.node,k.offset)):(O.setEnd(k.node,k.offset),L.addRange(O))}}}}for(H=[],L=w;L=L.parentNode;)L.nodeType===1&&H.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<H.length;w++){var q=H[w];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}Ll=!!Jd,Xd=Jd=null}finally{Me=d,W.p=c,z.T=a}}t.current=s,ht=2}}function hy(){if(ht===2){ht=0;var t=Is,s=Ci,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var c=W.p;W.p=2;var d=Me;Me|=4;try{Bg(t,s.alternate,s)}finally{Me=d,W.p=c,z.T=a}}ht=3}}function fy(){if(ht===4||ht===3){ht=0,Co();var t=Is,s=Ci,a=ss,c=Zg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ht=5:(ht=0,Ci=Is=null,my(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Us=null),su(a),s=s.stateNode,me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(le,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=z.T,d=W.p,W.p=2,z.T=null;try{for(var h=t.onRecoverableError,y=0;y<c.length;y++){var w=c[y];h(w.value,{componentStack:w.stack})}}finally{z.T=s,W.p=d}}(ss&3)!==0&&Cl(),Rn(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===Pd?Pa++:(Pa=0,Pd=t):Pa=0,La(0)}}function my(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,va(s)))}function Cl(){return dy(),hy(),fy(),py()}function py(){if(ht!==5)return!1;var t=Is,s=Dd;Dd=0;var a=su(ss),c=z.T,d=W.p;try{W.p=32>a?32:a,z.T=null,a=Md,Md=null;var h=Is,y=ss;if(ht=0,Ci=Is=null,ss=0,(Me&6)!==0)throw Error(i(331));var w=Me;if(Me|=4,Jg(h.current),Fg(h,h.current,y,a),Me=w,La(0,!1),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(le,h)}catch{}return!0}finally{W.p=d,z.T=c,my(t,s)}}function gy(t,s,a){s=an(a,s),s=pd(t.stateNode,s,2),t=ks(t,s,2),t!==null&&(ra(t,2),Rn(t))}function ze(t,s,a){if(t.tag===3)gy(t,t,a);else for(;s!==null;){if(s.tag===3){gy(s,t,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Us===null||!Us.has(c))){t=an(a,t),a=yg(2),c=ks(s,a,2),c!==null&&(vg(a,c,s,t),ra(c,2),Rn(c));break}}s=s.return}}function Bd(t,s,a){var c=t.pingCache;if(c===null){c=t.pingCache=new TS;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(Rd=!0,d.add(a),t=NS.bind(null,t,s,a),s.then(t,t))}function NS(t,s,a){var c=t.pingCache;c!==null&&c.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Ve===t&&(Oe&a)===a&&(tt===4||tt===3&&(Oe&62914560)===Oe&&300>Ct()-wl?(Me&2)===0&&ki(t,0):Ud|=a,Ti===Oe&&(Ti=0)),Rn(t)}function yy(t,s){s===0&&(s=dm()),t=hr(t,s),t!==null&&(ra(t,s),Rn(t))}function OS(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),yy(t,a)}function RS(t,s){var a=0;switch(t.tag){case 31:case 13:var c=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),yy(t,a)}function US(t,s){return ir(t,s)}var kl=null,ji=null,qd=!1,Al=!1,Hd=!1,Ms=0;function Rn(t){t!==ji&&t.next===null&&(ji===null?kl=ji=t:ji=ji.next=t),Al=!0,qd||(qd=!0,DS())}function La(t,s){if(!Hd&&Al){Hd=!0;do for(var a=!1,c=kl;c!==null;){if(t!==0){var d=c.pendingLanes;if(d===0)var h=0;else{var y=c.suspendedLanes,w=c.pingedLanes;h=(1<<31-ce(42|t)+1)-1,h&=d&~(y&~w),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,_y(c,h))}else h=Oe,h=Ro(c,c===Ve?h:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(h&3)===0||sa(c,h)||(a=!0,_y(c,h));c=c.next}while(a);Hd=!1}}function IS(){vy()}function vy(){Al=qd=!1;var t=0;Ms!==0&&GS()&&(t=Ms);for(var s=Ct(),a=null,c=kl;c!==null;){var d=c.next,h=by(c,s);h===0?(c.next=null,a===null?kl=d:a.next=d,d===null&&(ji=a)):(a=c,(t!==0||(h&3)!==0)&&(Al=!0)),c=d}ht!==0&&ht!==5||La(t),Ms!==0&&(Ms=0)}function by(t,s){for(var a=t.suspendedLanes,c=t.pingedLanes,d=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var y=31-ce(h),w=1<<y,E=d[y];E===-1?((w&a)===0||(w&c)!==0)&&(d[y]=ox(w,s)):E<=s&&(t.expiredLanes|=w),h&=~w}if(s=Ve,a=Oe,a=Ro(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,a===0||t===s&&(Le===2||Le===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&ar(c),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||sa(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(c!==null&&ar(c),su(a)){case 2:case 8:a=jo;break;case 32:a=Wr;break;case 268435456:a=pn;break;default:a=Wr}return c=wy.bind(null,t),a=ir(a,c),t.callbackPriority=s,t.callbackNode=a,s}return c!==null&&c!==null&&ar(c),t.callbackPriority=2,t.callbackNode=null,2}function wy(t,s){if(ht!==0&&ht!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Cl()&&t.callbackNode!==a)return null;var c=Oe;return c=Ro(t,t===Ve?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(ty(t,c,s),by(t,Ct()),t.callbackNode!=null&&t.callbackNode===a?wy.bind(null,t):null)}function _y(t,s){if(Cl())return null;ty(t,s,!0)}function DS(){FS(function(){(Me&6)!==0?ir(Ao,IS):vy()})}function $d(){if(Ms===0){var t=mi;t===0&&(t=vs,vs<<=1,(vs&261888)===0&&(vs=256)),Ms=t}return Ms}function xy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Mo(""+t)}function Sy(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function MS(t,s,a,c,d){if(s==="submit"&&a&&a.stateNode===d){var h=xy((d[Mt]||null).action),y=c.submitter;y&&(s=(s=y[Mt]||null)?xy(s.formAction):y.getAttribute("formAction"),s!==null&&(h=s,y=null));var w=new Bo("action","action",null,c,d);t.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ms!==0){var E=y?Sy(d,y):new FormData(d);cd(a,{pending:!0,data:E,method:d.method,action:h},null,E)}}else typeof h=="function"&&(w.preventDefault(),E=y?Sy(d,y):new FormData(d),cd(a,{pending:!0,data:E,method:d.method,action:h},h,E))},currentTarget:d}]})}}for(var Vd=0;Vd<Cu.length;Vd++){var Gd=Cu[Vd],PS=Gd.toLowerCase(),LS=Gd[0].toUpperCase()+Gd.slice(1);gn(PS,"on"+LS)}gn(ep,"onAnimationEnd"),gn(tp,"onAnimationIteration"),gn(np,"onAnimationStart"),gn("dblclick","onDoubleClick"),gn("focusin","onFocus"),gn("focusout","onBlur"),gn(eS,"onTransitionRun"),gn(tS,"onTransitionStart"),gn(nS,"onTransitionCancel"),gn(sp,"onTransitionEnd"),ei("onMouseEnter",["mouseout","mouseover"]),ei("onMouseLeave",["mouseout","mouseover"]),ei("onPointerEnter",["pointerout","pointerover"]),ei("onPointerLeave",["pointerout","pointerover"]),lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(za));function Ey(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var c=t[a],d=c.event;c=c.listeners;e:{var h=void 0;if(s)for(var y=c.length-1;0<=y;y--){var w=c[y],E=w.instance,R=w.currentTarget;if(w=w.listener,E!==h&&d.isPropagationStopped())break e;h=w,d.currentTarget=R;try{h(d)}catch(B){$o(B)}d.currentTarget=null,h=E}else for(y=0;y<c.length;y++){if(w=c[y],E=w.instance,R=w.currentTarget,w=w.listener,E!==h&&d.isPropagationStopped())break e;h=w,d.currentTarget=R;try{h(d)}catch(B){$o(B)}d.currentTarget=null,h=E}}}}function Ne(t,s){var a=s[ru];a===void 0&&(a=s[ru]=new Set);var c=t+"__bubble";a.has(c)||(Ty(s,t,2,!1),a.add(c))}function Kd(t,s,a){var c=0;s&&(c|=4),Ty(a,t,c,s)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Fd(t){if(!t[jl]){t[jl]=!0,vm.forEach(function(a){a!=="selectionchange"&&(zS.has(a)||Kd(a,!1,t),Kd(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[jl]||(s[jl]=!0,Kd("selectionchange",!1,s))}}function Ty(t,s,a,c){switch(e0(s)){case 2:var d=fE;break;case 8:d=mE;break;default:d=lh}a=d.bind(null,s,a,t),d=void 0,!fu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?t.addEventListener(s,a,{capture:!0,passive:d}):t.addEventListener(s,a,!0):d!==void 0?t.addEventListener(s,a,{passive:d}):t.addEventListener(s,a,!1)}function Wd(t,s,a,c,d){var h=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var y=c.tag;if(y===3||y===4){var w=c.stateNode.containerInfo;if(w===d)break;if(y===4)for(y=c.return;y!==null;){var E=y.tag;if((E===3||E===4)&&y.stateNode.containerInfo===d)return;y=y.return}for(;w!==null;){if(y=Xr(w),y===null)return;if(E=y.tag,E===5||E===6||E===26||E===27){c=h=y;continue e}w=w.parentNode}}c=c.return}Nm(function(){var R=h,B=du(a),H=[];e:{var I=rp.get(t);if(I!==void 0){var L=Bo,re=t;switch(t){case"keypress":if(Lo(a)===0)break e;case"keydown":case"keyup":L=Rx;break;case"focusin":re="focus",L=yu;break;case"focusout":re="blur",L=yu;break;case"beforeblur":case"afterblur":L=yu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=Um;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=wx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=Dx;break;case ep:case tp:case np:L=Sx;break;case sp:L=Px;break;case"scroll":case"scrollend":L=vx;break;case"wheel":L=zx;break;case"copy":case"cut":case"paste":L=Tx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=Dm;break;case"toggle":case"beforetoggle":L=qx}var he=(s&4)!==0,$e=!he&&(t==="scroll"||t==="scrollend"),N=he?I!==null?I+"Capture":null:I;he=[];for(var k=R,O;k!==null;){var q=k;if(O=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||O===null||N===null||(q=oa(k,N),q!=null&&he.push(Ba(k,q,O))),$e)break;k=k.return}0<he.length&&(I=new L(I,re,null,a,B),H.push({event:I,listeners:he}))}}if((s&7)===0){e:{if(I=t==="mouseover"||t==="pointerover",L=t==="mouseout"||t==="pointerout",I&&a!==uu&&(re=a.relatedTarget||a.fromElement)&&(Xr(re)||re[Jr]))break e;if((L||I)&&(I=B.window===B?B:(I=B.ownerDocument)?I.defaultView||I.parentWindow:window,L?(re=a.relatedTarget||a.toElement,L=R,re=re?Xr(re):null,re!==null&&($e=l(re),he=re.tag,re!==$e||he!==5&&he!==27&&he!==6)&&(re=null)):(L=null,re=R),L!==re)){if(he=Um,q="onMouseLeave",N="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(he=Dm,q="onPointerLeave",N="onPointerEnter",k="pointer"),$e=L==null?I:aa(L),O=re==null?I:aa(re),I=new he(q,k+"leave",L,a,B),I.target=$e,I.relatedTarget=O,q=null,Xr(B)===R&&(he=new he(N,k+"enter",re,a,B),he.target=O,he.relatedTarget=$e,q=he),$e=q,L&&re)t:{for(he=BS,N=L,k=re,O=0,q=N;q;q=he(q))O++;q=0;for(var ue=k;ue;ue=he(ue))q++;for(;0<O-q;)N=he(N),O--;for(;0<q-O;)k=he(k),q--;for(;O--;){if(N===k||k!==null&&N===k.alternate){he=N;break t}N=he(N),k=he(k)}he=null}else he=null;L!==null&&Cy(H,I,L,he,!1),re!==null&&$e!==null&&Cy(H,$e,re,he,!0)}}e:{if(I=R?aa(R):window,L=I.nodeName&&I.nodeName.toLowerCase(),L==="select"||L==="input"&&I.type==="file")var Ie=$m;else if(qm(I))if(Vm)Ie=Xx;else{Ie=Yx;var ie=Wx}else L=I.nodeName,!L||L.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?R&&cu(R.elementType)&&(Ie=$m):Ie=Jx;if(Ie&&(Ie=Ie(t,R))){Hm(H,Ie,a,B);break e}ie&&ie(t,I,R),t==="focusout"&&R&&I.type==="number"&&R.memoizedProps.value!=null&&lu(I,"number",I.value)}switch(ie=R?aa(R):window,t){case"focusin":(qm(ie)||ie.contentEditable==="true")&&(ai=ie,Su=R,pa=null);break;case"focusout":pa=Su=ai=null;break;case"mousedown":Eu=!0;break;case"contextmenu":case"mouseup":case"dragend":Eu=!1,Qm(H,a,B);break;case"selectionchange":if(Zx)break;case"keydown":case"keyup":Qm(H,a,B)}var Te;if(bu)e:{switch(t){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else ii?zm(t,a)&&(Re="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(Mm&&a.locale!=="ko"&&(ii||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&ii&&(Te=Om()):(ws=B,mu="value"in ws?ws.value:ws.textContent,ii=!0)),ie=Nl(R,Re),0<ie.length&&(Re=new Im(Re,t,null,a,B),H.push({event:Re,listeners:ie}),Te?Re.data=Te:(Te=Bm(a),Te!==null&&(Re.data=Te)))),(Te=$x?Vx(t,a):Gx(t,a))&&(Re=Nl(R,"onBeforeInput"),0<Re.length&&(ie=new Im("onBeforeInput","beforeinput",null,a,B),H.push({event:ie,listeners:Re}),ie.data=Te)),MS(H,t,R,a,B)}Ey(H,s)})}function Ba(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Nl(t,s){for(var a=s+"Capture",c=[];t!==null;){var d=t,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=oa(t,a),d!=null&&c.unshift(Ba(t,d,h)),d=oa(t,s),d!=null&&c.push(Ba(t,d,h))),t.tag===3)return c;t=t.return}return[]}function BS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Cy(t,s,a,c,d){for(var h=s._reactName,y=[];a!==null&&a!==c;){var w=a,E=w.alternate,R=w.stateNode;if(w=w.tag,E!==null&&E===c)break;w!==5&&w!==26&&w!==27||R===null||(E=R,d?(R=oa(a,h),R!=null&&y.unshift(Ba(a,R,E))):d||(R=oa(a,h),R!=null&&y.push(Ba(a,R,E)))),a=a.return}y.length!==0&&t.push({event:s,listeners:y})}var qS=/\r\n?/g,HS=/\u0000|\uFFFD/g;function ky(t){return(typeof t=="string"?t:""+t).replace(qS,`
`).replace(HS,"")}function Ay(t,s){return s=ky(s),ky(t)===s}function He(t,s,a,c,d,h){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||ni(t,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&ni(t,""+c);break;case"className":Io(t,"class",c);break;case"tabIndex":Io(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Io(t,a,c);break;case"style":Am(t,c,h);break;case"data":if(s!=="object"){Io(t,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(a);break}c=Mo(""+c),t.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(s!=="input"&&He(t,s,"name",d.name,d,null),He(t,s,"formEncType",d.formEncType,d,null),He(t,s,"formMethod",d.formMethod,d,null),He(t,s,"formTarget",d.formTarget,d,null)):(He(t,s,"encType",d.encType,d,null),He(t,s,"method",d.method,d,null),He(t,s,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(a);break}c=Mo(""+c),t.setAttribute(a,c);break;case"onClick":c!=null&&(t.onclick=Hn);break;case"onScroll":c!=null&&Ne("scroll",t);break;case"onScrollEnd":c!=null&&Ne("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}a=Mo(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,""+c):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":c===!0?t.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,c):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(a,c):t.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(a):t.setAttribute(a,c);break;case"popover":Ne("beforetoggle",t),Ne("toggle",t),Uo(t,"popover",c);break;case"xlinkActuate":qn(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qn(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qn(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qn(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qn(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qn(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qn(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Uo(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=gx.get(a)||a,Uo(t,a,c))}}function Yd(t,s,a,c,d,h){switch(a){case"style":Am(t,c,h);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof c=="string"?ni(t,c):(typeof c=="number"||typeof c=="bigint")&&ni(t,""+c);break;case"onScroll":c!=null&&Ne("scroll",t);break;case"onScrollEnd":c!=null&&Ne("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Hn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bm.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),h=t[Mt]||null,h=h!=null?h[a]:null,typeof h=="function"&&t.removeEventListener(s,h,d),typeof c=="function")){typeof h!="function"&&h!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,c,d);break e}a in t?t[a]=c:c===!0?t.setAttribute(a,""):Uo(t,a,c)}}}function xt(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",t),Ne("load",t);var c=!1,d=!1,h;for(h in a)if(a.hasOwnProperty(h)){var y=a[h];if(y!=null)switch(h){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:He(t,s,h,y,a,null)}}d&&He(t,s,"srcSet",a.srcSet,a,null),c&&He(t,s,"src",a.src,a,null);return;case"input":Ne("invalid",t);var w=h=y=d=null,E=null,R=null;for(c in a)if(a.hasOwnProperty(c)){var B=a[c];if(B!=null)switch(c){case"name":d=B;break;case"type":y=B;break;case"checked":E=B;break;case"defaultChecked":R=B;break;case"value":h=B;break;case"defaultValue":w=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(i(137,s));break;default:He(t,s,c,B,a,null)}}Em(t,h,w,E,R,y,d,!1);return;case"select":Ne("invalid",t),c=y=h=null;for(d in a)if(a.hasOwnProperty(d)&&(w=a[d],w!=null))switch(d){case"value":h=w;break;case"defaultValue":y=w;break;case"multiple":c=w;default:He(t,s,d,w,a,null)}s=h,a=y,t.multiple=!!c,s!=null?ti(t,!!c,s,!1):a!=null&&ti(t,!!c,a,!0);return;case"textarea":Ne("invalid",t),h=d=c=null;for(y in a)if(a.hasOwnProperty(y)&&(w=a[y],w!=null))switch(y){case"value":c=w;break;case"defaultValue":d=w;break;case"children":h=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:He(t,s,y,w,a,null)}Cm(t,c,d,h);return;case"option":for(E in a)if(a.hasOwnProperty(E)&&(c=a[E],c!=null))switch(E){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:He(t,s,E,c,a,null)}return;case"dialog":Ne("beforetoggle",t),Ne("toggle",t),Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":Ne("load",t);break;case"video":case"audio":for(c=0;c<za.length;c++)Ne(za[c],t);break;case"image":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"embed":case"source":case"link":Ne("error",t),Ne("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in a)if(a.hasOwnProperty(R)&&(c=a[R],c!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:He(t,s,R,c,a,null)}return;default:if(cu(s)){for(B in a)a.hasOwnProperty(B)&&(c=a[B],c!==void 0&&Yd(t,s,B,c,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(c=a[w],c!=null&&He(t,s,w,c,a,null))}function $S(t,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,y=null,w=null,E=null,R=null,B=null;for(L in a){var H=a[L];if(a.hasOwnProperty(L)&&H!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":E=H;default:c.hasOwnProperty(L)||He(t,s,L,null,c,H)}}for(var I in c){var L=c[I];if(H=a[I],c.hasOwnProperty(I)&&(L!=null||H!=null))switch(I){case"type":h=L;break;case"name":d=L;break;case"checked":R=L;break;case"defaultChecked":B=L;break;case"value":y=L;break;case"defaultValue":w=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(i(137,s));break;default:L!==H&&He(t,s,I,L,c,H)}}ou(t,y,w,E,R,B,h,d);return;case"select":L=y=w=I=null;for(h in a)if(E=a[h],a.hasOwnProperty(h)&&E!=null)switch(h){case"value":break;case"multiple":L=E;default:c.hasOwnProperty(h)||He(t,s,h,null,c,E)}for(d in c)if(h=c[d],E=a[d],c.hasOwnProperty(d)&&(h!=null||E!=null))switch(d){case"value":I=h;break;case"defaultValue":w=h;break;case"multiple":y=h;default:h!==E&&He(t,s,d,h,c,E)}s=w,a=y,c=L,I!=null?ti(t,!!a,I,!1):!!c!=!!a&&(s!=null?ti(t,!!a,s,!0):ti(t,!!a,a?[]:"",!1));return;case"textarea":L=I=null;for(w in a)if(d=a[w],a.hasOwnProperty(w)&&d!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:He(t,s,w,null,c,d)}for(y in c)if(d=c[y],h=a[y],c.hasOwnProperty(y)&&(d!=null||h!=null))switch(y){case"value":I=d;break;case"defaultValue":L=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==h&&He(t,s,y,d,c,h)}Tm(t,I,L);return;case"option":for(var re in a)if(I=a[re],a.hasOwnProperty(re)&&I!=null&&!c.hasOwnProperty(re))switch(re){case"selected":t.selected=!1;break;default:He(t,s,re,null,c,I)}for(E in c)if(I=c[E],L=a[E],c.hasOwnProperty(E)&&I!==L&&(I!=null||L!=null))switch(E){case"selected":t.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:He(t,s,E,I,c,L)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var he in a)I=a[he],a.hasOwnProperty(he)&&I!=null&&!c.hasOwnProperty(he)&&He(t,s,he,null,c,I);for(R in c)if(I=c[R],L=a[R],c.hasOwnProperty(R)&&I!==L&&(I!=null||L!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(137,s));break;default:He(t,s,R,I,c,L)}return;default:if(cu(s)){for(var $e in a)I=a[$e],a.hasOwnProperty($e)&&I!==void 0&&!c.hasOwnProperty($e)&&Yd(t,s,$e,void 0,c,I);for(B in c)I=c[B],L=a[B],!c.hasOwnProperty(B)||I===L||I===void 0&&L===void 0||Yd(t,s,B,I,c,L);return}}for(var N in a)I=a[N],a.hasOwnProperty(N)&&I!=null&&!c.hasOwnProperty(N)&&He(t,s,N,null,c,I);for(H in c)I=c[H],L=a[H],!c.hasOwnProperty(H)||I===L||I==null&&L==null||He(t,s,H,I,c,L)}function jy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function VS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var d=a[c],h=d.transferSize,y=d.initiatorType,w=d.duration;if(h&&w&&jy(y)){for(y=0,w=d.responseEnd,c+=1;c<a.length;c++){var E=a[c],R=E.startTime;if(R>w)break;var B=E.transferSize,H=E.initiatorType;B&&jy(H)&&(E=E.responseEnd,y+=B*(E<w?1:(w-R)/(E-R)))}if(--c,s+=8*(h+y)/(d.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Jd=null,Xd=null;function Ol(t){return t.nodeType===9?t:t.ownerDocument}function Ny(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Oy(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Qd(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Zd=null;function GS(){var t=window.event;return t&&t.type==="popstate"?t===Zd?!1:(Zd=t,!0):(Zd=null,!1)}var Ry=typeof setTimeout=="function"?setTimeout:void 0,KS=typeof clearTimeout=="function"?clearTimeout:void 0,Uy=typeof Promise=="function"?Promise:void 0,FS=typeof queueMicrotask=="function"?queueMicrotask:typeof Uy<"u"?function(t){return Uy.resolve(null).then(t).catch(WS)}:Ry;function WS(t){setTimeout(function(){throw t})}function Ps(t){return t==="head"}function Iy(t,s){var a=s,c=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(c===0){t.removeChild(d),Ui(s);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")qa(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,qa(a);for(var h=a.firstChild;h;){var y=h.nextSibling,w=h.nodeName;h[ia]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&h.rel.toLowerCase()==="stylesheet"||a.removeChild(h),h=y}}else a==="body"&&qa(t.ownerDocument.body);a=d}while(a);Ui(s)}function Dy(t,s){var a=t;t=0;do{var c=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=c}while(a)}function eh(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":eh(a),iu(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function YS(t,s,a,c){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[ia])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=dn(t.nextSibling),t===null)break}return null}function JS(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=dn(t.nextSibling),t===null))return null;return t}function My(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=dn(t.nextSibling),t===null))return null;return t}function th(t){return t.data==="$?"||t.data==="$~"}function nh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function XS(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function dn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var sh=null;function Py(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return dn(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function Ly(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function zy(t,s,a){switch(s=Ol(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function qa(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);iu(t)}var hn=new Map,By=new Set;function Rl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var rs=W.d;W.d={f:QS,r:ZS,D:eE,C:tE,L:nE,m:sE,X:iE,S:rE,M:aE};function QS(){var t=rs.f(),s=Sl();return t||s}function ZS(t){var s=Qr(t);s!==null&&s.tag===5&&s.type==="form"?sg(s):rs.r(t)}var Ni=typeof document>"u"?null:document;function qy(t,s,a){var c=Ni;if(c&&typeof s=="string"&&s){var d=sn(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),By.has(d)||(By.add(d),t={rel:t,crossOrigin:a,href:s},c.querySelector(d)===null&&(s=c.createElement("link"),xt(s,"link",t),gt(s),c.head.appendChild(s)))}}function eE(t){rs.D(t),qy("dns-prefetch",t,null)}function tE(t,s){rs.C(t,s),qy("preconnect",t,s)}function nE(t,s,a){rs.L(t,s,a);var c=Ni;if(c&&t&&s){var d='link[rel="preload"][as="'+sn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+sn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+sn(a.imageSizes)+'"]')):d+='[href="'+sn(t)+'"]';var h=d;switch(s){case"style":h=Oi(t);break;case"script":h=Ri(t)}hn.has(h)||(t=b({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),hn.set(h,t),c.querySelector(d)!==null||s==="style"&&c.querySelector(Ha(h))||s==="script"&&c.querySelector($a(h))||(s=c.createElement("link"),xt(s,"link",t),gt(s),c.head.appendChild(s)))}}function sE(t,s){rs.m(t,s);var a=Ni;if(a&&t){var c=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+sn(c)+'"][href="'+sn(t)+'"]',h=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Ri(t)}if(!hn.has(h)&&(t=b({rel:"modulepreload",href:t},s),hn.set(h,t),a.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($a(h)))return}c=a.createElement("link"),xt(c,"link",t),gt(c),a.head.appendChild(c)}}}function rE(t,s,a){rs.S(t,s,a);var c=Ni;if(c&&t){var d=Zr(c).hoistableStyles,h=Oi(t);s=s||"default";var y=d.get(h);if(!y){var w={loading:0,preload:null};if(y=c.querySelector(Ha(h)))w.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":s},a),(a=hn.get(h))&&rh(t,a);var E=y=c.createElement("link");gt(E),xt(E,"link",t),E._p=new Promise(function(R,B){E.onload=R,E.onerror=B}),E.addEventListener("load",function(){w.loading|=1}),E.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ul(y,s,c)}y={type:"stylesheet",instance:y,count:1,state:w},d.set(h,y)}}}function iE(t,s){rs.X(t,s);var a=Ni;if(a&&t){var c=Zr(a).hoistableScripts,d=Ri(t),h=c.get(d);h||(h=a.querySelector($a(d)),h||(t=b({src:t,async:!0},s),(s=hn.get(d))&&ih(t,s),h=a.createElement("script"),gt(h),xt(h,"link",t),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},c.set(d,h))}}function aE(t,s){rs.M(t,s);var a=Ni;if(a&&t){var c=Zr(a).hoistableScripts,d=Ri(t),h=c.get(d);h||(h=a.querySelector($a(d)),h||(t=b({src:t,async:!0,type:"module"},s),(s=hn.get(d))&&ih(t,s),h=a.createElement("script"),gt(h),xt(h,"link",t),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},c.set(d,h))}}function Hy(t,s,a,c){var d=(d=Ae.current)?Rl(d):null;if(!d)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Oi(a.href),a=Zr(d).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Oi(a.href);var h=Zr(d).hoistableStyles,y=h.get(t);if(y||(d=d.ownerDocument||d,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,y),(h=d.querySelector(Ha(t)))&&!h._p&&(y.instance=h,y.state.loading=5),hn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},hn.set(t,a),h||oE(d,t,a,y.state))),s&&c===null)throw Error(i(528,""));return y}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ri(a),a=Zr(d).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Oi(t){return'href="'+sn(t)+'"'}function Ha(t){return'link[rel="stylesheet"]['+t+"]"}function $y(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function oE(t,s,a,c){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=t.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),xt(s,"link",a),gt(s),t.head.appendChild(s))}function Ri(t){return'[src="'+sn(t)+'"]'}function $a(t){return"script[async]"+t}function Vy(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=t.querySelector('style[data-href~="'+sn(a.href)+'"]');if(c)return s.instance=c,gt(c),c;var d=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),gt(c),xt(c,"style",d),Ul(c,a.precedence,t),s.instance=c;case"stylesheet":d=Oi(a.href);var h=t.querySelector(Ha(d));if(h)return s.state.loading|=4,s.instance=h,gt(h),h;c=$y(a),(d=hn.get(d))&&rh(c,d),h=(t.ownerDocument||t).createElement("link"),gt(h);var y=h;return y._p=new Promise(function(w,E){y.onload=w,y.onerror=E}),xt(h,"link",c),s.state.loading|=4,Ul(h,a.precedence,t),s.instance=h;case"script":return h=Ri(a.src),(d=t.querySelector($a(h)))?(s.instance=d,gt(d),d):(c=a,(d=hn.get(h))&&(c=b({},a),ih(c,d)),t=t.ownerDocument||t,d=t.createElement("script"),gt(d),xt(d,"link",c),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Ul(c,a.precedence,t));return s.instance}function Ul(t,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,h=d,y=0;y<c.length;y++){var w=c[y];if(w.dataset.precedence===s)h=w;else if(h!==d)break}h?h.parentNode.insertBefore(t,h.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function rh(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function ih(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Il=null;function Gy(t,s,a){if(Il===null){var c=new Map,d=Il=new Map;d.set(a,c)}else d=Il,c=d.get(a),c||(c=new Map,d.set(a,c));if(c.has(t))return c;for(c.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var h=a[d];if(!(h[ia]||h[vt]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var y=h.getAttribute(s)||"";y=t+y;var w=c.get(y);w?w.push(h):c.set(y,[h])}}return c}function Ky(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function lE(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Fy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function cE(t,s,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Oi(c.href),h=s.querySelector(Ha(d));if(h){s=h._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Dl.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=h,gt(h);return}h=s.ownerDocument||s,c=$y(c),(d=hn.get(d))&&rh(c,d),h=h.createElement("link"),gt(h);var y=h;y._p=new Promise(function(w,E){y.onload=w,y.onerror=E}),xt(h,"link",c),a.instance=h}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Dl.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var ah=0;function uE(t,s){return t.stylesheets&&t.count===0&&Pl(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var c=setTimeout(function(){if(t.stylesheets&&Pl(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4+s);0<t.imgBytes&&ah===0&&(ah=62500*VS());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Pl(t,t.stylesheets),t.unsuspend)){var h=t.unsuspend;t.unsuspend=null,h()}},(t.imgBytes>ah?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(d)}}:null}function Dl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ml=null;function Pl(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ml=new Map,s.forEach(dE,t),Ml=null,Dl.call(t))}function dE(t,s){if(!(s.state.loading&4)){var a=Ml.get(t);if(a)var c=a.get(null);else{a=new Map,Ml.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var y=d[h];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),c=y)}c&&a.set(null,c)}d=s.instance,y=d.getAttribute("data-precedence"),h=a.get(y)||c,h===c&&a.set(null,d),a.set(y,d),this.count++,c=Dl.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),h?h.parentNode.insertBefore(d,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var Va={$$typeof:M,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function hE(t,s,a,c,d,h,y,w,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tu(0),this.hiddenUpdates=tu(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Wy(t,s,a,c,d,h,y,w,E,R,B,H){return t=new hE(t,s,a,y,E,R,B,H,w),s=1,h===!0&&(s|=24),h=Gt(3,null,null,s),t.current=h,h.stateNode=t,s=zu(),s.refCount++,t.pooledCache=s,s.refCount++,h.memoizedState={element:c,isDehydrated:a,cache:s},$u(h),t}function Yy(t){return t?(t=ci,t):ci}function Jy(t,s,a,c,d,h){d=Yy(d),c.context===null?c.context=d:c.pendingContext=d,c=Cs(s),c.payload={element:a},h=h===void 0?null:h,h!==null&&(c.callback=h),a=ks(t,c,s),a!==null&&(Ht(a,t,s),xa(a,t,s))}function Xy(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function oh(t,s){Xy(t,s),(t=t.alternate)&&Xy(t,s)}function Qy(t){if(t.tag===13||t.tag===31){var s=hr(t,67108864);s!==null&&Ht(s,t,67108864),oh(t,67108864)}}function Zy(t){if(t.tag===13||t.tag===31){var s=Jt();s=nu(s);var a=hr(t,s);a!==null&&Ht(a,t,s),oh(t,s)}}var Ll=!0;function fE(t,s,a,c){var d=z.T;z.T=null;var h=W.p;try{W.p=2,lh(t,s,a,c)}finally{W.p=h,z.T=d}}function mE(t,s,a,c){var d=z.T;z.T=null;var h=W.p;try{W.p=8,lh(t,s,a,c)}finally{W.p=h,z.T=d}}function lh(t,s,a,c){if(Ll){var d=ch(c);if(d===null)Wd(t,s,c,zl,a),t0(t,c);else if(gE(d,t,s,a,c))c.stopPropagation();else if(t0(t,c),s&4&&-1<pE.indexOf(t)){for(;d!==null;){var h=Qr(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var y=or(h.pendingLanes);if(y!==0){var w=h;for(w.pendingLanes|=2,w.entangledLanes|=2;y;){var E=1<<31-ce(y);w.entanglements[1]|=E,y&=~E}Rn(h),(Me&6)===0&&(_l=Ct()+500,La(0))}}break;case 31:case 13:w=hr(h,2),w!==null&&Ht(w,h,2),Sl(),oh(h,2)}if(h=ch(c),h===null&&Wd(t,s,c,zl,a),h===d)break;d=h}d!==null&&c.stopPropagation()}else Wd(t,s,c,null,a)}}function ch(t){return t=du(t),uh(t)}var zl=null;function uh(t){if(zl=null,t=Xr(t),t!==null){var s=l(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=u(s),t!==null)return t;t=null}else if(a===31){if(t=m(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return zl=t,null}function e0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ko()){case Ao:return 2;case jo:return 8;case Wr:case eu:return 32;case pn:return 268435456;default:return 32}default:return 32}}var dh=!1,Ls=null,zs=null,Bs=null,Ga=new Map,Ka=new Map,qs=[],pE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function t0(t,s){switch(t){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":Ga.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(s.pointerId)}}function Fa(t,s,a,c,d,h){return t===null||t.nativeEvent!==h?(t={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:h,targetContainers:[d]},s!==null&&(s=Qr(s),s!==null&&Qy(s)),t):(t.eventSystemFlags|=c,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function gE(t,s,a,c,d){switch(s){case"focusin":return Ls=Fa(Ls,t,s,a,c,d),!0;case"dragenter":return zs=Fa(zs,t,s,a,c,d),!0;case"mouseover":return Bs=Fa(Bs,t,s,a,c,d),!0;case"pointerover":var h=d.pointerId;return Ga.set(h,Fa(Ga.get(h)||null,t,s,a,c,d)),!0;case"gotpointercapture":return h=d.pointerId,Ka.set(h,Fa(Ka.get(h)||null,t,s,a,c,d)),!0}return!1}function n0(t){var s=Xr(t.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){t.blockedOn=s,gm(t.priority,function(){Zy(a)});return}}else if(s===31){if(s=m(a),s!==null){t.blockedOn=s,gm(t.priority,function(){Zy(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bl(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=ch(t.nativeEvent);if(a===null){a=t.nativeEvent;var c=new a.constructor(a.type,a);uu=c,a.target.dispatchEvent(c),uu=null}else return s=Qr(a),s!==null&&Qy(s),t.blockedOn=a,!1;s.shift()}return!0}function s0(t,s,a){Bl(t)&&a.delete(s)}function yE(){dh=!1,Ls!==null&&Bl(Ls)&&(Ls=null),zs!==null&&Bl(zs)&&(zs=null),Bs!==null&&Bl(Bs)&&(Bs=null),Ga.forEach(s0),Ka.forEach(s0)}function ql(t,s){t.blockedOn===s&&(t.blockedOn=null,dh||(dh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,yE)))}var Hl=null;function r0(t){Hl!==t&&(Hl=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Hl===t&&(Hl=null);for(var s=0;s<t.length;s+=3){var a=t[s],c=t[s+1],d=t[s+2];if(typeof c!="function"){if(uh(c||a)===null)continue;break}var h=Qr(a);h!==null&&(t.splice(s,3),s-=3,cd(h,{pending:!0,data:d,method:a.method,action:c},c,d))}}))}function Ui(t){function s(E){return ql(E,t)}Ls!==null&&ql(Ls,t),zs!==null&&ql(zs,t),Bs!==null&&ql(Bs,t),Ga.forEach(s),Ka.forEach(s);for(var a=0;a<qs.length;a++){var c=qs[a];c.blockedOn===t&&(c.blockedOn=null)}for(;0<qs.length&&(a=qs[0],a.blockedOn===null);)n0(a),a.blockedOn===null&&qs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var d=a[c],h=a[c+1],y=d[Mt]||null;if(typeof h=="function")y||r0(a);else if(y){var w=null;if(h&&h.hasAttribute("formAction")){if(d=h,y=h[Mt]||null)w=y.formAction;else if(uh(d)!==null)continue}else w=y.action;typeof w=="function"?a[c+1]=w:(a.splice(c,3),c-=3),r0(a)}}}function i0(){function t(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(y){return d=y})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function hh(t){this._internalRoot=t}$l.prototype.render=hh.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,c=Jt();Jy(a,c,t,s,null,null)},$l.prototype.unmount=hh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Jy(t.current,2,null,t,null,null),Sl(),s[Jr]=null}};function $l(t){this._internalRoot=t}$l.prototype.unstable_scheduleHydration=function(t){if(t){var s=pm();t={blockedOn:null,target:t,priority:s};for(var a=0;a<qs.length&&s!==0&&s<qs[a].priority;a++);qs.splice(a,0,t),a===0&&n0(t)}};var a0=e.version;if(a0!=="19.2.3")throw Error(i(527,a0,"19.2.3"));W.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(s),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var vE={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{le=Vl.inject(vE),me=Vl}catch{}}return Ya.createRoot=function(t,s){if(!o(t))throw Error(i(299));var a=!1,c="",d=fg,h=mg,y=pg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(h=s.onCaughtError),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),s=Wy(t,1,!1,null,null,a,c,null,d,h,y,i0),t[Jr]=s.current,Fd(t),new hh(s)},Ya.hydrateRoot=function(t,s,a){if(!o(t))throw Error(i(299));var c=!1,d="",h=fg,y=mg,w=pg,E=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(E=a.formState)),s=Wy(t,1,!0,s,a??null,c,d,E,h,y,w,i0),s.context=Yy(null),a=s.current,c=Jt(),c=nu(c),d=Cs(c),d.callback=null,ks(a,d,c),a=c,s.current.lanes=a,ra(s,a),Rn(s),t[Jr]=s.current,Fd(t),new $l(s)},Ya.version="19.2.3",Ya}var g0;function OE(){if(g0)return ph.exports;g0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ph.exports=NE(),ph.exports}var RE=OE();const UE=If(RE);var Lr,IE=(Lr=class extends Error{constructor(n){super(new.target.formatMessage(new.target.kind,n.message,n.code,n.docsUrl),{cause:n.cause});is(this,"clerkError",!0);is(this,"code");is(this,"longMessage");is(this,"docsUrl");is(this,"cause");Object.setPrototypeOf(this,Lr.prototype),this.code=n.code,this.docsUrl=n.docsUrl,this.longMessage=n.longMessage,this.cause=n.cause}get name(){return this.constructor.name}toString(){return`[${this.name}]
Message:${this.message}`}static formatMessage(n,i,o,l){const u="Clerk:",m=new RegExp(u.replace(" ","\\s*"),"i");return i=i.replace(m,""),i=`${u} ${i.trim()}

(code="${o}")

`,l&&(i+=`

Docs: ${l}`),i}},is(Lr,"kind","ClerkError"),Lr);const DE=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function Qv({packageName:r,customMessages:e}){let n=r;function i(l,u){if(!u)return`${n}: ${l}`;let m=l;const p=l.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const g of p){const v=(u[g[1]]||"").toString();m=m.replace(`{{${g[1]}}}`,v)}return`${n}: ${m}`}const o={...DE,...e};return{setPackageName({packageName:l}){return typeof l=="string"&&(n=l),this},setMessages({customMessages:l}){return Object.assign(o,l||{}),this},throwInvalidPublishableKeyError(l){throw new Error(i(o.InvalidPublishableKeyErrorMessage,l))},throwInvalidProxyUrl(l){throw new Error(i(o.InvalidProxyUrlErrorMessage,l))},throwMissingPublishableKeyError(){throw new Error(i(o.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(i(o.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(l){throw new Error(i(o.MissingClerkProvider,l))},throw(l){throw new Error(i(l))}}}var zr,Xh=(zr=class extends IE{constructor(n,i){super({...i,message:n});is(this,"clerkRuntimeError",!0);Object.setPrototypeOf(this,zr.prototype)}},is(zr,"kind","ClerkRuntimeError"),zr);const ME=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],Zv=r=>typeof atob<"u"&&typeof atob=="function"?atob(r):typeof global<"u"&&global.Buffer?new global.Buffer(r,"base64").toString():r,eb="pk_live_",PE="pk_test_";function tb(r){if(!r.endsWith("$"))return!1;const e=r.slice(0,-1);return e.includes("$")?!1:e.includes(".")}function y0(r,e={}){if(r=r||"",!r||!Qh(r)){if(e.fatal&&!r)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(e.fatal&&!Qh(r))throw new Error("Publishable key not valid.");return null}const n=r.startsWith(eb)?"production":"development";let i;try{i=Zv(r.split("_")[2])}catch{if(e.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!tb(i)){if(e.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let o=i.slice(0,-1);return e.proxyUrl?o=e.proxyUrl:n!=="development"&&e.domain&&e.isSatellite&&(o=`clerk.${e.domain}`),{instanceType:n,frontendApi:o}}function Qh(r=""){try{if(!(r.startsWith(eb)||r.startsWith(PE)))return!1;const e=r.split("_");if(e.length!==3)return!1;const n=e[2];return n?tb(Zv(n)):!1}catch{return!1}}function LE(){const r=new Map;return{isDevOrStagingUrl:e=>{if(!e)return!1;const n=typeof e=="string"?e:e.hostname;let i=r.get(n);return i===void 0&&(i=ME.some(o=>n.endsWith(o)),r.set(n,i)),i}}}const zE="METHOD_CALLED",BE=.1;function qE(r,e){return{event:zE,eventSamplingRate:BE,payload:{method:r,...e}}}var bh={exports:{}},wh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function HE(){if(v0)return wh;v0=1;var r=Dc();function e(b,_){return b===_&&(b!==0||1/b===1/_)||b!==b&&_!==_}var n=typeof Object.is=="function"?Object.is:e,i=r.useState,o=r.useEffect,l=r.useLayoutEffect,u=r.useDebugValue;function m(b,_){var x=_(),S=i({inst:{value:x,getSnapshot:_}}),T=S[0].inst,C=S[1];return l(function(){T.value=x,T.getSnapshot=_,p(T)&&C({inst:T})},[b,x,_]),o(function(){return p(T)&&C({inst:T}),b(function(){p(T)&&C({inst:T})})},[b]),u(x),x}function p(b){var _=b.getSnapshot;b=b.value;try{var x=_();return!n(b,x)}catch{return!0}}function g(b,_){return _()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:m;return wh.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:v,wh}var b0;function $E(){return b0||(b0=1,bh.exports=HE()),bh.exports}$E();const VE=0,GE=1,KE=2;var w0=Object.prototype.hasOwnProperty;function Zh(r,e){var n,i;if(r===e)return!0;if(r&&e&&(n=r.constructor)===e.constructor){if(n===Date)return r.getTime()===e.getTime();if(n===RegExp)return r.toString()===e.toString();if(n===Array){if((i=r.length)===e.length)for(;i--&&Zh(r[i],e[i]););return i===-1}if(!n||typeof r=="object"){i=0;for(n in r)if(w0.call(r,n)&&++i&&!w0.call(e,n)||!(n in e)||!Zh(r[n],e[n]))return!1;return Object.keys(e).length===i}}return r!==r&&e!==e}const Fs=new WeakMap,tr=()=>{},Qt=tr(),pc=Object,Sn=r=>r===Qt,Ws=r=>typeof r=="function",Br=(r,e)=>({...r,...e}),FE=r=>Ws(r.then),_h={},Gl={},nb="undefined",Mc=typeof window!=nb,ef=typeof document!=nb,WE=Mc&&"Deno"in window,YE=(r,e)=>{const n=Fs.get(r);return[()=>!Sn(e)&&r.get(e)||_h,i=>{if(!Sn(e)){const o=r.get(e);e in Gl||(Gl[e]=o),n[5](e,Br(o,i),o||_h)}},n[6],()=>!Sn(e)&&e in Gl?Gl[e]:!Sn(e)&&r.get(e)||_h]};let tf=!0;const JE=()=>tf,[nf,sf]=Mc&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[tr,tr],XE=()=>{const r=ef&&document.visibilityState;return Sn(r)||r!=="hidden"},QE=r=>(ef&&document.addEventListener("visibilitychange",r),nf("focus",r),()=>{ef&&document.removeEventListener("visibilitychange",r),sf("focus",r)}),ZE=r=>{const e=()=>{tf=!0,r()},n=()=>{tf=!1};return nf("online",e),nf("offline",n),()=>{sf("online",e),sf("offline",n)}},eT={isOnline:JE,isVisible:XE},tT={initFocus:QE,initReconnect:ZE};P.useId;const Df=!Mc||WE,nT=Df?D.useEffect:D.useLayoutEffect,xh=typeof navigator<"u"&&navigator.connection,_0=!Df&&xh&&(["slow-2g","2g"].includes(xh.effectiveType)||xh.saveData),Kl=new WeakMap,sT=r=>pc.prototype.toString.call(r),Sh=(r,e)=>r===`[object ${e}]`;let rT=0;const rf=r=>{const e=typeof r,n=sT(r),i=Sh(n,"Date"),o=Sh(n,"RegExp"),l=Sh(n,"Object");let u,m;if(pc(r)===r&&!i&&!o){if(u=Kl.get(r),u)return u;if(u=++rT+"~",Kl.set(r,u),Array.isArray(r)){for(u="@",m=0;m<r.length;m++)u+=rf(r[m])+",";Kl.set(r,u)}if(l){u="#";const p=pc.keys(r).sort();for(;!Sn(m=p.pop());)Sn(r[m])||(u+=m+":"+rf(r[m])+",");Kl.set(r,u)}}else u=i?r.toJSON():e=="symbol"?r.toString():e=="string"?JSON.stringify(r):""+r;return u},sb=r=>{if(Ws(r))try{r=r()}catch{r=""}const e=r;return r=typeof r=="string"?r:(Array.isArray(r)?r.length:r)?rf(r):"",[r,e]};let iT=0;const x0=()=>++iT;async function aT(...r){const[e,n,i,o]=r,l=Br({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let u=l.populateCache;const m=l.rollbackOnError;let p=l.optimisticData;const g=_=>typeof m=="function"?m(_):m!==!1,v=l.throwOnError;if(Ws(n)){const _=n,x=[],S=e.keys();for(const T of S)!/^\$(inf|sub)\$/.test(T)&&_(e.get(T)._k)&&x.push(T);return Promise.all(x.map(b))}return b(n);async function b(_){const[x]=sb(_);if(!x)return;const[S,T]=YE(e,x),[C,j,U,M]=Fs.get(e),V=()=>{const ke=C[x];return(Ws(l.revalidate)?l.revalidate(S().data,_):l.revalidate!==!1)&&(delete U[x],delete M[x],ke&&ke[0])?ke[0](KE).then(()=>S().data):S().data};if(r.length<3)return V();let G=i,Y,F=!1;const ye=x0();j[x]=[ye,0];const X=!Sn(p),be=S(),fe=be.data,Ce=be._c,de=Sn(Ce)?fe:Ce;if(X&&(p=Ws(p)?p(de,fe):p,T({data:p,_c:de})),Ws(G))try{G=G(de)}catch(ke){Y=ke,F=!0}if(G&&FE(G))if(G=await G.catch(ke=>{Y=ke,F=!0}),ye!==j[x][0]){if(F)throw Y;return G}else F&&X&&g(Y)&&(u=!0,T({data:de,_c:Qt}));if(u&&!F)if(Ws(u)){const ke=u(G,de);T({data:ke,error:Qt,_c:Qt})}else T({data:G,error:Qt,_c:Qt});if(j[x][1]=x0(),Promise.resolve(V()).then(()=>{T({_c:Qt})}),F){if(v)throw Y;return}return G}}const S0=(r,e)=>{for(const n in r)r[n][0]&&r[n][0](e)},rb=(r,e)=>{if(!Fs.has(r)){const n=Br(tT,e),i=Object.create(null),o=aT.bind(Qt,r);let l=tr;const u=Object.create(null),m=(v,b)=>{const _=u[v]||[];return u[v]=_,_.push(b),()=>_.splice(_.indexOf(b),1)},p=(v,b,_)=>{r.set(v,b);const x=u[v];if(x)for(const S of x)S(b,_)},g=()=>{if(!Fs.has(r)&&(Fs.set(r,[i,Object.create(null),Object.create(null),Object.create(null),o,p,m]),!Df)){const v=n.initFocus(setTimeout.bind(Qt,S0.bind(Qt,i,VE))),b=n.initReconnect(setTimeout.bind(Qt,S0.bind(Qt,i,GE)));l=()=>{v&&v(),b&&b(),Fs.delete(r)}}};return g(),[r,o,g,l]}return[r,Fs.get(r)[4]]},oT=(r,e,n,i,o)=>{const l=n.errorRetryCount,u=o.retryCount,m=~~((Math.random()+.5)*(1<<(u<8?u:8)))*n.errorRetryInterval;!Sn(l)&&u>l||setTimeout(i,m,o)},lT=Zh,[Mf,cT]=rb(new Map),uT=Br({onLoadingSlow:tr,onSuccess:tr,onError:tr,onErrorRetry:oT,onDiscarded:tr,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:_0?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:_0?5e3:3e3,compare:lT,isPaused:()=>!1,cache:Mf,mutate:cT,fallback:{}},eT),dT=(r,e)=>{const n=Br(r,e);if(e){const{use:i,fallback:o}=r,{use:l,fallback:u}=e;i&&l&&(n.use=i.concat(l)),o&&u&&(n.fallback=Br(o,u))}return n},E0=D.createContext({}),hT=r=>{const{value:e}=r,n=D.useContext(E0),i=Ws(e),o=D.useMemo(()=>i?e(n):e,[i,n,e]),l=D.useMemo(()=>i?o:dT(n,o),[i,n,o]),u=o&&o.provider,m=D.useRef(Qt);u&&!m.current&&(m.current=rb(u(l.cache||Mf),o));const p=m.current;return p&&(l.cache=p[0],l.mutate=p[1]),nT(()=>{if(p)return p[2]&&p[2](),p[3]},[]),D.createElement(E0.Provider,Br(r,{value:l}))},fT="$inf$",ib=Mc&&window.__SWR_DEVTOOLS_USE__,mT=ib?window.__SWR_DEVTOOLS_USE__:[],pT=()=>{ib&&(window.__SWR_DEVTOOLS_REACT__=P)},gT=r=>(e,n,i)=>r(e,n&&((...l)=>{const[u]=sb(e),[,,,m]=Fs.get(Mf);if(u.startsWith(fT))return n(...l);const p=m[u];return Sn(p)?n(...l):(delete m[u],p)}),i);mT.concat(gT);pT();P.use;const yT=pc.defineProperty(hT,"defaultValue",{value:uT});var T0=Object.prototype.hasOwnProperty;function C0(r,e,n){for(n of r.keys())if(so(n,e))return n}function so(r,e){var n,i,o;if(r===e)return!0;if(r&&e&&(n=r.constructor)===e.constructor){if(n===Date)return r.getTime()===e.getTime();if(n===RegExp)return r.toString()===e.toString();if(n===Array){if((i=r.length)===e.length)for(;i--&&so(r[i],e[i]););return i===-1}if(n===Set){if(r.size!==e.size)return!1;for(i of r)if(o=i,o&&typeof o=="object"&&(o=C0(e,o),!o)||!e.has(o))return!1;return!0}if(n===Map){if(r.size!==e.size)return!1;for(i of r)if(o=i[0],o&&typeof o=="object"&&(o=C0(e,o),!o)||!so(i[1],e.get(o)))return!1;return!0}if(n===ArrayBuffer)r=new Uint8Array(r),e=new Uint8Array(e);else if(n===DataView){if((i=r.byteLength)===e.byteLength)for(;i--&&r.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(r)){if((i=r.byteLength)===e.byteLength)for(;i--&&r[i]===e[i];);return i===-1}if(!n||typeof r=="object"){i=0;for(n in r)if(T0.call(r,n)&&++i&&!T0.call(e,n)||!(n in e)||!so(r[n],e[n]))return!1;return Object.keys(e).length===i}}return r!==r&&e!==e}function vT(r,e){if(!r)throw typeof e=="string"?new Error(e):new Error(`${e.displayName} not found`)}const ms=(r,e)=>{const{assertCtxFn:n=vT}={},i=P.createContext(void 0);return i.displayName=r,[i,()=>{const u=P.useContext(i);return n(u,`${r} not found`),u.value},()=>{const u=P.useContext(i);return u?u.value:{}}]};function bT({swrConfig:r,children:e}){return P.createElement(yT,{value:r},e)}const[ab,ob]=ms("ClerkInstanceContext"),[wT]=ms("UserContext"),[_T,xT]=ms("ClientContext"),[ST]=ms("SessionContext");P.createContext({});const[ET]=ms("CheckoutContext"),TT=({children:r,...e})=>P.createElement(ET.Provider,{value:{value:e}},r),[CT]=ms("OrganizationContext"),kT=({children:r,organization:e,swrConfig:n})=>P.createElement(bT,{swrConfig:n},P.createElement(CT.Provider,{value:{value:{organization:e}}},r));function lb(r){if(!P.useContext(ab)){if(typeof r=="function"){r();return}throw new Error(`${r} can only be used within the <ClerkProvider /> component.

Possible fixes:
1. Ensure that the <ClerkProvider /> is correctly wrapping your application where this component is used.
2. Check for multiple versions of the \`@clerk/shared\` package in your project. Use a tool like \`npm ls @clerk/shared\` to identify multiple versions, and update your dependencies to only rely on one.

Learn more: https://clerk.com/docs/components/clerk-provider`.trim())}}const Pf=()=>(lb("useClerk"),ob());typeof window<"u"?P.useLayoutEffect:P.useEffect;const k0=so,AT=r=>{const e=D.useRef(r);return D.useEffect(()=>{e.current=r},[r]),e.current},Xt=(r,e,n)=>{const i=!!n,o=D.useRef(n);D.useEffect(()=>{o.current=n},[n]),D.useEffect(()=>{if(!i||!r)return()=>{};const l=(...u)=>{o.current&&o.current(...u)};return r.on(e,l),()=>{r.off(e,l)}},[i,e,r,o])},cb=P.createContext(null);cb.displayName="ElementsContext";const jT=(r,e)=>{if(!r)throw new Error(`Could not find Elements context; You need to wrap the part of your app that ${e} in an <Elements> provider.`);return r},gc=r=>r!==null&&typeof r=="object",NT=(r,e,n)=>gc(r)?Object.keys(r).reduce((i,o)=>{const l=!gc(e)||!ub(r[o],e[o]);return n.includes(o)?(l&&console.warn(`Unsupported prop change: options.${o} is not a mutable property.`),i):l?{...i||{},[o]:r[o]}:i},null):null,A0="[object Object]",ub=(r,e)=>{if(!gc(r)||!gc(e))return r===e;const n=Array.isArray(r);if(n!==Array.isArray(e))return!1;const i=Object.prototype.toString.call(r)===A0;if(i!==(Object.prototype.toString.call(e)===A0))return!1;if(!i&&!n)return r===e;const o=Object.keys(r),l=Object.keys(e);if(o.length!==l.length)return!1;const u={};for(let b=0;b<o.length;b+=1)u[o[b]]=!0;for(let b=0;b<l.length;b+=1)u[l[b]]=!0;const m=Object.keys(u);if(m.length!==o.length)return!1;const p=r,g=e,v=b=>ub(p[b],g[b]);return m.every(v)},j0=r=>jT(P.useContext(cb),r),OT=r=>r.charAt(0).toUpperCase()+r.slice(1),RT=(r,e)=>{const n=`${OT(r)}Element`,l=e?u=>{j0(`mounts <${n}>`);const{id:m,className:p}=u;return P.createElement("div",{id:m,className:p})}:({id:u,className:m,fallback:p,options:g={},onBlur:v,onFocus:b,onReady:_,onChange:x,onEscape:S,onClick:T,onLoadError:C,onLoaderStart:j,onNetworksChange:U,onConfirm:M,onCancel:V,onShippingAddressChange:G,onShippingRateChange:Y})=>{const F=j0(`mounts <${n}>`),ye="elements"in F?F.elements:null,[X,be]=P.useState(null),fe=P.useRef(null),Ce=P.useRef(null),[de,ke]=D.useState(!1);Xt(X,"blur",v),Xt(X,"focus",b),Xt(X,"escape",S),Xt(X,"click",T),Xt(X,"loaderror",C),Xt(X,"loaderstart",j),Xt(X,"networkschange",U),Xt(X,"confirm",M),Xt(X,"cancel",V),Xt(X,"shippingaddresschange",G),Xt(X,"shippingratechange",Y),Xt(X,"change",x);let Xe;_&&(Xe=()=>{ke(!0),_(X)}),Xt(X,"ready",Xe),P.useLayoutEffect(()=>{if(fe.current===null&&Ce.current!==null&&ye){let W=null;ye&&(W=ye.create(r,g)),fe.current=W,be(W),W&&W.mount(Ce.current)}},[ye,g]);const z=AT(g);return P.useEffect(()=>{if(!fe.current)return;const W=NT(g,z,["paymentRequest"]);W&&"update"in fe.current&&fe.current.update(W)},[g,z]),P.useLayoutEffect(()=>()=>{if(fe.current&&typeof fe.current.destroy=="function")try{fe.current.destroy(),fe.current=null}catch{}},[]),P.createElement(P.Fragment,null,!de&&p,P.createElement("div",{id:u,style:{height:de?"unset":"0px",visibility:de?"visible":"hidden"},className:m,ref:Ce}))};return l.displayName=n,l.__elementType=r,l};RT("payment",typeof window>"u");ms("PaymentElementContext");ms("StripeUtilsContext");var Dn=Qv({packageName:"@clerk/clerk-react"});function UT(r){Dn.setMessages(r).setPackageName(r)}var[IT]=ms("AuthContext"),DT=ab,db=ob,MT="You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.",PT=r=>`You've passed multiple children components to <${r}/>. You can only pass a single child component or text.`,Eh="Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",LT="<UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",zT="<UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",BT="<OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",qT="<OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",HT=r=>`<${r} /> can only accept <${r}.Page /> and <${r}.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.`,$T=r=>`Missing props. <${r}.Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page.`,VT=r=>`Missing props. <${r}.Link /> component requires the following props: url, label and labelIcon.`,GT="<UserButton /> can only accept <UserButton.UserProfilePage />, <UserButton.UserProfileLink /> and <UserButton.MenuItems /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",KT="<UserButton.MenuItems /> component can only accept <UserButton.Action /> and <UserButton.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",FT="<UserButton.MenuItems /> component needs to be a direct child of `<UserButton />`.",WT="<UserButton.Action /> component needs to be a direct child of `<UserButton.MenuItems />`.",YT="<UserButton.Link /> component needs to be a direct child of `<UserButton.MenuItems />`.",JT="Missing props. <UserButton.Link /> component requires the following props: href, label and labelIcon.",XT="Missing props. <UserButton.Action /> component requires the following props: label.",hb=r=>{lb(()=>{Dn.throwMissingClerkProviderError({source:r})})},QT=()=>{var r;hb("useSignUp");const e=db(),n=xT();return(r=e.telemetry)==null||r.record(qE("useSignUp")),n?{isLoaded:!0,signUp:n.signUp,setActive:e.setActive}:{isLoaded:!1,signUp:void 0,setActive:void 0}},Fe=(r,e)=>{const i=(typeof e=="string"?e:e==null?void 0:e.component)||r.displayName||r.name||"Component";r.displayName=i;const o=typeof e=="string"?void 0:e,l=u=>{hb(i||"withClerk");const m=db();return!m.loaded&&!(o!=null&&o.renderWhileLoading)?null:P.createElement(r,{...u,component:i,clerk:m})};return l.displayName=`withClerk(${i})`,l};const ZT=()=>{try{return!1}catch{}return!1},eC=()=>{try{return!1}catch{}return!1},tC=()=>{try{return!0}catch{}return!1},N0=new Set,Lf=(r,e,n)=>{const i=eC()||tC(),o=r;N0.has(o)||i||(N0.add(o),console.warn(`Clerk - DEPRECATION WARNING: "${r}" is deprecated and will be removed in the next major release.
${e}`))};Fe(({clerk:r,...e})=>{const{client:n,session:i}=r,o=n.signedInSessions?n.signedInSessions.length>0:n.activeSessions&&n.activeSessions.length>0;return P.useEffect(()=>{i===null&&o?r.redirectToAfterSignOut():r.redirectToSignIn(e)},[]),null},"RedirectToSignIn");Fe(({clerk:r,...e})=>(P.useEffect(()=>{r.redirectToSignUp(e)},[]),null),"RedirectToSignUp");Fe(({clerk:r,...e})=>(P.useEffect(()=>{r.redirectToTasks(e)},[]),null),"RedirectToTasks");Fe(({clerk:r})=>(P.useEffect(()=>{Lf("RedirectToUserProfile","Use the `redirectToUserProfile()` method instead."),r.redirectToUserProfile()},[]),null),"RedirectToUserProfile");Fe(({clerk:r})=>(P.useEffect(()=>{Lf("RedirectToOrganizationProfile","Use the `redirectToOrganizationProfile()` method instead."),r.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");Fe(({clerk:r})=>(P.useEffect(()=>{Lf("RedirectToCreateOrganization","Use the `redirectToCreateOrganization()` method instead."),r.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");Fe(({clerk:r,...e})=>(P.useEffect(()=>{r.handleRedirectCallback(e)},[]),null),"AuthenticateWithRedirectCallback");function Th(r,e,n){if(typeof r=="function")return r(e);if(typeof r<"u")return r;if(typeof n<"u")return n}const Rt=r=>{ZT()&&console.error(`Clerk: ${r}`)};var nC=Xv();const O0=(r,...e)=>{const n={...r};for(const i of e)delete n[i];return n};var Pc=r=>e=>{try{return P.Children.only(r)}catch{return Dn.throw(PT(e))}},Lc=(r,e)=>(r||(r=e),typeof r=="string"&&(r=P.createElement("button",null,r)),r),zc=r=>(...e)=>{if(r&&typeof r=="function")return r(...e)};function sC(r){return typeof r=="function"}var Fl=new Map;function rC(r,e,n=1){P.useEffect(()=>{const i=Fl.get(r)||0;return i==n?Dn.throw(e):(Fl.set(r,i+1),()=>{Fl.set(r,(Fl.get(r)||1)-1)})},[])}function iC(r,e,n){const i=r.displayName||r.name||e||"Component",o=l=>(rC(e,n),P.createElement(r,{...l}));return o.displayName=`withMaxAllowedInstancesGuard(${i})`,o}var ro=r=>{const[e,n]=D.useState(new Map);return r.map(i=>({id:i.id,mount:o=>n(l=>new Map(l).set(String(i.id),o)),unmount:()=>n(o=>{const l=new Map(o);return l.set(String(i.id),null),l}),portal:()=>{const o=e.get(String(i.id));return o?nC.createPortal(i.component,o):null}}))},Ot=(r,e)=>!!r&&P.isValidElement(r)&&(r==null?void 0:r.type)===e,fb=(r,e)=>gb({children:r,reorderItemsLabels:["account","security","billing","apiKeys"],LinkComponent:go,PageComponent:po,MenuItemsComponent:qc,componentName:"UserProfile"},e),mb=(r,e)=>gb({children:r,reorderItemsLabels:["general","members","billing","apiKeys"],LinkComponent:$c,PageComponent:Hc,componentName:"OrganizationProfile"},e),pb=r=>{const e=[],n=[$c,Hc,qc,po,go];return P.Children.forEach(r,i=>{n.some(o=>Ot(i,o))||e.push(i)}),e},gb=(r,e)=>{const{children:n,LinkComponent:i,PageComponent:o,MenuItemsComponent:l,reorderItemsLabels:u,componentName:m}=r,{allowForAnyChildren:p=!1}=e||{},g=[];P.Children.forEach(n,U=>{if(!Ot(U,o)&&!Ot(U,i)&&!Ot(U,l)){U&&!p&&Rt(HT(m));return}const{props:M}=U,{children:V,label:G,url:Y,labelIcon:F}=M;if(Ot(U,o))if(R0(M,u))g.push({label:G});else if(Ch(M))g.push({label:G,labelIcon:F,children:V,url:Y});else{Rt($T(m));return}if(Ot(U,i))if(kh(M))g.push({label:G,labelIcon:F,url:Y});else{Rt(VT(m));return}});const v=[],b=[],_=[];g.forEach((U,M)=>{if(Ch(U)){v.push({component:U.children,id:M}),b.push({component:U.labelIcon,id:M});return}kh(U)&&_.push({component:U.labelIcon,id:M})});const x=ro(v),S=ro(b),T=ro(_),C=[],j=[];return g.forEach((U,M)=>{if(R0(U,u)){C.push({label:U.label});return}if(Ch(U)){const{portal:V,mount:G,unmount:Y}=x.find(be=>be.id===M),{portal:F,mount:ye,unmount:X}=S.find(be=>be.id===M);C.push({label:U.label,url:U.url,mount:G,unmount:Y,mountIcon:ye,unmountIcon:X}),j.push(V),j.push(F);return}if(kh(U)){const{portal:V,mount:G,unmount:Y}=T.find(F=>F.id===M);C.push({label:U.label,url:U.url,mountIcon:G,unmountIcon:Y}),j.push(V);return}}),{customPages:C,customPagesPortals:j}},R0=(r,e)=>{const{children:n,label:i,url:o,labelIcon:l}=r;return!n&&!o&&!l&&e.some(u=>u===i)},Ch=r=>{const{children:e,label:n,url:i,labelIcon:o}=r;return!!e&&!!i&&!!o&&!!n},kh=r=>{const{children:e,label:n,url:i,labelIcon:o}=r;return!e&&!!i&&!!o&&!!n},aC=(r,e)=>{var n;return oC({children:r,reorderItemsLabels:["manageAccount","signOut"],MenuItemsComponent:qc,MenuActionComponent:vb,MenuLinkComponent:bb,UserProfileLinkComponent:go,UserProfilePageComponent:po,allowForAnyChildren:(n=e==null?void 0:e.allowForAnyChildren)!=null?n:!1})},oC=({children:r,MenuItemsComponent:e,MenuActionComponent:n,MenuLinkComponent:i,UserProfileLinkComponent:o,UserProfilePageComponent:l,reorderItemsLabels:u,allowForAnyChildren:m=!1})=>{const p=[],g=[],v=[];P.Children.forEach(r,T=>{if(!Ot(T,e)&&!Ot(T,o)&&!Ot(T,l)){T&&!m&&Rt(GT);return}if(Ot(T,o)||Ot(T,l))return;const{props:C}=T;P.Children.forEach(C.children,j=>{if(!Ot(j,n)&&!Ot(j,i)){j&&Rt(KT);return}const{props:U}=j,{label:M,labelIcon:V,href:G,onClick:Y,open:F}=U;if(Ot(j,n))if(U0(U,u))p.push({label:M});else if(Ah(U)){const ye={label:M,labelIcon:V};if(Y!==void 0)p.push({...ye,onClick:Y});else if(F!==void 0)p.push({...ye,open:F.startsWith("/")?F:`/${F}`});else{Rt("Custom menu item must have either onClick or open property");return}}else{Rt(XT);return}if(Ot(j,i))if(jh(U))p.push({label:M,labelIcon:V,href:G});else{Rt(JT);return}})});const b=[],_=[];p.forEach((T,C)=>{Ah(T)&&b.push({component:T.labelIcon,id:C}),jh(T)&&_.push({component:T.labelIcon,id:C})});const x=ro(b),S=ro(_);return p.forEach((T,C)=>{if(U0(T,u)&&g.push({label:T.label}),Ah(T)){const{portal:j,mount:U,unmount:M}=x.find(G=>G.id===C),V={label:T.label,mountIcon:U,unmountIcon:M};"onClick"in T?V.onClick=T.onClick:"open"in T&&(V.open=T.open),g.push(V),v.push(j)}if(jh(T)){const{portal:j,mount:U,unmount:M}=S.find(V=>V.id===C);g.push({label:T.label,href:T.href,mountIcon:U,unmountIcon:M}),v.push(j)}}),{customMenuItems:g,customMenuItemsPortals:v}},U0=(r,e)=>{const{children:n,label:i,onClick:o,labelIcon:l}=r;return!n&&!o&&!l&&e.some(u=>u===i)},Ah=r=>{const{label:e,labelIcon:n,onClick:i,open:o}=r;return!!n&&!!e&&(typeof i=="function"||typeof o=="string")},jh=r=>{const{label:e,href:n,labelIcon:i}=r;return!!n&&!!i&&!!e},lC=r=>{const e=r==null?void 0:r.isReady;return n=>new Promise((i,o)=>{const{root:l=document==null?void 0:document.body,selector:u,timeout:m=0}=n;if(!l){o(new Error("No root element provided"));return}let p=l;if(u&&(p=l==null?void 0:l.querySelector(u)),e(p,u)){i();return}const g=new MutationObserver(v=>{for(const b of v)if(!p&&u&&(p=l==null?void 0:l.querySelector(u)),(r.childList&&b.type==="childList"||r.attributes&&b.type==="attributes")&&e(p,u)){g.disconnect(),i();return}});g.observe(l,r),m>0&&setTimeout(()=>{g.disconnect(),o(new Error(`Timeout waiting for ${u}`))},m)})},cC=lC({childList:!0,subtree:!0,isReady:(r,e)=>{var n;return!!(r!=null&&r.childElementCount)&&((n=r==null?void 0:r.matches)==null?void 0:n.call(r,e))&&r.childElementCount>0}});function It(r,e){const n=D.useRef(),[i,o]=D.useState("rendering");return D.useEffect(()=>{if(!r)throw new Error("Clerk: no component name provided, unable to detect mount.");if(typeof window<"u"&&!n.current){const l=`[data-clerk-component="${r}"]`,u=e==null?void 0:e.selector;n.current=cC({selector:u?l+u:l}).then(()=>{o("rendered")}).catch(()=>{o("error")})}},[r,e==null?void 0:e.selector]),i}var Wl=r=>"mount"in r,I0=r=>"open"in r,D0=r=>r==null?void 0:r.map(({mountIcon:e,unmountIcon:n,...i})=>i),Tt=class extends P.PureComponent{constructor(){super(...arguments),this.rootRef=P.createRef()}componentDidUpdate(r){var e,n,i,o;if(!Wl(r)||!Wl(this.props))return;const l=O0(r.props,"customPages","customMenuItems","children"),u=O0(this.props.props,"customPages","customMenuItems","children"),m=((e=l.customPages)==null?void 0:e.length)!==((n=u.customPages)==null?void 0:n.length),p=((i=l.customMenuItems)==null?void 0:i.length)!==((o=u.customMenuItems)==null?void 0:o.length),g=D0(r.props.customMenuItems),v=D0(this.props.props.customMenuItems);(!k0(l,u)||!k0(g,v)||m||p)&&this.rootRef.current&&this.props.updateProps({node:this.rootRef.current,props:this.props.props})}componentDidMount(){this.rootRef.current&&(Wl(this.props)&&this.props.mount(this.rootRef.current,this.props.props),I0(this.props)&&this.props.open(this.props.props))}componentWillUnmount(){this.rootRef.current&&(Wl(this.props)&&this.props.unmount(this.rootRef.current),I0(this.props)&&this.props.close())}render(){const{hideRootHtmlElement:r=!1}=this.props,e={ref:this.rootRef,...this.props.rootProps,...this.props.component&&{"data-clerk-component":this.props.component}};return P.createElement(P.Fragment,null,!r&&P.createElement("div",{...e}),this.props.children)}},Bc=r=>{var e,n;return P.createElement(P.Fragment,null,(e=r==null?void 0:r.customPagesPortals)==null?void 0:e.map((i,o)=>D.createElement(i,{key:o})),(n=r==null?void 0:r.customMenuItemsPortals)==null?void 0:n.map((i,o)=>D.createElement(i,{key:o})))};Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}};return P.createElement(P.Fragment,null,l&&n,r.loaded&&P.createElement(Tt,{component:e,mount:r.mountSignIn,unmount:r.unmountSignIn,updateProps:r.__unstable__updateProps,props:i,rootProps:u}))},{component:"SignIn",renderWhileLoading:!0});Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}};return P.createElement(P.Fragment,null,l&&n,r.loaded&&P.createElement(Tt,{component:e,mount:r.mountSignUp,unmount:r.unmountSignUp,updateProps:r.__unstable__updateProps,props:i,rootProps:u}))},{component:"SignUp",renderWhileLoading:!0});function po({children:r}){return Rt(LT),P.createElement(P.Fragment,null,r)}function go({children:r}){return Rt(zT),P.createElement(P.Fragment,null,r)}var uC=Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}},{customPages:m,customPagesPortals:p}=fb(i.children);return P.createElement(P.Fragment,null,l&&n,P.createElement(Tt,{component:e,mount:r.mountUserProfile,unmount:r.unmountUserProfile,updateProps:r.__unstable__updateProps,props:{...i,customPages:m},rootProps:u},P.createElement(Bc,{customPagesPortals:p})))},{component:"UserProfile",renderWhileLoading:!0});Object.assign(uC,{Page:po,Link:go});var yb=D.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),dC=Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}},{customPages:m,customPagesPortals:p}=fb(i.children,{allowForAnyChildren:!!i.__experimental_asProvider}),g={...i.userProfileProps,customPages:m},{customMenuItems:v,customMenuItemsPortals:b}=aC(i.children,{allowForAnyChildren:!!i.__experimental_asProvider}),_=pb(i.children),x={mount:r.mountUserButton,unmount:r.unmountUserButton,updateProps:r.__unstable__updateProps,props:{...i,userProfileProps:g,customMenuItems:v}},S={customPagesPortals:p,customMenuItemsPortals:b};return P.createElement(yb.Provider,{value:x},l&&n,r.loaded&&P.createElement(Tt,{component:e,...x,hideRootHtmlElement:!!i.__experimental_asProvider,rootProps:u},i.__experimental_asProvider?_:null,P.createElement(Bc,{...S})))},{component:"UserButton",renderWhileLoading:!0});function qc({children:r}){return Rt(FT),P.createElement(P.Fragment,null,r)}function vb({children:r}){return Rt(WT),P.createElement(P.Fragment,null,r)}function bb({children:r}){return Rt(YT),P.createElement(P.Fragment,null,r)}function hC(r){const e=D.useContext(yb),n={...e,props:{...e.props,...r}};return P.createElement(Tt,{...n})}Object.assign(dC,{UserProfilePage:po,UserProfileLink:go,MenuItems:qc,Action:vb,Link:bb,__experimental_Outlet:hC});function Hc({children:r}){return Rt(BT),P.createElement(P.Fragment,null,r)}function $c({children:r}){return Rt(qT),P.createElement(P.Fragment,null,r)}var fC=Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}},{customPages:m,customPagesPortals:p}=mb(i.children);return P.createElement(P.Fragment,null,l&&n,r.loaded&&P.createElement(Tt,{component:e,mount:r.mountOrganizationProfile,unmount:r.unmountOrganizationProfile,updateProps:r.__unstable__updateProps,props:{...i,customPages:m},rootProps:u},P.createElement(Bc,{customPagesPortals:p})))},{component:"OrganizationProfile",renderWhileLoading:!0});Object.assign(fC,{Page:Hc,Link:$c});Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}};return P.createElement(P.Fragment,null,l&&n,r.loaded&&P.createElement(Tt,{component:e,mount:r.mountCreateOrganization,unmount:r.unmountCreateOrganization,updateProps:r.__unstable__updateProps,props:i,rootProps:u}))},{component:"CreateOrganization",renderWhileLoading:!0});var wb=D.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),mC=Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}},{customPages:m,customPagesPortals:p}=mb(i.children,{allowForAnyChildren:!!i.__experimental_asProvider}),g={...i.organizationProfileProps,customPages:m},v=pb(i.children),b={mount:r.mountOrganizationSwitcher,unmount:r.unmountOrganizationSwitcher,updateProps:r.__unstable__updateProps,props:{...i,organizationProfileProps:g},rootProps:u,component:e};return r.__experimental_prefetchOrganizationSwitcher(),P.createElement(wb.Provider,{value:b},P.createElement(P.Fragment,null,l&&n,r.loaded&&P.createElement(Tt,{...b,hideRootHtmlElement:!!i.__experimental_asProvider},i.__experimental_asProvider?v:null,P.createElement(Bc,{customPagesPortals:p}))))},{component:"OrganizationSwitcher",renderWhileLoading:!0});function pC(r){const e=D.useContext(wb),n={...e,props:{...e.props,...r}};return P.createElement(Tt,{...n})}Object.assign(mC,{OrganizationProfilePage:Hc,OrganizationProfileLink:$c,__experimental_Outlet:pC});Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}};return P.createElement(P.Fragment,null,l&&n,r.loaded&&P.createElement(Tt,{component:e,mount:r.mountOrganizationList,unmount:r.unmountOrganizationList,updateProps:r.__unstable__updateProps,props:i,rootProps:u}))},{component:"OrganizationList",renderWhileLoading:!0});Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}};return P.createElement(P.Fragment,null,l&&n,r.loaded&&P.createElement(Tt,{component:e,open:r.openGoogleOneTap,close:r.closeGoogleOneTap,updateProps:r.__unstable__updateProps,props:i,rootProps:u}))},{component:"GoogleOneTap",renderWhileLoading:!0});Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}};return P.createElement(P.Fragment,null,l&&n,r.loaded&&P.createElement(Tt,{component:e,mount:r.mountWaitlist,unmount:r.unmountWaitlist,updateProps:r.__unstable__updateProps,props:i,rootProps:u}))},{component:"Waitlist",renderWhileLoading:!0});Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e,{selector:'[data-component-status="ready"]'})==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}};return P.createElement(P.Fragment,null,l&&n,r.loaded&&P.createElement(Tt,{component:e,mount:r.mountPricingTable,unmount:r.unmountPricingTable,updateProps:r.__unstable__updateProps,props:i,rootProps:u}))},{component:"PricingTable",renderWhileLoading:!0});Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}};return P.createElement(P.Fragment,null,l&&n,r.loaded&&P.createElement(Tt,{component:e,mount:r.mountAPIKeys,unmount:r.unmountAPIKeys,updateProps:r.__unstable__updateProps,props:i,rootProps:u}))},{component:"ApiKeys",renderWhileLoading:!0});Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}};return P.createElement(P.Fragment,null,l&&n,r.loaded&&P.createElement(Tt,{component:e,mount:r.mountUserAvatar,unmount:r.unmountUserAvatar,updateProps:r.__unstable__updateProps,props:i,rootProps:u}))},{component:"UserAvatar",renderWhileLoading:!0});Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}};return P.createElement(P.Fragment,null,l&&n,r.loaded&&P.createElement(Tt,{component:e,mount:r.mountTaskChooseOrganization,unmount:r.unmountTaskChooseOrganization,updateProps:r.__unstable__updateProps,props:i,rootProps:u}))},{component:"TaskChooseOrganization",renderWhileLoading:!0});Fe(({clerk:r,component:e,fallback:n,...i})=>{const l=It(e)==="rendering"||!r.loaded,u={...l&&n&&{style:{display:"none"}}};return P.createElement(P.Fragment,null,l&&n,r.loaded&&P.createElement(Tt,{component:e,mount:r.mountTaskResetPassword,unmount:r.unmountTaskResetPassword,updateProps:r.__unstable__updateProps,props:i,rootProps:u}))},{component:"TaskResetPassword",renderWhileLoading:!0});var _b=r=>{throw TypeError(r)},zf=(r,e,n)=>e.has(r)||_b("Cannot "+n),Je=(r,e,n)=>(zf(r,e,"read from private field"),n?n.call(r):e.get(r)),Vs=(r,e,n)=>e.has(r)?_b("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,n),Tr=(r,e,n,i)=>(zf(r,e,"write to private field"),e.set(r,n),n),Nh=(r,e,n)=>(zf(r,e,"access private method"),n);const gC={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(r,e)=>e<5,retryImmediately:!1,jitter:!0},yC=100,xb=async r=>new Promise(e=>setTimeout(e,r)),Sb=(r,e)=>e?r*(1+Math.random()):r,vC=r=>{let e=0;const n=()=>{const i=r.initialDelay,o=r.factor;let l=i*Math.pow(o,e);return l=Sb(l,r.jitter),Math.min(r.maxDelayBetweenRetries||l,l)};return async()=>{await xb(n()),e++}},bC=async(r,e={})=>{let n=0;const{shouldRetry:i,initialDelay:o,maxDelayBetweenRetries:l,factor:u,retryImmediately:m,jitter:p,onBeforeRetry:g}={...gC,...e},v=vC({initialDelay:o,maxDelayBetweenRetries:l,factor:u,jitter:p});for(;;)try{return await r()}catch(b){if(n++,!i(b,n))throw b;g&&await g(n),m&&n===1?await xb(Sb(yC,p)):await v()}},wC="loadScript cannot be called when document does not exist",_C="loadScript cannot be called without a src";async function xC(r="",e){const{async:n,defer:i,beforeLoad:o,crossOrigin:l,nonce:u}=e||{};return bC(()=>new Promise((p,g)=>{r||g(new Error(_C)),(!document||!document.body)&&g(new Error(wC));const v=document.createElement("script");l&&v.setAttribute("crossorigin",l),v.async=n||!1,v.defer=i||!1,v.addEventListener("load",()=>{v.remove(),p(v)}),v.addEventListener("error",b=>{v.remove(),g(b.error??new Error(`failed to load script: ${r}`))}),v.src=r,v.nonce=u,o==null||o(v),document.body.appendChild(v)}),{shouldRetry:(p,g)=>g<=5})}function SC(r){return r?EC(r)||Eb(r):!0}function EC(r){return/^http(s)?:\/\//.test(r||"")}function Eb(r){return r.startsWith("/")}function TC(r){return r?Eb(r)?new URL(r,window.location.origin).toString():r:""}function CC(r){if(!r)return"";let e;if(r.match(/^(clerk\.)+\w*$/))e=/(clerk\.)*(?=clerk\.)/;else{if(r.match(/\.clerk.accounts/))return r;e=/^(clerk\.)*/gi}return`clerk.${r.replace(e,"")}`}const kC=(r,e="5.117.0")=>{if(r)return r;const n=AC(e);return n?n==="snapshot"?"5.117.0":n:jC(e)},AC=r=>{var e;return(e=r.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/))==null?void 0:e[1]},jC=r=>r.trim().replace(/^v/,"").split(".")[0],Tb="failed_to_load_clerk_js",NC="failed_to_load_clerk_js_timeout",af="Failed to load Clerk",{isDevOrStagingUrl:OC}=LE(),Cb=Qv({packageName:"@clerk/shared"});function RC(r){Cb.setPackageName({packageName:r})}function of(){if(typeof window>"u"||!window.Clerk)return!1;const r=window.Clerk;return typeof r=="object"&&typeof r.load=="function"}function UC(r){if(typeof window>"u"||!window.performance)return!1;const e=performance.getEntriesByName(r,"resource");if(e.length===0)return!1;const n=e[e.length-1];return n.transferSize===0&&n.decodedBodySize===0&&(n.responseEnd===0||n.responseEnd>0&&n.responseStart>0||"responseStatus"in n&&(n.responseStatus>=400||n.responseStatus===0))}function M0(r,e){return new Promise((n,i)=>{let o=!1;const l=(v,b)=>{clearTimeout(v),clearInterval(b)};e==null||e.addEventListener("error",()=>{l(p,g),i(new Xh(af,{code:Tb}))});const u=()=>{o||of()&&(o=!0,l(p,g),n(null))},p=setTimeout(()=>{o||(o=!0,l(p,g),of()?n(null):i(new Xh(af,{code:NC})))},r);u();const g=setInterval(()=>{if(o){clearInterval(g);return}u()},100)})}const IC=async r=>{const e=(r==null?void 0:r.scriptLoadTimeout)??15e3;if(of())return null;if(!(r!=null&&r.publishableKey))return Cb.throwMissingPublishableKeyError(),null;const n=DC(r),i=document.querySelector("script[data-clerk-js-script]");if(i)if(UC(n))i.remove();else try{return await M0(e,i),null}catch{i.remove()}const o=M0(e);return xC(n,{async:!0,crossOrigin:"anonymous",nonce:r.nonce,beforeLoad:PC(r)}).catch(l=>{throw new Xh(af+(l.message?`, ${l.message}`:""),{code:Tb,cause:l})}),o},DC=r=>{var v,b;const{clerkJSUrl:e,clerkJSVariant:n,clerkJSVersion:i,proxyUrl:o,domain:l,publishableKey:u}=r;if(e)return e;let m="";o&&SC(o)?m=TC(o).replace(/http(s)?:\/\//,""):l&&!OC(((v=y0(u))==null?void 0:v.frontendApi)||"")?m=CC(l):m=((b=y0(u))==null?void 0:b.frontendApi)||"";const p=n?`${n.replace(/\.+$/,"")}.`:"",g=kC(i);return`https://${m}/npm/@clerk/clerk-js@${g}/dist/clerk.${p}browser.js`},MC=r=>{const e={};return r.publishableKey&&(e["data-clerk-publishable-key"]=r.publishableKey),r.proxyUrl&&(e["data-clerk-proxy-url"]=r.proxyUrl),r.domain&&(e["data-clerk-domain"]=r.domain),r.nonce&&(e.nonce=r.nonce),e},PC=r=>e=>{const n=MC(r);for(const i in n)e.setAttribute(i,n[i])},LC=(r,e,n)=>!r&&n?zC(n):BC(e),zC=r=>{const e=r.userId,n=r.user,i=r.sessionId,o=r.sessionStatus,l=r.sessionClaims;return{userId:e,user:n,sessionId:i,session:r.session,sessionStatus:o,sessionClaims:l,organization:r.organization,orgId:r.orgId,orgRole:r.orgRole,orgPermissions:r.orgPermissions,orgSlug:r.orgSlug,actor:r.actor,factorVerificationAge:r.factorVerificationAge}},BC=r=>{var S,T,C,j;const e=r.user?r.user.id:r.user,n=r.user,i=r.session?r.session.id:r.session,o=r.session,l=(S=r.session)==null?void 0:S.status,u=r.session?(C=(T=r.session.lastActiveToken)==null?void 0:T.jwt)==null?void 0:C.claims:null,m=r.session?r.session.factorVerificationAge:null,p=o==null?void 0:o.actor,g=r.organization,v=r.organization?r.organization.id:r.organization,b=g==null?void 0:g.slug,_=g&&((j=n==null?void 0:n.organizationMemberships)==null?void 0:j.find(U=>U.organization.id===v)),x=_&&_.permissions;return{userId:e,user:n,sessionId:i,session:o,sessionStatus:l,sessionClaims:u,organization:g,orgId:v,orgRole:_&&_.role,orgSlug:b,orgPermissions:x,actor:p,factorVerificationAge:m}};function yc(){return typeof window<"u"}const P0=(r,e,n,i,o)=>{const{notify:l}=o||{};let u=r.get(n);u||(u=[],r.set(n,u)),u.push(i),l&&e.has(n)&&i(e.get(n))},L0=(r,e,n)=>(r.get(e)||[]).map(i=>i(n)),z0=(r,e,n)=>{const i=r.get(e);i&&(n?i.splice(i.indexOf(n)>>>0,1):r.set(e,[]))},qC=()=>{const r=new Map,e=new Map,n=new Map;return{on:(...o)=>P0(r,e,...o),prioritizedOn:(...o)=>P0(n,e,...o),emit:(o,l)=>{e.set(o,l),L0(n,o,l),L0(r,o,l)},off:(...o)=>z0(r,...o),prioritizedOff:(...o)=>z0(n,...o),internal:{retrieveListeners:o=>r.get(o)||[]}}},Yl={Status:"status"},HC=()=>qC();typeof window<"u"&&!window.global&&(window.global=typeof global>"u"?window:global);Fe(({clerk:r,children:e,...n})=>{const{signUpFallbackRedirectUrl:i,forceRedirectUrl:o,fallbackRedirectUrl:l,signUpForceRedirectUrl:u,mode:m,initialValues:p,withSignUp:g,oauthFlow:v,...b}=n;e=Lc(e,"Sign in");const _=Pc(e)("SignInButton"),x=()=>{const C={forceRedirectUrl:o,fallbackRedirectUrl:l,signUpFallbackRedirectUrl:i,signUpForceRedirectUrl:u,initialValues:p,withSignUp:g,oauthFlow:v};return m==="modal"?r.openSignIn({...C,appearance:n.appearance}):r.redirectToSignIn({...C,signInFallbackRedirectUrl:l,signInForceRedirectUrl:o})},T={...b,onClick:async C=>(_&&typeof _=="object"&&"props"in _&&await zc(_.props.onClick)(C),x())};return P.cloneElement(_,T)},{component:"SignInButton",renderWhileLoading:!0});Fe(({clerk:r,children:e,...n})=>{const{redirectUrl:i,...o}=n;e=Lc(e,"Sign in with Metamask");const l=Pc(e)("SignInWithMetamaskButton"),u=async()=>{async function g(){await r.authenticateWithMetamask({redirectUrl:i||void 0})}g()},p={...o,onClick:async g=>(await zc(l.props.onClick)(g),u())};return P.cloneElement(l,p)},{component:"SignInWithMetamask",renderWhileLoading:!0});Fe(({clerk:r,children:e,...n})=>{const{redirectUrl:i="/",signOutOptions:o,...l}=n;e=Lc(e,"Sign out");const u=Pc(e)("SignOutButton"),m=()=>r.signOut({redirectUrl:i,...o}),g={...l,onClick:async v=>(await zc(u.props.onClick)(v),m())};return P.cloneElement(u,g)},{component:"SignOutButton",renderWhileLoading:!0});Fe(({clerk:r,children:e,...n})=>{const{fallbackRedirectUrl:i,forceRedirectUrl:o,signInFallbackRedirectUrl:l,signInForceRedirectUrl:u,mode:m,initialValues:p,oauthFlow:g,...v}=n;e=Lc(e,"Sign up");const b=Pc(e)("SignUpButton"),_=()=>{const T={fallbackRedirectUrl:i,forceRedirectUrl:o,signInFallbackRedirectUrl:l,signInForceRedirectUrl:u,initialValues:p,oauthFlow:g};return m==="modal"?r.openSignUp({...T,appearance:n.appearance,unsafeMetadata:n.unsafeMetadata}):r.redirectToSignUp({...T,signUpFallbackRedirectUrl:i,signUpForceRedirectUrl:o})},S={...v,onClick:async T=>(b&&typeof b=="object"&&"props"in b&&await zc(b.props.onClick)(T),_())};return P.cloneElement(b,S)},{component:"SignUpButton",renderWhileLoading:!0});var $C=()=>({fields:{identifier:null,password:null,code:null},raw:null,global:null}),VC=()=>({fields:{firstName:null,lastName:null,emailAddress:null,phoneNumber:null,password:null,username:null,code:null,captcha:null,legalAccepted:null},raw:null,global:null}),GC=class{constructor(r){this.isomorphicClerk=r,this.signInSignalProxy=this.buildSignInProxy(),this.signUpSignalProxy=this.buildSignUpProxy()}signInSignal(){return this.signInSignalProxy}signUpSignal(){return this.signUpSignalProxy}buildSignInProxy(){const r=this.gateProperty.bind(this),e=()=>this.client.signIn.__internal_future;return{errors:$C(),fetchStatus:"idle",signIn:{status:"needs_identifier",availableStrategies:[],isTransferable:!1,get id(){return r(e,"id",void 0)},get supportedFirstFactors(){return r(e,"supportedFirstFactors",[])},get supportedSecondFactors(){return r(e,"supportedSecondFactors",[])},get secondFactorVerification(){return r(e,"secondFactorVerification",{status:null,error:null,expireAt:null,externalVerificationRedirectURL:null,nonce:null,attempts:null,message:null,strategy:null,verifiedAtClient:null,verifiedFromTheSameClient:()=>!1,__internal_toSnapshot:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")},pathRoot:"",reload:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")}})},get identifier(){return r(e,"identifier",null)},get createdSessionId(){return r(e,"createdSessionId",null)},get userData(){return r(e,"userData",{})},get firstFactorVerification(){return r(e,"firstFactorVerification",{status:null,error:null,expireAt:null,externalVerificationRedirectURL:null,nonce:null,attempts:null,message:null,strategy:null,verifiedAtClient:null,verifiedFromTheSameClient:()=>!1,__internal_toSnapshot:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")},pathRoot:"",reload:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")}})},create:this.gateMethod(e,"create"),password:this.gateMethod(e,"password"),sso:this.gateMethod(e,"sso"),finalize:this.gateMethod(e,"finalize"),emailCode:this.wrapMethods(()=>e().emailCode,["sendCode","verifyCode"]),emailLink:this.wrapStruct(()=>e().emailLink,["sendLink","waitForVerification"],["verification"],{verification:null}),resetPasswordEmailCode:this.wrapMethods(()=>e().resetPasswordEmailCode,["sendCode","verifyCode","submitPassword"]),phoneCode:this.wrapMethods(()=>e().phoneCode,["sendCode","verifyCode"]),mfa:this.wrapMethods(()=>e().mfa,["sendPhoneCode","verifyPhoneCode","verifyTOTP","verifyBackupCode"]),ticket:this.gateMethod(e,"ticket"),passkey:this.gateMethod(e,"passkey"),web3:this.gateMethod(e,"web3")}}}buildSignUpProxy(){const r=this.gateProperty.bind(this),e=this.gateMethod.bind(this),n=this.wrapMethods.bind(this),i=()=>this.client.signUp.__internal_future;return{errors:VC(),fetchStatus:"idle",signUp:{get id(){return r(i,"id",void 0)},get requiredFields(){return r(i,"requiredFields",[])},get optionalFields(){return r(i,"optionalFields",[])},get missingFields(){return r(i,"missingFields",[])},get username(){return r(i,"username",null)},get firstName(){return r(i,"firstName",null)},get lastName(){return r(i,"lastName",null)},get emailAddress(){return r(i,"emailAddress",null)},get phoneNumber(){return r(i,"phoneNumber",null)},get web3Wallet(){return r(i,"web3Wallet",null)},get hasPassword(){return r(i,"hasPassword",!1)},get unsafeMetadata(){return r(i,"unsafeMetadata",{})},get createdSessionId(){return r(i,"createdSessionId",null)},get createdUserId(){return r(i,"createdUserId",null)},get abandonAt(){return r(i,"abandonAt",null)},get legalAcceptedAt(){return r(i,"legalAcceptedAt",null)},get locale(){return r(i,"locale",null)},get status(){return r(i,"status","missing_requirements")},get unverifiedFields(){return r(i,"unverifiedFields",[])},get isTransferable(){return r(i,"isTransferable",!1)},create:e(i,"create"),update:e(i,"update"),sso:e(i,"sso"),password:e(i,"password"),ticket:e(i,"ticket"),web3:e(i,"web3"),finalize:e(i,"finalize"),verifications:n(()=>i().verifications,["sendEmailCode","verifyEmailCode","sendPhoneCode","verifyPhoneCode"])}}}__internal_effect(r){throw new Error("__internal_effect called before Clerk is loaded")}__internal_computed(r){throw new Error("__internal_computed called before Clerk is loaded")}get client(){const r=this.isomorphicClerk.client;if(!r)throw new Error("Clerk client not ready");return r}gateProperty(r,e,n){return!yc()||!this.isomorphicClerk.loaded?n:r()[e]}gateMethod(r,e){return(async(...n)=>{if(!yc())return Dn.throw(`Attempted to call a method (${e}) that is not supported on the server.`);this.isomorphicClerk.loaded||await new Promise(o=>this.isomorphicClerk.addOnLoaded(o));const i=r();return i[e].apply(i,n)})}wrapMethods(r,e){return Object.fromEntries(e.map(n=>[n,this.gateMethod(r,n)]))}wrapStruct(r,e,n,i){const o={};for(const l of e)o[l]=this.gateMethod(r,l);for(const l of n)Object.defineProperty(o,l,{get:()=>this.gateProperty(r,l,i[l]),enumerable:!0});return o}};typeof globalThis.__BUILD_DISABLE_RHC__>"u"&&(globalThis.__BUILD_DISABLE_RHC__=!1);var KC={name:"@clerk/clerk-react",version:"5.59.2",environment:"production"},ac,Li,zi,Gs,Un,oc,Ks,Ja,lc,kb=class Ab{constructor(e){Vs(this,Ja),this.clerkjs=null,this.preopenOneTap=null,this.preopenUserVerification=null,this.preopenEnableOrganizationsPrompt=null,this.preopenSignIn=null,this.preopenCheckout=null,this.preopenPlanDetails=null,this.preopenSubscriptionDetails=null,this.preopenSignUp=null,this.preopenUserProfile=null,this.preopenOrganizationProfile=null,this.preopenCreateOrganization=null,this.preOpenWaitlist=null,this.premountSignInNodes=new Map,this.premountSignUpNodes=new Map,this.premountUserAvatarNodes=new Map,this.premountUserProfileNodes=new Map,this.premountUserButtonNodes=new Map,this.premountOrganizationProfileNodes=new Map,this.premountCreateOrganizationNodes=new Map,this.premountOrganizationSwitcherNodes=new Map,this.premountOrganizationListNodes=new Map,this.premountMethodCalls=new Map,this.premountWaitlistNodes=new Map,this.premountPricingTableNodes=new Map,this.premountAPIKeysNodes=new Map,this.premountOAuthConsentNodes=new Map,this.premountTaskChooseOrganizationNodes=new Map,this.premountTaskResetPasswordNodes=new Map,this.premountAddListenerCalls=new Map,this.loadedListeners=[],Vs(this,ac,"loading"),Vs(this,Li),Vs(this,zi),Vs(this,Gs),Vs(this,Un,HC()),Vs(this,oc),this.buildSignInUrl=o=>{const l=()=>{var u;return((u=this.clerkjs)==null?void 0:u.buildSignInUrl(o))||""};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("buildSignInUrl",l)},this.buildSignUpUrl=o=>{const l=()=>{var u;return((u=this.clerkjs)==null?void 0:u.buildSignUpUrl(o))||""};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("buildSignUpUrl",l)},this.buildAfterSignInUrl=(...o)=>{const l=()=>{var u;return((u=this.clerkjs)==null?void 0:u.buildAfterSignInUrl(...o))||""};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("buildAfterSignInUrl",l)},this.buildAfterSignUpUrl=(...o)=>{const l=()=>{var u;return((u=this.clerkjs)==null?void 0:u.buildAfterSignUpUrl(...o))||""};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("buildAfterSignUpUrl",l)},this.buildAfterSignOutUrl=()=>{const o=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildAfterSignOutUrl())||""};if(this.clerkjs&&this.loaded)return o();this.premountMethodCalls.set("buildAfterSignOutUrl",o)},this.buildNewSubscriptionRedirectUrl=()=>{const o=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildNewSubscriptionRedirectUrl())||""};if(this.clerkjs&&this.loaded)return o();this.premountMethodCalls.set("buildNewSubscriptionRedirectUrl",o)},this.buildAfterMultiSessionSingleSignOutUrl=()=>{const o=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildAfterMultiSessionSingleSignOutUrl())||""};if(this.clerkjs&&this.loaded)return o();this.premountMethodCalls.set("buildAfterMultiSessionSingleSignOutUrl",o)},this.buildUserProfileUrl=()=>{const o=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildUserProfileUrl())||""};if(this.clerkjs&&this.loaded)return o();this.premountMethodCalls.set("buildUserProfileUrl",o)},this.buildCreateOrganizationUrl=()=>{const o=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildCreateOrganizationUrl())||""};if(this.clerkjs&&this.loaded)return o();this.premountMethodCalls.set("buildCreateOrganizationUrl",o)},this.buildOrganizationProfileUrl=()=>{const o=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildOrganizationProfileUrl())||""};if(this.clerkjs&&this.loaded)return o();this.premountMethodCalls.set("buildOrganizationProfileUrl",o)},this.buildWaitlistUrl=()=>{const o=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildWaitlistUrl())||""};if(this.clerkjs&&this.loaded)return o();this.premountMethodCalls.set("buildWaitlistUrl",o)},this.buildTasksUrl=()=>{const o=()=>{var l;return((l=this.clerkjs)==null?void 0:l.buildTasksUrl())||""};if(this.clerkjs&&this.loaded)return o();this.premountMethodCalls.set("buildTasksUrl",o)},this.buildUrlWithAuth=o=>{const l=()=>{var u;return((u=this.clerkjs)==null?void 0:u.buildUrlWithAuth(o))||""};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("buildUrlWithAuth",l)},this.handleUnauthenticated=async()=>{const o=()=>{var l;return(l=this.clerkjs)==null?void 0:l.handleUnauthenticated()};this.clerkjs&&this.loaded?o():this.premountMethodCalls.set("handleUnauthenticated",o)},this.on=(...o)=>{var l;if((l=this.clerkjs)!=null&&l.on)return this.clerkjs.on(...o);Je(this,Un).on(...o)},this.off=(...o)=>{var l;if((l=this.clerkjs)!=null&&l.off)return this.clerkjs.off(...o);Je(this,Un).off(...o)},this.addOnLoaded=o=>{this.loadedListeners.push(o),this.loaded&&this.emitLoaded()},this.emitLoaded=()=>{this.loadedListeners.forEach(o=>o()),this.loadedListeners=[]},this.beforeLoad=o=>{if(!o)throw new Error("Failed to hydrate latest Clerk JS")},this.hydrateClerkJS=o=>{var l,u;if(!o)throw new Error("Failed to hydrate latest Clerk JS");return this.clerkjs=o,this.premountMethodCalls.forEach(m=>m()),this.premountAddListenerCalls.forEach((m,p)=>{m.nativeUnsubscribe=o.addListener(p)}),(l=Je(this,Un).internal.retrieveListeners("status"))==null||l.forEach(m=>{this.on("status",m,{notify:!0})}),(u=Je(this,Un).internal.retrieveListeners("queryClientStatus"))==null||u.forEach(m=>{this.on("queryClientStatus",m,{notify:!0})}),this.preopenSignIn!==null&&o.openSignIn(this.preopenSignIn),this.preopenCheckout!==null&&o.__internal_openCheckout(this.preopenCheckout),this.preopenPlanDetails!==null&&o.__internal_openPlanDetails(this.preopenPlanDetails),this.preopenSubscriptionDetails!==null&&o.__internal_openSubscriptionDetails(this.preopenSubscriptionDetails),this.preopenSignUp!==null&&o.openSignUp(this.preopenSignUp),this.preopenUserProfile!==null&&o.openUserProfile(this.preopenUserProfile),this.preopenUserVerification!==null&&o.__internal_openReverification(this.preopenUserVerification),this.preopenOneTap!==null&&o.openGoogleOneTap(this.preopenOneTap),this.preopenOrganizationProfile!==null&&o.openOrganizationProfile(this.preopenOrganizationProfile),this.preopenCreateOrganization!==null&&o.openCreateOrganization(this.preopenCreateOrganization),this.preOpenWaitlist!==null&&o.openWaitlist(this.preOpenWaitlist),this.preopenEnableOrganizationsPrompt&&o.__internal_openEnableOrganizationsPrompt(this.preopenEnableOrganizationsPrompt),this.premountSignInNodes.forEach((m,p)=>{o.mountSignIn(p,m)}),this.premountSignUpNodes.forEach((m,p)=>{o.mountSignUp(p,m)}),this.premountUserProfileNodes.forEach((m,p)=>{o.mountUserProfile(p,m)}),this.premountUserAvatarNodes.forEach((m,p)=>{o.mountUserAvatar(p,m)}),this.premountUserButtonNodes.forEach((m,p)=>{o.mountUserButton(p,m)}),this.premountOrganizationListNodes.forEach((m,p)=>{o.mountOrganizationList(p,m)}),this.premountWaitlistNodes.forEach((m,p)=>{o.mountWaitlist(p,m)}),this.premountPricingTableNodes.forEach((m,p)=>{o.mountPricingTable(p,m)}),this.premountAPIKeysNodes.forEach((m,p)=>{o.mountAPIKeys(p,m)}),this.premountOAuthConsentNodes.forEach((m,p)=>{o.__internal_mountOAuthConsent(p,m)}),this.premountTaskChooseOrganizationNodes.forEach((m,p)=>{o.mountTaskChooseOrganization(p,m)}),this.premountTaskResetPasswordNodes.forEach((m,p)=>{o.mountTaskResetPassword(p,m)}),typeof this.clerkjs.status>"u"&&Je(this,Un).emit(Yl.Status,"ready"),this.emitLoaded(),this.clerkjs},this.__experimental_checkout=(...o)=>{var l;return(l=this.clerkjs)==null?void 0:l.__experimental_checkout(...o)},this.__unstable__updateProps=async o=>{const l=await Nh(this,Ja,lc).call(this);if(l&&"__unstable__updateProps"in l)return l.__unstable__updateProps(o)},this.setActive=o=>this.clerkjs?this.clerkjs.setActive(o):Promise.reject(),this.openSignIn=o=>{this.clerkjs&&this.loaded?this.clerkjs.openSignIn(o):this.preopenSignIn=o},this.closeSignIn=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignIn():this.preopenSignIn=null},this.__internal_openCheckout=o=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openCheckout(o):this.preopenCheckout=o},this.__internal_closeCheckout=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeCheckout():this.preopenCheckout=null},this.__internal_openPlanDetails=o=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openPlanDetails(o):this.preopenPlanDetails=o},this.__internal_closePlanDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closePlanDetails():this.preopenPlanDetails=null},this.__internal_openSubscriptionDetails=o=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openSubscriptionDetails(o):this.preopenSubscriptionDetails=o??null},this.__internal_closeSubscriptionDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeSubscriptionDetails():this.preopenSubscriptionDetails=null},this.__internal_openReverification=o=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openReverification(o):this.preopenUserVerification=o},this.__internal_closeReverification=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeReverification():this.preopenUserVerification=null},this.__internal_openEnableOrganizationsPrompt=o=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openEnableOrganizationsPrompt(o):this.preopenEnableOrganizationsPrompt=o},this.__internal_closeEnableOrganizationsPrompt=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeEnableOrganizationsPrompt():this.preopenEnableOrganizationsPrompt=null},this.openGoogleOneTap=o=>{this.clerkjs&&this.loaded?this.clerkjs.openGoogleOneTap(o):this.preopenOneTap=o},this.closeGoogleOneTap=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeGoogleOneTap():this.preopenOneTap=null},this.openUserProfile=o=>{this.clerkjs&&this.loaded?this.clerkjs.openUserProfile(o):this.preopenUserProfile=o},this.closeUserProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeUserProfile():this.preopenUserProfile=null},this.openOrganizationProfile=o=>{this.clerkjs&&this.loaded?this.clerkjs.openOrganizationProfile(o):this.preopenOrganizationProfile=o},this.closeOrganizationProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeOrganizationProfile():this.preopenOrganizationProfile=null},this.openCreateOrganization=o=>{this.clerkjs&&this.loaded?this.clerkjs.openCreateOrganization(o):this.preopenCreateOrganization=o},this.closeCreateOrganization=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeCreateOrganization():this.preopenCreateOrganization=null},this.openWaitlist=o=>{this.clerkjs&&this.loaded?this.clerkjs.openWaitlist(o):this.preOpenWaitlist=o},this.closeWaitlist=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeWaitlist():this.preOpenWaitlist=null},this.openSignUp=o=>{this.clerkjs&&this.loaded?this.clerkjs.openSignUp(o):this.preopenSignUp=o},this.closeSignUp=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignUp():this.preopenSignUp=null},this.mountSignIn=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignIn(o,l):this.premountSignInNodes.set(o,l)},this.unmountSignIn=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignIn(o):this.premountSignInNodes.delete(o)},this.mountSignUp=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignUp(o,l):this.premountSignUpNodes.set(o,l)},this.unmountSignUp=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignUp(o):this.premountSignUpNodes.delete(o)},this.mountUserAvatar=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserAvatar(o,l):this.premountUserAvatarNodes.set(o,l)},this.unmountUserAvatar=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserAvatar(o):this.premountUserAvatarNodes.delete(o)},this.mountUserProfile=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserProfile(o,l):this.premountUserProfileNodes.set(o,l)},this.unmountUserProfile=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserProfile(o):this.premountUserProfileNodes.delete(o)},this.mountOrganizationProfile=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationProfile(o,l):this.premountOrganizationProfileNodes.set(o,l)},this.unmountOrganizationProfile=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationProfile(o):this.premountOrganizationProfileNodes.delete(o)},this.mountCreateOrganization=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountCreateOrganization(o,l):this.premountCreateOrganizationNodes.set(o,l)},this.unmountCreateOrganization=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountCreateOrganization(o):this.premountCreateOrganizationNodes.delete(o)},this.mountOrganizationSwitcher=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationSwitcher(o,l):this.premountOrganizationSwitcherNodes.set(o,l)},this.unmountOrganizationSwitcher=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationSwitcher(o):this.premountOrganizationSwitcherNodes.delete(o)},this.__experimental_prefetchOrganizationSwitcher=()=>{const o=()=>{var l;return(l=this.clerkjs)==null?void 0:l.__experimental_prefetchOrganizationSwitcher()};this.clerkjs&&this.loaded?o():this.premountMethodCalls.set("__experimental_prefetchOrganizationSwitcher",o)},this.mountOrganizationList=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationList(o,l):this.premountOrganizationListNodes.set(o,l)},this.unmountOrganizationList=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationList(o):this.premountOrganizationListNodes.delete(o)},this.mountUserButton=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserButton(o,l):this.premountUserButtonNodes.set(o,l)},this.unmountUserButton=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserButton(o):this.premountUserButtonNodes.delete(o)},this.mountWaitlist=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountWaitlist(o,l):this.premountWaitlistNodes.set(o,l)},this.unmountWaitlist=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountWaitlist(o):this.premountWaitlistNodes.delete(o)},this.mountPricingTable=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountPricingTable(o,l):this.premountPricingTableNodes.set(o,l)},this.unmountPricingTable=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountPricingTable(o):this.premountPricingTableNodes.delete(o)},this.mountAPIKeys=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountAPIKeys(o,l):this.premountAPIKeysNodes.set(o,l)},this.unmountAPIKeys=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountAPIKeys(o):this.premountAPIKeysNodes.delete(o)},this.__internal_mountOAuthConsent=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_mountOAuthConsent(o,l):this.premountOAuthConsentNodes.set(o,l)},this.__internal_unmountOAuthConsent=o=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_unmountOAuthConsent(o):this.premountOAuthConsentNodes.delete(o)},this.mountTaskChooseOrganization=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountTaskChooseOrganization(o,l):this.premountTaskChooseOrganizationNodes.set(o,l)},this.unmountTaskChooseOrganization=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountTaskChooseOrganization(o):this.premountTaskChooseOrganizationNodes.delete(o)},this.mountTaskResetPassword=(o,l)=>{this.clerkjs&&this.loaded?this.clerkjs.mountTaskResetPassword(o,l):this.premountTaskResetPasswordNodes.set(o,l)},this.unmountTaskResetPassword=o=>{this.clerkjs&&this.loaded?this.clerkjs.unmountTaskResetPassword(o):this.premountTaskResetPasswordNodes.delete(o)},this.addListener=o=>{if(this.clerkjs)return this.clerkjs.addListener(o);{const l=()=>{var u;const m=this.premountAddListenerCalls.get(o);m&&((u=m.nativeUnsubscribe)==null||u.call(m),this.premountAddListenerCalls.delete(o))};return this.premountAddListenerCalls.set(o,{unsubscribe:l,nativeUnsubscribe:void 0}),l}},this.navigate=o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.navigate(o)};this.clerkjs&&this.loaded?l():this.premountMethodCalls.set("navigate",l)},this.redirectWithAuth=async(...o)=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.redirectWithAuth(...o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("redirectWithAuth",l)},this.redirectToSignIn=async o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.redirectToSignIn(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("redirectToSignIn",l)},this.redirectToSignUp=async o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.redirectToSignUp(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("redirectToSignUp",l)},this.redirectToUserProfile=async()=>{const o=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToUserProfile()};if(this.clerkjs&&this.loaded)return o();this.premountMethodCalls.set("redirectToUserProfile",o)},this.redirectToAfterSignUp=()=>{const o=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToAfterSignUp()};if(this.clerkjs&&this.loaded)return o();this.premountMethodCalls.set("redirectToAfterSignUp",o)},this.redirectToAfterSignIn=()=>{const o=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToAfterSignIn()};this.clerkjs&&this.loaded?o():this.premountMethodCalls.set("redirectToAfterSignIn",o)},this.redirectToAfterSignOut=()=>{const o=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToAfterSignOut()};this.clerkjs&&this.loaded?o():this.premountMethodCalls.set("redirectToAfterSignOut",o)},this.redirectToOrganizationProfile=async()=>{const o=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToOrganizationProfile()};if(this.clerkjs&&this.loaded)return o();this.premountMethodCalls.set("redirectToOrganizationProfile",o)},this.redirectToCreateOrganization=async()=>{const o=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToCreateOrganization()};if(this.clerkjs&&this.loaded)return o();this.premountMethodCalls.set("redirectToCreateOrganization",o)},this.redirectToWaitlist=async()=>{const o=()=>{var l;return(l=this.clerkjs)==null?void 0:l.redirectToWaitlist()};if(this.clerkjs&&this.loaded)return o();this.premountMethodCalls.set("redirectToWaitlist",o)},this.redirectToTasks=async o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.redirectToTasks(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("redirectToTasks",l)},this.handleRedirectCallback=async o=>{var l;const u=()=>{var m;return(m=this.clerkjs)==null?void 0:m.handleRedirectCallback(o)};this.clerkjs&&this.loaded?(l=u())==null||l.catch(()=>{}):this.premountMethodCalls.set("handleRedirectCallback",u)},this.handleGoogleOneTapCallback=async(o,l)=>{var u;const m=()=>{var p;return(p=this.clerkjs)==null?void 0:p.handleGoogleOneTapCallback(o,l)};this.clerkjs&&this.loaded?(u=m())==null||u.catch(()=>{}):this.premountMethodCalls.set("handleGoogleOneTapCallback",m)},this.handleEmailLinkVerification=async o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.handleEmailLinkVerification(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("handleEmailLinkVerification",l)},this.authenticateWithMetamask=async o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.authenticateWithMetamask(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("authenticateWithMetamask",l)},this.authenticateWithCoinbaseWallet=async o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.authenticateWithCoinbaseWallet(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("authenticateWithCoinbaseWallet",l)},this.authenticateWithBase=async o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.authenticateWithBase(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("authenticateWithBase",l)},this.authenticateWithOKXWallet=async o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.authenticateWithOKXWallet(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("authenticateWithOKXWallet",l)},this.authenticateWithSolana=async o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.authenticateWithSolana(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("authenticateWithSolana",l)},this.authenticateWithWeb3=async o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.authenticateWithWeb3(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("authenticateWithWeb3",l)},this.authenticateWithGoogleOneTap=async o=>(await Nh(this,Ja,lc).call(this)).authenticateWithGoogleOneTap(o),this.__internal_loadStripeJs=async()=>(await Nh(this,Ja,lc).call(this)).__internal_loadStripeJs(),this.createOrganization=async o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.createOrganization(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("createOrganization",l)},this.getOrganization=async o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.getOrganization(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("getOrganization",l)},this.joinWaitlist=async o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.joinWaitlist(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("joinWaitlist",l)},this.signOut=async(...o)=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.signOut(...o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("signOut",l)},this.__internal_attemptToEnableEnvironmentSetting=o=>{const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.__internal_attemptToEnableEnvironmentSetting(o)};if(this.clerkjs&&this.loaded)return l();this.premountMethodCalls.set("__internal_attemptToEnableEnvironmentSetting",l)};const{Clerk:n=null,publishableKey:i}=e||{};Tr(this,Gs,i),Tr(this,zi,e==null?void 0:e.proxyUrl),Tr(this,Li,e==null?void 0:e.domain),this.options=e,this.Clerk=n,this.mode=yc()?"browser":"server",Tr(this,oc,new GC(this)),this.options.sdkMetadata||(this.options.sdkMetadata=KC),Je(this,Un).emit(Yl.Status,"loading"),Je(this,Un).prioritizedOn(Yl.Status,o=>Tr(this,ac,o)),Je(this,Gs)&&this.loadClerkJS()}get publishableKey(){return Je(this,Gs)}get loaded(){var e;return((e=this.clerkjs)==null?void 0:e.loaded)||!1}get status(){var e;return this.clerkjs?((e=this.clerkjs)==null?void 0:e.status)||(this.clerkjs.loaded?"ready":"loading"):Je(this,ac)}static getOrCreateInstance(e){return(!yc()||!Je(this,Ks)||e.Clerk&&Je(this,Ks).Clerk!==e.Clerk||Je(this,Ks).publishableKey!==e.publishableKey)&&Tr(this,Ks,new Ab(e)),Je(this,Ks)}static clearInstance(){Tr(this,Ks,null)}get domain(){return typeof window<"u"&&window.location?Th(Je(this,Li),new URL(window.location.href),""):typeof Je(this,Li)=="function"?Dn.throw(Eh):Je(this,Li)||""}get proxyUrl(){return typeof window<"u"&&window.location?Th(Je(this,zi),new URL(window.location.href),""):typeof Je(this,zi)=="function"?Dn.throw(Eh):Je(this,zi)||""}__internal_getOption(e){var n,i;return(n=this.clerkjs)!=null&&n.__internal_getOption?(i=this.clerkjs)==null?void 0:i.__internal_getOption(e):this.options[e]}get sdkMetadata(){var e;return((e=this.clerkjs)==null?void 0:e.sdkMetadata)||this.options.sdkMetadata||void 0}get instanceType(){var e;return(e=this.clerkjs)==null?void 0:e.instanceType}get frontendApi(){var e;return((e=this.clerkjs)==null?void 0:e.frontendApi)||""}get isStandardBrowser(){var e;return((e=this.clerkjs)==null?void 0:e.isStandardBrowser)||this.options.standardBrowser||!1}get __internal_queryClient(){var e;return(e=this.clerkjs)==null?void 0:e.__internal_queryClient}get isSatellite(){return typeof window<"u"&&window.location?Th(this.options.isSatellite,new URL(window.location.href),!1):typeof this.options.isSatellite=="function"?Dn.throw(Eh):!1}async loadClerkJS(){var e;if(!(this.mode!=="browser"||this.loaded)){typeof window<"u"&&(window.__clerk_publishable_key=Je(this,Gs),window.__clerk_proxy_url=this.proxyUrl,window.__clerk_domain=this.domain);try{if(this.Clerk){let n;sC(this.Clerk)?(n=new this.Clerk(Je(this,Gs),{proxyUrl:this.proxyUrl,domain:this.domain}),this.beforeLoad(n),await n.load(this.options)):(n=this.Clerk,n.loaded||(this.beforeLoad(n),await n.load(this.options))),global.Clerk=n}else if(!__BUILD_DISABLE_RHC__){if(global.Clerk||await IC({...this.options,publishableKey:Je(this,Gs),proxyUrl:this.proxyUrl,domain:this.domain,nonce:this.options.nonce}),!global.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");this.beforeLoad(global.Clerk),await global.Clerk.load(this.options)}return(e=global.Clerk)!=null&&e.loaded?this.hydrateClerkJS(global.Clerk):void 0}catch(n){const i=n;Je(this,Un).emit(Yl.Status,"error"),console.error(i.stack||i.message||i);return}}}get version(){var e;return(e=this.clerkjs)==null?void 0:e.version}get client(){if(this.clerkjs)return this.clerkjs.client}get session(){if(this.clerkjs)return this.clerkjs.session}get user(){if(this.clerkjs)return this.clerkjs.user}get organization(){if(this.clerkjs)return this.clerkjs.organization}get telemetry(){if(this.clerkjs)return this.clerkjs.telemetry}get __unstable__environment(){if(this.clerkjs)return this.clerkjs.__unstable__environment}get isSignedIn(){return this.clerkjs?this.clerkjs.isSignedIn:!1}get billing(){var e;return(e=this.clerkjs)==null?void 0:e.billing}get __internal_state(){return this.loaded&&this.clerkjs?this.clerkjs.__internal_state:Je(this,oc)}get apiKeys(){var e;return(e=this.clerkjs)==null?void 0:e.apiKeys}__unstable__setEnvironment(...e){if(this.clerkjs&&"__unstable__setEnvironment"in this.clerkjs)this.clerkjs.__unstable__setEnvironment(e);else return}};ac=new WeakMap;Li=new WeakMap;zi=new WeakMap;Gs=new WeakMap;Un=new WeakMap;oc=new WeakMap;Ks=new WeakMap;Ja=new WeakSet;lc=function(){return new Promise(r=>{this.addOnLoaded(()=>r(this.clerkjs))})};Vs(kb,Ks);var B0=kb;function FC(r){const{isomorphicClerkOptions:e,initialState:n,children:i}=r,{isomorphicClerk:o,clerkStatus:l}=WC(e),[u,m]=P.useState({client:o.client,session:o.session,user:o.user,organization:o.organization});P.useEffect(()=>o.addListener(Ce=>m({...Ce})),[]);const p=LC(o.loaded,u,n),g=P.useMemo(()=>({value:o}),[l]),v=P.useMemo(()=>({value:u.client}),[u.client]),{sessionId:b,sessionStatus:_,sessionClaims:x,session:S,userId:T,user:C,orgId:j,actor:U,organization:M,orgRole:V,orgSlug:G,orgPermissions:Y,factorVerificationAge:F}=p,ye=P.useMemo(()=>({value:{sessionId:b,sessionStatus:_,sessionClaims:x,userId:T,actor:U,orgId:j,orgRole:V,orgSlug:G,orgPermissions:Y,factorVerificationAge:F}}),[b,_,T,U,j,V,G,F,x==null?void 0:x.__raw]),X=P.useMemo(()=>({value:S}),[b,S]),be=P.useMemo(()=>({value:C}),[T,C]),fe=P.useMemo(()=>({value:{organization:M}}),[j,M]);return P.createElement(DT.Provider,{value:g},P.createElement(_T.Provider,{value:v},P.createElement(ST.Provider,{value:X},P.createElement(kT,{...fe.value},P.createElement(IT.Provider,{value:ye},P.createElement(wT.Provider,{value:be},P.createElement(TT,{value:void 0},i)))))))}var WC=r=>{const e=P.useRef(B0.getOrCreateInstance(r)),[n,i]=P.useState(e.current.status);return P.useEffect(()=>{e.current.__unstable__updateProps({appearance:r.appearance})},[r.appearance]),P.useEffect(()=>{e.current.__unstable__updateProps({options:r})},[r.localization]),P.useEffect(()=>(e.current.on("status",i),()=>{e.current&&e.current.off("status",i),B0.clearInstance()}),[]),{isomorphicClerk:e.current,clerkStatus:n}};function YC(r){const{initialState:e,children:n,__internal_bypassMissingPublishableKey:i,...o}=r,{publishableKey:l="",Clerk:u}=o;return!u&&!i&&(l?l&&!Qh(l)&&Dn.throwInvalidPublishableKeyError({key:l}):Dn.throwMissingPublishableKeyError()),P.createElement(FC,{initialState:e,isomorphicClerkOptions:o},n)}var jb=iC(YC,"ClerkProvider",MT);jb.displayName="ClerkProvider";UT({packageName:"@clerk/clerk-react"});RC("@clerk/clerk-react");var lf=function(r,e){return lf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},lf(r,e)};function Nb(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");lf(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var vc=function(){return vc=Object.assign||function(e){for(var n,i=1,o=arguments.length;i<o;i++){n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},vc.apply(this,arguments)};function Zi(r,e){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(n[i[o]]=r[i[o]]);return n}function Ob(r,e,n,i){var o=arguments.length,l=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,e,n,i);else for(var m=r.length-1;m>=0;m--)(u=r[m])&&(l=(o<3?u(l):o>3?u(e,n,l):u(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l}function Rb(r,e){return function(n,i){e(n,i,r)}}function Ub(r,e,n,i,o,l){function u(j){if(j!==void 0&&typeof j!="function")throw new TypeError("Function expected");return j}for(var m=i.kind,p=m==="getter"?"get":m==="setter"?"set":"value",g=!e&&r?i.static?r:r.prototype:null,v=e||(g?Object.getOwnPropertyDescriptor(g,i.name):{}),b,_=!1,x=n.length-1;x>=0;x--){var S={};for(var T in i)S[T]=T==="access"?{}:i[T];for(var T in i.access)S.access[T]=i.access[T];S.addInitializer=function(j){if(_)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(j||null))};var C=(0,n[x])(m==="accessor"?{get:v.get,set:v.set}:v[p],S);if(m==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(b=u(C.get))&&(v.get=b),(b=u(C.set))&&(v.set=b),(b=u(C.init))&&o.unshift(b)}else(b=u(C))&&(m==="field"?o.unshift(b):v[p]=b)}g&&Object.defineProperty(g,i.name,v),_=!0}function Ib(r,e,n){for(var i=arguments.length>2,o=0;o<e.length;o++)n=i?e[o].call(r,n):e[o].call(r);return i?n:void 0}function Db(r){return typeof r=="symbol"?r:"".concat(r)}function Mb(r,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function Pb(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function ne(r,e,n,i){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function m(v){try{g(i.next(v))}catch(b){u(b)}}function p(v){try{g(i.throw(v))}catch(b){u(b)}}function g(v){v.done?l(v.value):o(v.value).then(m,p)}g((i=i.apply(r,e||[])).next())})}function Lb(r,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=m(0),u.throw=m(1),u.return=m(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function m(g){return function(v){return p([g,v])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,g[0]&&(n=0)),n;)try{if(i=1,o&&(l=g[0]&2?o.return:g[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,g[1])).done)return l;switch(o=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,o=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(r,n)}catch(v){g=[6,v],o=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var Vc=Object.create?(function(r,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(r,i,o)}):(function(r,e,n,i){i===void 0&&(i=n),r[i]=e[n]});function zb(r,e){for(var n in r)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Vc(e,r,n)}function bc(r){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&r[e],i=0;if(n)return n.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bf(r,e){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var i=n.call(r),o,l=[],u;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(m){u={error:m}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(u)throw u.error}}return l}function Bb(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Bf(arguments[e]));return r}function qb(){for(var r=0,e=0,n=arguments.length;e<n;e++)r+=arguments[e].length;for(var i=Array(r),o=0,e=0;e<n;e++)for(var l=arguments[e],u=0,m=l.length;u<m;u++,o++)i[o]=l[u];return i}function Hb(r,e,n){if(n||arguments.length===2)for(var i=0,o=e.length,l;i<o;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return r.concat(l||Array.prototype.slice.call(e))}function Yi(r){return this instanceof Yi?(this.v=r,this):new Yi(r)}function $b(r,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(r,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(x){return function(S){return Promise.resolve(S).then(x,b)}}function m(x,S){i[x]&&(o[x]=function(T){return new Promise(function(C,j){l.push([x,T,C,j])>1||p(x,T)})},S&&(o[x]=S(o[x])))}function p(x,S){try{g(i[x](S))}catch(T){_(l[0][3],T)}}function g(x){x.value instanceof Yi?Promise.resolve(x.value.v).then(v,b):_(l[0][2],x)}function v(x){p("next",x)}function b(x){p("throw",x)}function _(x,S){x(S),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Vb(r){var e,n;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,l){e[o]=r[o]?function(u){return(n=!n)?{value:Yi(r[o](u)),done:!1}:l?l(u):u}:l}}function Gb(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],n;return e?e.call(r):(r=typeof bc=="function"?bc(r):r[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(l){n[l]=r[l]&&function(u){return new Promise(function(m,p){u=r[l](u),o(m,p,u.done,u.value)})}}function o(l,u,m,p){Promise.resolve(p).then(function(g){l({value:g,done:m})},u)}}function Kb(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var JC=Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e},cf=function(r){return cf=Object.getOwnPropertyNames||function(e){var n=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[n.length]=i);return n},cf(r)};function Fb(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n=cf(r),i=0;i<n.length;i++)n[i]!=="default"&&Vc(e,r,n[i]);return JC(e,r),e}function Wb(r){return r&&r.__esModule?r:{default:r}}function Yb(r,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(r):i?i.value:e.get(r)}function Jb(r,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!o:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(r,n):o?o.value=n:e.set(r,n),n}function Xb(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function Qb(r,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var i,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=e[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose],n&&(o=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");o&&(i=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),r.stack.push({value:e,dispose:i,async:n})}else n&&r.stack.push({async:!0});return e}var XC=typeof SuppressedError=="function"?SuppressedError:function(r,e,n){var i=new Error(n);return i.name="SuppressedError",i.error=r,i.suppressed=e,i};function Zb(r){function e(l){r.error=r.hasError?new XC(l,r.error,"An error was suppressed during disposal."):l,r.hasError=!0}var n,i=0;function o(){for(;n=r.stack.pop();)try{if(!n.async&&i===1)return i=0,r.stack.push(n),Promise.resolve().then(o);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(l).then(o,function(u){return e(u),o()})}else i|=1}catch(u){e(u)}if(i===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return o()}function ew(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,i,o,l,u){return i?e?".jsx":".js":o&&(!l||!u)?n:o+l+"."+u.toLowerCase()+"js"}):r}const QC={__extends:Nb,__assign:vc,__rest:Zi,__decorate:Ob,__param:Rb,__esDecorate:Ub,__runInitializers:Ib,__propKey:Db,__setFunctionName:Mb,__metadata:Pb,__awaiter:ne,__generator:Lb,__createBinding:Vc,__exportStar:zb,__values:bc,__read:Bf,__spread:Bb,__spreadArrays:qb,__spreadArray:Hb,__await:Yi,__asyncGenerator:$b,__asyncDelegator:Vb,__asyncValues:Gb,__makeTemplateObject:Kb,__importStar:Fb,__importDefault:Wb,__classPrivateFieldGet:Yb,__classPrivateFieldSet:Jb,__classPrivateFieldIn:Xb,__addDisposableResource:Qb,__disposeResources:Zb,__rewriteRelativeImportExtension:ew},ZC=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Qb,get __assign(){return vc},__asyncDelegator:Vb,__asyncGenerator:$b,__asyncValues:Gb,__await:Yi,__awaiter:ne,__classPrivateFieldGet:Yb,__classPrivateFieldIn:Xb,__classPrivateFieldSet:Jb,__createBinding:Vc,__decorate:Ob,__disposeResources:Zb,__esDecorate:Ub,__exportStar:zb,__extends:Nb,__generator:Lb,__importDefault:Wb,__importStar:Fb,__makeTemplateObject:Kb,__metadata:Pb,__param:Rb,__propKey:Db,__read:Bf,__rest:Zi,__rewriteRelativeImportExtension:ew,__runInitializers:Ib,__setFunctionName:Mb,__spread:Bb,__spreadArray:Hb,__spreadArrays:qb,__values:bc,default:QC},Symbol.toStringTag,{value:"Module"})),e1=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class Gc extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class tw extends Gc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class uf extends Gc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class df extends Gc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var wc;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(wc||(wc={}));class t1{constructor(e,{headers:n={},customFetch:i,region:o=wc.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=e1(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ne(this,arguments,void 0,function*(n,i={}){var o;let l,u;try{const{headers:m,method:p,body:g,signal:v,timeout:b}=i;let _={},{region:x}=i;x||(x=this.region);const S=new URL(`${this.url}/${n}`);x&&x!=="any"&&(_["x-region"]=x,S.searchParams.set("forceFunctionRegion",x));let T;g&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",T=g):typeof g=="string"?(_["Content-Type"]="text/plain",T=g):typeof FormData<"u"&&g instanceof FormData?T=g:(_["Content-Type"]="application/json",T=JSON.stringify(g)):T=g;let C=v;b&&(u=new AbortController,l=setTimeout(()=>u.abort(),b),v?(C=u.signal,v.addEventListener("abort",()=>u.abort())):C=u.signal);const j=yield this.fetch(S.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),m),body:T,signal:C}).catch(G=>{throw new tw(G)}),U=j.headers.get("x-relay-error");if(U&&U==="true")throw new uf(j);if(!j.ok)throw new df(j);let M=((o=j.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),V;return M==="application/json"?V=yield j.json():M==="application/octet-stream"||M==="application/pdf"?V=yield j.blob():M==="text/event-stream"?V=j:M==="multipart/form-data"?V=yield j.formData():V=yield j.text(),{data:V,error:null,response:j}}catch(m){return{data:null,error:m,response:m instanceof df||m instanceof uf?m.context:void 0}}finally{l&&clearTimeout(l)}})}}var At={};const ea=SE(ZC);var Jl={},Xl={},Ql={},Zl={},ec={},tc={},q0;function nw(){if(q0)return tc;q0=1,Object.defineProperty(tc,"__esModule",{value:!0});class r extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return tc.default=r,tc}var H0;function sw(){if(H0)return ec;H0=1,Object.defineProperty(ec,"__esModule",{value:!0});const e=ea.__importDefault(nw());class n{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let m=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,v,b,_;let x=null,S=null,T=null,C=p.status,j=p.statusText;if(p.ok){if(this.method!=="HEAD"){const G=await p.text();G===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?S=G:S=JSON.parse(G))}const M=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),V=(b=p.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");M&&V&&V.length>1&&(T=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(x={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,T=null,C=406,j="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const M=await p.text();try{x=JSON.parse(M),Array.isArray(x)&&p.status===404&&(S=[],x=null,C=200,j="OK")}catch{p.status===404&&M===""?(C=204,j="No Content"):x={message:M}}if(x&&this.isMaybeSingle&&(!((_=x==null?void 0:x.details)===null||_===void 0)&&_.includes("0 rows"))&&(x=null,C=200,j="OK"),x&&this.shouldThrowOnError)throw new e.default(x)}return{error:x,data:S,count:T,status:C,statusText:j}});return this.shouldThrowOnError||(m=m.catch(p=>{var g,v,b,_,x,S;let T="";const C=p==null?void 0:p.cause;if(C){const j=(g=C==null?void 0:C.message)!==null&&g!==void 0?g:"",U=(v=C==null?void 0:C.code)!==null&&v!==void 0?v:"";T=`${(b=p==null?void 0:p.name)!==null&&b!==void 0?b:"FetchError"}: ${p==null?void 0:p.message}`,T+=`

Caused by: ${(_=C==null?void 0:C.name)!==null&&_!==void 0?_:"Error"}: ${j}`,U&&(T+=` (${U})`),C!=null&&C.stack&&(T+=`
${C.stack}`)}else T=(x=p==null?void 0:p.stack)!==null&&x!==void 0?x:"";return{error:{message:`${(S=p==null?void 0:p.name)!==null&&S!==void 0?S:"FetchError"}: ${p==null?void 0:p.message}`,details:T,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),m.then(o,l)}returns(){return this}overrideTypes(){return this}}return ec.default=n,ec}var $0;function rw(){if($0)return Zl;$0=1,Object.defineProperty(Zl,"__esModule",{value:!0});const e=ea.__importDefault(sw());class n extends e.default{select(o){let l=!1;const u=(o??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:u,foreignTable:m,referencedTable:p=m}={}){const g=p?`${p}.order`:"order",v=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${v?`${v},`:""}${o}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:u=l}={}){const m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(m,`${o}`),this}range(o,l,{foreignTable:u,referencedTable:m=u}={}){const p=typeof m>"u"?"offset":`${m}.offset`,g=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(g,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:u=!1,buffers:m=!1,wal:p=!1,format:g="text"}={}){var v;const b=[o?"analyze":null,l?"verbose":null,u?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),_=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${_}"; options=${b};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return Zl.default=n,Zl}var V0;function qf(){if(V0)return Ql;V0=1,Object.defineProperty(Ql,"__esModule",{value:!0});const e=ea.__importDefault(rw()),n=new RegExp("[,()]");class i extends e.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}regexMatch(l,u){return this.url.searchParams.append(l,`match.${u}`),this}regexIMatch(l,u){return this.url.searchParams.append(l,`imatch.${u}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}isDistinct(l,u){return this.url.searchParams.append(l,`isdistinct.${u}`),this}in(l,u){const m=Array.from(new Set(u)).map(p=>typeof p=="string"&&n.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(l,`in.(${m})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:m,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const v=m===void 0?"":`(${m})`;return this.url.searchParams.append(l,`${g}fts${v}.${u}`),this}match(l){return Object.entries(l).forEach(([u,m])=>{this.url.searchParams.append(u,`eq.${m}`)}),this}not(l,u,m){return this.url.searchParams.append(l,`not.${u}.${m}`),this}or(l,{foreignTable:u,referencedTable:m=u}={}){const p=m?`${m}.or`:"or";return this.url.searchParams.append(p,`(${l})`),this}filter(l,u,m){return this.url.searchParams.append(l,`${u}.${m}`),this}}return Ql.default=i,Ql}var G0;function iw(){if(G0)return Xl;G0=1,Object.defineProperty(Xl,"__esModule",{value:!0});const e=ea.__importDefault(qf());class n{constructor(o,{headers:l={},schema:u,fetch:m}){this.url=o,this.headers=new Headers(l),this.schema=u,this.fetch=m}select(o,l){const{head:u=!1,count:m}=l??{},p=u?"HEAD":"GET";let g=!1;const v=(o??"*").split("").map(b=>/\s/.test(b)&&!g?"":(b==='"'&&(g=!g),b)).join("");return this.url.searchParams.set("select",v),m&&this.headers.append("Prefer",`count=${m}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:u=!0}={}){var m;const p="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const g=o.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(g.length>0){const v=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:u=!1,count:m,defaultToNull:p=!0}={}){var g;const v="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const b=o.reduce((_,x)=>_.concat(Object.keys(x)),[]);if(b.length>0){const _=[...new Set(b)].map(x=>`"${x}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(o,{count:l}={}){var u;const m="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var l;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Xl.default=n,Xl}var K0;function n1(){if(K0)return Jl;K0=1,Object.defineProperty(Jl,"__esModule",{value:!0});const r=ea,e=r.__importDefault(iw()),n=r.__importDefault(qf());class i{constructor(l,{headers:u={},schema:m,fetch:p}={}){this.url=l,this.headers=new Headers(u),this.schemaName=m,this.fetch=p}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new i(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:m=!1,get:p=!1,count:g}={}){var v;let b;const _=new URL(`${this.url}/rpc/${l}`);let x;m||p?(b=m?"HEAD":"GET",Object.entries(u).filter(([T,C])=>C!==void 0).map(([T,C])=>[T,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([T,C])=>{_.searchParams.append(T,C)})):(b="POST",x=u);const S=new Headers(this.headers);return g&&S.set("Prefer",`count=${g}`),new n.default({method:b,url:_,headers:S,schema:this.schemaName,body:x,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Jl.default=i,Jl}var F0;function s1(){if(F0)return At;F0=1,Object.defineProperty(At,"__esModule",{value:!0}),At.PostgrestError=At.PostgrestBuilder=At.PostgrestTransformBuilder=At.PostgrestFilterBuilder=At.PostgrestQueryBuilder=At.PostgrestClient=void 0;const r=ea,e=r.__importDefault(n1());At.PostgrestClient=e.default;const n=r.__importDefault(iw());At.PostgrestQueryBuilder=n.default;const i=r.__importDefault(qf());At.PostgrestFilterBuilder=i.default;const o=r.__importDefault(rw());At.PostgrestTransformBuilder=o.default;const l=r.__importDefault(sw());At.PostgrestBuilder=l.default;const u=r.__importDefault(nw());return At.PostgrestError=u.default,At.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default},At}var aw=s1();const ow=If(aw),r1=xE({__proto__:null,default:ow},[aw]),{PostgrestClient:i1,PostgrestQueryBuilder:vI,PostgrestFilterBuilder:bI,PostgrestTransformBuilder:wI,PostgrestBuilder:_I,PostgrestError:a1}=ow||r1;class lw{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const o1="2.87.3",l1=`realtime-js/${o1}`,cw="1.0.0",c1="2.0.0",W0=cw,hf=1e4,u1=1e3,d1=100;var Ur;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Ur||(Ur={}));var lt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(lt||(lt={}));var _n;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(_n||(_n={}));var ff;(function(r){r.websocket="websocket"})(ff||(ff={}));var Ir;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ir||(Ir={}));class h1{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,i;const o=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var n,i;const o=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,n,i){var o,l;const u=e.topic,m=(o=e.ref)!==null&&o!==void 0?o:"",p=(l=e.join_ref)!==null&&l!==void 0?l:"",g=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},b=Object.keys(v).length===0?"":JSON.stringify(v);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+m.length+u.length+g.length+b.length,x=new ArrayBuffer(this.HEADER_LENGTH+_);let S=new DataView(x),T=0;S.setUint8(T++,this.KINDS.userBroadcastPush),S.setUint8(T++,p.length),S.setUint8(T++,m.length),S.setUint8(T++,u.length),S.setUint8(T++,g.length),S.setUint8(T++,b.length),S.setUint8(T++,n),Array.from(p,j=>S.setUint8(T++,j.charCodeAt(0))),Array.from(m,j=>S.setUint8(T++,j.charCodeAt(0))),Array.from(u,j=>S.setUint8(T++,j.charCodeAt(0))),Array.from(g,j=>S.setUint8(T++,j.charCodeAt(0))),Array.from(b,j=>S.setUint8(T++,j.charCodeAt(0)));var C=new Uint8Array(x.byteLength+i.byteLength);return C.set(new Uint8Array(x),0),C.set(new Uint8Array(i),x.byteLength),C.buffer}decode(e,n){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return n(i)}if(typeof e=="string"){const i=JSON.parse(e),[o,l,u,m,p]=i;return n({join_ref:o,ref:l,topic:u,event:m,payload:p})}return n({})}_binaryDecode(e){const n=new DataView(e),i=n.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,o)}}_decodeUserBroadcast(e,n,i){const o=n.getUint8(1),l=n.getUint8(2),u=n.getUint8(3),m=n.getUint8(4);let p=this.HEADER_LENGTH+4;const g=i.decode(e.slice(p,p+o));p=p+o;const v=i.decode(e.slice(p,p+l));p=p+l;const b=i.decode(e.slice(p,p+u));p=p+u;const _=e.slice(p,e.byteLength),x=m===this.JSON_ENCODING?JSON.parse(i.decode(_)):_,S={type:this.BROADCAST_EVENT,event:v,payload:x};return u>0&&(S.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>n.includes(i)))}}class uw{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Ke||(Ke={}));const Y0=(r,e,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=f1(u,r,e,o),l),{}):{}},f1=(r,e,n,i)=>{const o=e.find(m=>m.name===r),l=o==null?void 0:o.type,u=n[r];return l&&!i.includes(l)?dw(l,u):mf(u)},dw=(r,e)=>{if(r.charAt(0)==="_"){const n=r.slice(1,r.length);return y1(e,n)}switch(r){case Ke.bool:return m1(e);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return p1(e);case Ke.json:case Ke.jsonb:return g1(e);case Ke.timestamp:return v1(e);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return mf(e);default:return mf(e)}},mf=r=>r,m1=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},p1=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},g1=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},y1=(r,e)=>{if(typeof r!="string")return r;const n=r.length-1,i=r[n];if(r[0]==="{"&&i==="}"){let l;const u=r.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(m=>dw(e,m))}return r},v1=r=>typeof r=="string"?r.replace(" ","T"):r,hw=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Oh{constructor(e,n,i={},o=hf){this.channel=e,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var pf;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(pf||(pf={}));class $i{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:u,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$i.syncState(this.state,o,l,u),this.pendingDiffs.forEach(p=>{this.state=$i.syncDiff(this.state,p,l,u)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=$i.syncDiff(this.state,o,l,u),m())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,o){const l=this.cloneDeep(e),u=this.transformState(n),m={},p={};return this.map(l,(g,v)=>{u[g]||(p[g]=v)}),this.map(u,(g,v)=>{const b=l[g];if(b){const _=v.map(C=>C.presence_ref),x=b.map(C=>C.presence_ref),S=v.filter(C=>x.indexOf(C.presence_ref)<0),T=b.filter(C=>_.indexOf(C.presence_ref)<0);S.length>0&&(m[g]=S),T.length>0&&(p[g]=T)}else m[g]=v}),this.syncDiff(l,{joins:m,leaves:p},i,o)}static syncDiff(e,n,i,o){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(m,p)=>{var g;const v=(g=e[m])!==null&&g!==void 0?g:[];if(e[m]=this.cloneDeep(p),v.length>0){const b=e[m].map(x=>x.presence_ref),_=v.filter(x=>b.indexOf(x.presence_ref)<0);e[m].unshift(..._)}i(m,v,p)}),this.map(u,(m,p)=>{let g=e[m];if(!g)return;const v=p.map(b=>b.presence_ref);g=g.filter(b=>v.indexOf(b.presence_ref)<0),e[m]=g,o(m,g,p),g.length===0&&delete e[m]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const o=e[i];return"metas"in o?n[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[i]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gf;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(gf||(gf={}));var Vi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Vi||(Vi={}));var In;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(In||(In={}));const b1=lt;class Dr{constructor(e,n={config:{}},i){var o,l;if(this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Oh(this,_n.join,this.params,this.timeout),this.rejoinTimer=new uw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=lt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_n.reply,{},(u,m)=>{this._trigger(this._replyEventName(m),u)}),this.presence=new $i(this),this.broadcastEndpointURL=hw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var i,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==lt.closed){const{config:{broadcast:u,presence:m,private:p}}=this.params,g=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(x=>x.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[Vi.PRESENCE]&&this.bindings[Vi.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,b={},_={broadcast:u,presence:Object.assign(Object.assign({},m),{enabled:v}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(x=>e==null?void 0:e(In.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(In.CLOSED)),this.updateJoinPayload(Object.assign({config:_},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){e==null||e(In.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,C=(S=T==null?void 0:T.length)!==null&&S!==void 0?S:0,j=[];for(let U=0;U<C;U++){const M=T[U],{filter:{event:V,schema:G,table:Y,filter:F}}=M,ye=x&&x[U];if(ye&&ye.event===V&&Dr.isFilterValueEqual(ye.schema,G)&&Dr.isFilterValueEqual(ye.table,Y)&&Dr.isFilterValueEqual(ye.filter,F))j.push(Object.assign(Object.assign({},M),{id:ye.id}));else{this.unsubscribe(),this.state=lt.errored,e==null||e(In.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,e&&e(In.SUBSCRIBED);return}}).receive("error",x=>{this.state=lt.errored,e==null||e(In.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(In.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===lt.joined&&e===Vi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,i)}async httpSend(e,n,i={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const g=await m.json();p=g.error||g.message||p}catch{}return Promise.reject(new Error(p))}async send(e,n={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=e,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,m,p;const g=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(m=(u=this.params)===null||u===void 0?void 0:u.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),g.receive("ok",()=>l("ok")),g.receive("error",()=>l("error")),g.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=lt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_n.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Oh(this,_n.leave,{},e),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=lt.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),u}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Oh(this,e,n,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>d1){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var o,l;const u=e.toLocaleLowerCase(),{close:m,error:p,leave:g,join:v}=_n;if(i&&[m,p,g,v].indexOf(u)>=0&&i!==this._joinRef())return;let _=this._onMessage(u,n,i);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(x=>{var S,T,C;return((S=x.filter)===null||S===void 0?void 0:S.event)==="*"||((C=(T=x.filter)===null||T===void 0?void 0:T.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(x=>x.callback(_,i)):(l=this.bindings[u])===null||l===void 0||l.filter(x=>{var S,T,C,j,U,M;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in x){const V=x.id,G=(S=x.filter)===null||S===void 0?void 0:S.event;return V&&((T=n.ids)===null||T===void 0?void 0:T.includes(V))&&(G==="*"||(G==null?void 0:G.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const V=(U=(j=x==null?void 0:x.filter)===null||j===void 0?void 0:j.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return V==="*"||V===((M=n==null?void 0:n.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===u}).map(x=>{if(typeof _=="object"&&"ids"in _){const S=_.data,{schema:T,table:C,commit_timestamp:j,type:U,errors:M}=S;_=Object.assign(Object.assign({},{schema:T,table:C,commit_timestamp:j,eventType:U,new:{},old:{},errors:M}),this._getPayloadRecords(S))}x.callback(_,i)})}_isClosed(){return this.state===lt.closed}_isJoined(){return this.state===lt.joined}_isJoining(){return this.state===lt.joining}_isLeaving(){return this.state===lt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const o=e.toLocaleLowerCase(),l={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Dr.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(_n.close,{},e)}_onError(e){this._on(_n.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=lt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Y0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Y0(e.columns,e.old_record)),n}}const Rh=()=>{},nc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},w1=[1e3,2e3,5e3,1e4],_1=1e4,x1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fw{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hf,this.transport=null,this.heartbeatIntervalMs=nc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Rh,this.ref=0,this.reconnectTimer=null,this.vsn=W0,this.logger=Rh,this.conn=null,this.sendBuffer=[],this.serializer=new h1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${ff.websocket}`,this.httpEndpoint=hw(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=lw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ur.connecting:return Ir.Connecting;case Ur.open:return Ir.Open;case Ur.closing:return Ir.Closing;default:return Ir.Closed}}isConnected(){return this.connectionState()===Ir.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new Dr(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:i,payload:o,ref:l}=e,u=()=>{this.encode(e,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${n} ${i} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(u1,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},nc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:l,ref:u}=n,m=u?`(${u})`:"",p=l.status||"";this.log("receive",`${p} ${i} ${o} ${m}`.trim(),l),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(o,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ur.open||this.conn.readyState===Ur.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(_n.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${i}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([x1],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,i=!1;if(e)n=e,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const l={access_token:n,version:l1};n&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(_n.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new uw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},nc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,o,l,u,m,p,g,v,b,_,x;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:hf,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:nc.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(m=e==null?void 0:e.heartbeatCallback)!==null&&m!==void 0?m:Rh,this.vsn=(p=e==null?void 0:e.vsn)!==null&&p!==void 0?p:W0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:(S=>w1[S-1]||_1),this.vsn){case cw:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((S,T)=>T(JSON.stringify(S))),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:((S,T)=>T(JSON.parse(S)));break;case c1:this.encode=(_=e==null?void 0:e.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(x=e==null?void 0:e.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Kc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ze(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class S1 extends Kc{constructor(e,n,i){super(e),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yf extends Kc{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Hf=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),E1=()=>Response,vf=r=>{if(Array.isArray(r))return r.map(n=>vf(n));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=vf(i)}),e},T1=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},C1=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r),Uh=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},k1=(r,e,n)=>ne(void 0,void 0,void 0,function*(){const i=yield E1();r instanceof i&&!(n!=null&&n.noResolveJson)?r.json().then(o=>{const l=r.status||500,u=(o==null?void 0:o.statusCode)||l+"";e(new S1(Uh(o),l,u))}).catch(o=>{e(new yf(Uh(o),o))}):e(new yf(Uh(r),r))}),A1=(r,e,n,i)=>{const o={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!i?o:(T1(i)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(i)):o.body=i,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function yo(r,e,n,i,o,l){return ne(this,void 0,void 0,function*(){return new Promise((u,m)=>{r(n,A1(e,i,o,l)).then(p=>{if(!p.ok)throw p;return i!=null&&i.noResolveJson?p:p.json()}).then(p=>u(p)).catch(p=>k1(p,m,i))})})}function oo(r,e,n,i){return ne(this,void 0,void 0,function*(){return yo(r,"GET",e,n,i)})}function wn(r,e,n,i,o){return ne(this,void 0,void 0,function*(){return yo(r,"POST",e,i,o,n)})}function bf(r,e,n,i,o){return ne(this,void 0,void 0,function*(){return yo(r,"PUT",e,i,o,n)})}function j1(r,e,n,i){return ne(this,void 0,void 0,function*(){return yo(r,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function $f(r,e,n,i,o){return ne(this,void 0,void 0,function*(){return yo(r,"DELETE",e,i,o,n)})}class N1{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ne(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}}var mw;class O1{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[mw]="BlobDownloadBuilder",this.promise=null}asStream(){return new N1(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ne(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}}mw=Symbol.toStringTag;const R1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},J0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class U1{constructor(e,n={},i,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=i,this.fetch=Hf(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,i,o){return ne(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},J0),o);let m=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const p=u.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),p&&l.append("metadata",this.encodeMetadata(p)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),p&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(p))):(l=i,m["cache-control"]=`max-age=${u.cacheControl}`,m["content-type"]=u.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),o!=null&&o.headers&&(m=Object.assign(Object.assign({},m),o.headers));const g=this._removeEmptyFolders(n),v=this._getFinalPath(g),b=yield(e=="PUT"?bf:wn)(this.fetch,`${this.url}/object/${v}`,l,Object.assign({headers:m},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:g,id:b.Id,fullPath:b.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}upload(e,n,i){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,o){return ne(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),m=new URL(this.url+`/object/upload/sign/${u}`);m.searchParams.set("token",n);try{let p;const g=Object.assign({upsert:J0.upsert},o),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",g.cacheControl)):(p=i,v["cache-control"]=`max-age=${g.cacheControl}`,v["content-type"]=g.contentType);const b=yield bf(this.fetch,m.toString(),p,{headers:v});return{data:{path:l,fullPath:b.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Ze(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,n){return ne(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const l=yield wn(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(this.url+l.url),m=u.searchParams.get("token");if(!m)throw new Kc("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:m},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}update(e,n,i){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return ne(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}copy(e,n,i){return ne(this,void 0,void 0,function*(){try{return{data:{path:(yield wn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,i){return ne(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),l=yield wn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,i){return ne(this,void 0,void 0,function*(){try{const o=yield wn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}download(e,n){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=l?`?${l}`:"",m=this._getFinalPath(e),p=()=>oo(this.fetch,`${this.url}/${o}/${m}${u}`,{headers:this.headers,noResolveJson:!0});return new O1(p,this.shouldThrowOnError)}info(e){return ne(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield oo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:vf(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}exists(e){return ne(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield j1(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i)&&i instanceof yf){const o=i.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),o=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const m=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});p!==""&&o.push(p);let g=o.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${g}`)}}}remove(e){return ne(this,void 0,void 0,function*(){try{return{data:yield $f(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}list(e,n,i){return ne(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},R1),n),{prefix:e||""});return{data:yield wn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}listV2(e,n){return ne(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield wn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const pw="2.87.3",gw={"X-Client-Info":`storage-js/${pw}`};class I1{constructor(e,n={},i,o){this.shouldThrowOnError=!1;const l=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gw),n),this.fetch=Hf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ne(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield oo(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}getBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield oo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}createBucket(e){return ne(this,arguments,void 0,function*(n,i={public:!1}){try{return{data:yield wn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}updateBucket(e,n){return ne(this,void 0,void 0,function*(){try{return{data:yield bf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}emptyBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield $f(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var lo=class extends Error{constructor(r,e){var n;super(r),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function D1(r,e,n){const i=new URL(e,r);if(n)for(const[o,l]of Object.entries(n))l!==void 0&&i.searchParams.set(o,l);return i.toString()}async function M1(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function P1(r){const e=r.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:o,body:l,headers:u}){const m=D1(r.baseUrl,i,o),p=await M1(r.auth),g=await e(m,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...p,...u},body:l?JSON.stringify(l):void 0}),v=await g.text(),b=(g.headers.get("content-type")||"").includes("application/json"),_=b&&v?JSON.parse(v):v;if(!g.ok){const x=b?_:void 0,S=x==null?void 0:x.error;throw new lo((S==null?void 0:S.message)??`Request failed with status ${g.status}`,{status:g.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:x})}return{status:g.status,headers:g.headers,data:_}}}}function sc(r){return r.join("")}var L1=class{constructor(r,e=""){this.client=r,this.prefix=e}async listNamespaces(r){const e=r?{parent:sc(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(r,e){const n={namespace:r.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${sc(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sc(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${sc(r.namespace)}`}),!0}catch(e){if(e instanceof lo&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(r,e){try{return await this.createNamespace(r,e)}catch(n){if(n instanceof lo&&n.status===409)return;throw n}}};function Ii(r){return r.join("")}var z1=class{constructor(r,e="",n){this.client=r,this.prefix=e,this.accessDelegation=n}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ii(r.namespace)}/tables`})).data.identifiers}async createTable(r,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ii(r.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(r,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ii(r.namespace)}/tables/${r.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(r,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ii(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(r){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ii(r.namespace)}/tables/${r.name}`,headers:e})).data.metadata}async tableExists(r){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ii(r.namespace)}/tables/${r.name}`,headers:e}),!0}catch(n){if(n instanceof lo&&n.status===404)return!1;throw n}}async createTableIfNotExists(r,e){try{return await this.createTable(r,e)}catch(n){if(n instanceof lo&&n.status===409)return await this.loadTable({namespace:r.namespace,name:e.name});throw n}}},B1=class{constructor(r){var i;let e="v1";r.catalogName&&(e+=`/${r.catalogName}`);const n=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=P1({baseUrl:n,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(i=r.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new L1(this.client,e),this.tableOps=new z1(this.client,e,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,e){return this.namespaceOps.createNamespace(r,e)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,e){return this.tableOps.createTable(r,e)}async updateTable(r,e){return this.tableOps.updateTable(r,e)}async dropTable(r,e){await this.tableOps.dropTable(r,e)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,e){return this.namespaceOps.createNamespaceIfNotExists(r,e)}async createTableIfNotExists(r,e){return this.tableOps.createTableIfNotExists(r,e)}};class q1{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gw),n),this.fetch=Hf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}listBuckets(e){return ne(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const i=n.toString(),o=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield oo(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield $f(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}from(e){if(!C1(e))throw new Kc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new B1({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>ne(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(l,u){const m=l[u];return typeof m!="function"?m:(...p)=>ne(this,void 0,void 0,function*(){try{return{data:yield m.apply(l,p),error:null}}catch(g){if(i)throw g;return{data:null,error:g}}})}})}}const Vf={"X-Client-Info":`storage-js/${pw}`,"Content-Type":"application/json"};class yw extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Zt(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class Ih extends yw{constructor(e,n,i){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class H1 extends yw{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var X0;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(X0||(X0={}));const Gf=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),$1=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Q0=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),V1=(r,e,n)=>ne(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(n!=null&&n.noResolveJson)){const o=r.status||500,l=r;if(typeof l.json=="function")l.json().then(u=>{const m=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||o+"";e(new Ih(Q0(u),o,m))}).catch(()=>{const u=o+"",m=l.statusText||`HTTP ${o} error`;e(new Ih(m,o,u))});else{const u=o+"",m=l.statusText||`HTTP ${o} error`;e(new Ih(m,o,u))}}else e(new H1(Q0(r),r))}),G1=(r,e,n,i)=>{const o={method:r,headers:(e==null?void 0:e.headers)||{}};return i?($1(i)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(i)):o.body=i,Object.assign(Object.assign({},o),n)):o};function K1(r,e,n,i,o,l){return ne(this,void 0,void 0,function*(){return new Promise((u,m)=>{r(n,G1(e,i,o,l)).then(p=>{if(!p.ok)throw p;if(i!=null&&i.noResolveJson)return p;const g=p.headers.get("content-type");return!g||!g.includes("application/json")?{}:p.json()}).then(p=>u(p)).catch(p=>V1(p,m,i))})})}function en(r,e,n,i,o){return ne(this,void 0,void 0,function*(){return K1(r,"POST",e,i,o,n)})}class F1{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Vf),n),this.fetch=Gf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ne(this,void 0,void 0,function*(){try{return{data:(yield en(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}})}getIndex(e,n){return ne(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Zt(i))return{data:null,error:i};throw i}})}listIndexes(e){return ne(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return ne(this,void 0,void 0,function*(){try{return{data:(yield en(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Zt(i))return{data:null,error:i};throw i}})}}class W1{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Vf),n),this.fetch=Gf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ne(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield en(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}})}getVectors(e){return ne(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}})}listVectors(e){return ne(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield en(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}})}queryVectors(e){return ne(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}})}deleteVectors(e){return ne(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield en(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}})}}class Y1{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Vf),n),this.fetch=Gf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:(yield en(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}})}getBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}})}listBuckets(){return ne(this,arguments,void 0,function*(e={}){try{return{data:yield en(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:(yield en(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}})}}class J1 extends Y1{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new X1(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ne(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ne(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ne(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ne(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class X1 extends F1{constructor(e,n,i,o){super(e,n,o),this.vectorBucketName=i}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ne(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ne(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ne(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ne(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Q1(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Q1 extends W1{constructor(e,n,i,o,l){super(e,n,l),this.vectorBucketName=i,this.indexName=o}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ne(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ne(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ne(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ne(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ne(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Z1 extends I1{constructor(e,n={},i,o){super(e,n,i,o)}from(e){return new U1(this.url,this.headers,e,this.fetch)}get vectors(){return new J1(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new q1(this.url+"/iceberg",this.headers,this.fetch)}}const ek="2.87.3";let Xa="";typeof Deno<"u"?Xa="deno":typeof document<"u"?Xa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xa="react-native":Xa="node";const tk={"X-Client-Info":`supabase-js-${Xa}/${ek}`},nk={headers:tk},sk={schema:"public"},rk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ik={},ak=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),ok=()=>Headers,lk=(r,e,n)=>{const i=ak(n),o=ok();return async(l,u)=>{var m;const p=(m=await e())!==null&&m!==void 0?m:r;let g=new o(u==null?void 0:u.headers);return g.has("apikey")||g.set("apikey",r),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),i(l,Object.assign(Object.assign({},u),{headers:g}))}};function ck(r){return r.endsWith("/")?r:r+"/"}function uk(r,e){var n,i;const{db:o,auth:l,realtime:u,global:m}=r,{db:p,auth:g,realtime:v,global:b}=e,_={db:Object.assign(Object.assign({},p),o),auth:Object.assign(Object.assign({},g),l),realtime:Object.assign(Object.assign({},v),u),storage:{},global:Object.assign(Object.assign(Object.assign({},b),m),{headers:Object.assign(Object.assign({},(n=b==null?void 0:b.headers)!==null&&n!==void 0?n:{}),(i=m==null?void 0:m.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return r.accessToken?_.accessToken=r.accessToken:delete _.accessToken,_}function dk(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ck(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const vw="2.87.3",Bi=30*1e3,wf=3,Dh=wf*Bi,hk="http://localhost:9999",fk="supabase.auth.token",mk={"X-Client-Info":`gotrue-js/${vw}`},_f="X-Supabase-Api-Version",bw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},pk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gk=600*1e3;class Ji extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function ae(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class ww extends Ji{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function _w(r){return ae(r)&&r.name==="AuthApiError"}class Ys extends Ji{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Bn extends Ji{constructor(e,n,i,o){super(e,i,o),this.name=n,this.status=i}}class $t extends Bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xw(r){return ae(r)&&r.name==="AuthSessionMissingError"}class Ar extends Bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Qa extends Bn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Za extends Bn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Sw(r){return ae(r)&&r.name==="AuthImplicitGrantRedirectError"}class xf extends Bn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ew extends Bn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}function yk(r){return ae(r)&&r.name==="AuthPKCECodeVerifierMissingError"}class _c extends Bn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function cc(r){return ae(r)&&r.name==="AuthRetryableFetchError"}class Sf extends Bn{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}function vk(r){return ae(r)&&r.name==="AuthWeakPasswordError"}class xc extends Bn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Sc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Z0=` 	
\r=`.split(""),bk=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Z0.length;e+=1)r[Z0[e].charCodeAt(0)]=-2;for(let e=0;e<Sc.length;e+=1)r[Sc[e].charCodeAt(0)]=e;return r})();function ev(r,e,n){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Sc[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Sc[i]),e.queuedBits-=6}}function Tw(r,e,n){const i=bk[r];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function tv(r){const e=[],n=u=>{e.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{xk(u,i,n)};for(let u=0;u<r.length;u+=1)Tw(r.charCodeAt(u),o,l);return e.join("")}function wk(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function _k(r,e){for(let n=0;n<r.length;n+=1){let i=r.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(r.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}wk(i,e)}}function xk(r,e,n){if(e.utf8seq===0){if(r<=127){n(r);return}for(let i=1;i<6;i+=1)if((r>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Gi(r){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<r.length;o+=1)Tw(r.charCodeAt(o),n,i);return new Uint8Array(e)}function Sk(r){const e=[];return _k(r,n=>e.push(n)),new Uint8Array(e)}function Mr(r){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};return r.forEach(o=>ev(o,n,i)),ev(null,n,i),e.join("")}function Ek(r){return Math.round(Date.now()/1e3)+r}function Tk(){return Symbol("auth-callback")}const Et=()=>typeof window<"u"&&typeof document<"u",Cr={tested:!1,writable:!1},Cw=()=>{if(!Et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Cr.tested)return Cr.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Cr.tested=!0,Cr.writable=!0}catch{Cr.tested=!0,Cr.writable=!1}return Cr.writable};function Ck(r){const e={},n=new URL(r);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return n.searchParams.forEach((i,o)=>{e[o]=i}),e}const kw=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),kk=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",qi=async(r,e,n)=>{await r.setItem(e,JSON.stringify(n))},kr=async(r,e)=>{const n=await r.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},St=async(r,e)=>{await r.removeItem(e)};let Aw=class jw{constructor(){this.promise=new jw.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}};Aw.promiseConstructor=Promise;function Mh(r){const e=r.split(".");if(e.length!==3)throw new xc("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!pk.test(e[i]))throw new xc("JWT not in base64url format");return{header:JSON.parse(tv(e[0])),payload:JSON.parse(tv(e[1])),signature:Gi(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ak(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function jk(r,e){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await r(l);if(!e(l,null,u)){i(u);return}}catch(u){if(!e(l,u)){o(u);return}}})()})}function Nk(r){return("0"+r.toString(16)).substr(-2)}function Ok(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,Nk).join("")}async function Rk(r){const n=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function Uk(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const n=await Rk(r);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Di(r,e,n=!1){const i=Ok();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await qi(r,`${e}-code-verifier`,o);const l=await Uk(i);return[l,i===l?"plain":"s256"]}const Ik=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Dk(r){const e=r.headers.get(_f);if(!e||!e.match(Ik))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Mk(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Pk(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Lk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mi(r){if(!Lk.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ph(){const r={};return new Proxy(r,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function zk(r,e){return new Proxy(r,{get:(n,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,o)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,i,o)}})}function nv(r){return JSON.parse(JSON.stringify(r))}const jr=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Bk=[502,503,504];async function sv(r){var e;if(!kk(r))throw new _c(jr(r),0);if(Bk.includes(r.status))throw new _c(jr(r),r.status);let n;try{n=await r.json()}catch(l){throw new Ys(jr(l),l)}let i;const o=Dk(r);if(o&&o.getTime()>=bw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Sf(jr(n),r.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new $t}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Sf(jr(n),r.status,n.weak_password.reasons);throw new ww(jr(n),r.status||500,i)}const qk=(r,e,n,i)=>{const o={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function pe(r,e,n,i){var o;const l=Object.assign({},i==null?void 0:i.headers);l[_f]||(l[_f]=bw["2024-01-01"].name),i!=null&&i.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const u=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const m=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",p=await Hk(r,e,n+m,{headers:l,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(p):{data:Object.assign({},p),error:null}}async function Hk(r,e,n,i,o,l){const u=qk(e,i,o,l);let m;try{m=await r(n,Object.assign({},u))}catch(p){throw console.error(p),new _c(jr(p),0)}if(m.ok||await sv(m),i!=null&&i.noResolveJson)return m;try{return await m.json()}catch(p){await sv(p)}}function bn(r){var e;let n=null;Gk(r)&&(n=Object.assign({},r),r.expires_at||(n.expires_at=Ek(r.expires_in)));const i=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:n,user:i},error:null}}function rv(r){const e=bn(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Js(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function $k(r){return{data:r,error:null}}function Vk(r){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l}=r,u=Zi(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l},p=Object.assign({},u);return{data:{properties:m,user:p},error:null}}function iv(r){return r}function Gk(r){return r.access_token&&r.refresh_token&&r.expires_in}const uc=["global","local","others"];class Kf{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=kw(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=uc[0]){if(uc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${uc.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ae(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Js})}catch(i){if(ae(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=Zi(e,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Vk,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ae(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Js})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,o,l,u,m,p;try{const g={nextPage:null,lastPage:0,total:0},v=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:iv});if(v.error)throw v.error;const b=await v.json(),_=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,x=(p=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return x.length>0&&(x.forEach(S=>{const T=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);g[`${C}Page`]=T}),g.total=parseInt(_)),{data:Object.assign(Object.assign({},b),g),error:null}}catch(g){if(ae(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){Mi(e);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Js})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Mi(e);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Js})}catch(i){if(ae(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){Mi(e);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Js})}catch(i){if(ae(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Mi(e.userId);try{const{data:n,error:i}=await pe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Mi(e.userId),Mi(e.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,i,o,l,u,m,p;try{const g={nextPage:null,lastPage:0,total:0},v=await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:iv});if(v.error)throw v.error;const b=await v.json(),_=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,x=(p=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return x.length>0&&(x.forEach(S=>{const T=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);g[`${C}Page`]=T}),g.total=parseInt(_)),{data:Object.assign(Object.assign({},b),g),error:null}}catch(g){if(ae(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ae(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}}function av(r={}){return{getItem:e=>r[e]||null,setItem:(e,n)=>{r[e]=n},removeItem:e=>{delete r[e]}}}const Nr={debug:!!(globalThis&&Cw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ff extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Nw extends Ff{}class Kk extends Ff{}async function Ow(r,e,n){Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return await n()}finally{Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(e===0)throw Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Nw(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Nr.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const ov={};async function Fk(r,e,n){var i;const o=(i=ov[r])!==null&&i!==void 0?i:Promise.resolve(),l=Promise.race([o.catch(()=>null),e>=0?new Promise((u,m)=>{setTimeout(()=>{m(new Kk(`Acquiring process lock with name "${r}" timed out`))},e)}):null].filter(u=>u)).catch(u=>{if(u&&u.isAcquireTimeout)throw u;return null}).then(async()=>await n());return ov[r]=l.catch(async u=>{if(u&&u.isAcquireTimeout)return await o,null;throw u}),await l}function Wk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Rw(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function Yk(r){return parseInt(r,16)}function Jk(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function Xk(r){var e;const{chainId:n,domain:i,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:m,requestId:p,resources:g,scheme:v,uri:b,version:_}=r;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const x=Rw(r.address),S=v?`${v}://${i}`:i,T=r.statement?`${r.statement}
`:"",C=`${S} wants you to sign in with your Ethereum account:
${x}

${T}`;let j=`URI: ${b}
Version: ${_}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(j+=`
Expiration Time: ${o.toISOString()}`),m&&(j+=`
Not Before: ${m.toISOString()}`),p&&(j+=`
Request ID: ${p}`),g){let U=`
Resources:`;for(const M of g){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);U+=`
- ${M}`}j+=U}return`${C}
${j}`}class ct extends Error{constructor({message:e,code:n,cause:i,name:o}){var l;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(l=o??(i instanceof Error?i.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class Ec extends ct{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Qk({error:r,options:e}){var n,i,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new ct({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return l.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const u=window.location.hostname;if(Uw(u)){if(l.rp.id!==u)return new ct({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function Zk({error:r,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new ct({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const i=window.location.hostname;if(Uw(i)){if(n.rpId!==i)return new ct({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class eA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const tA=new eA;function nA(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:n,excludeCredentials:i}=r,o=Zi(r,["challenge","user","excludeCredentials"]),l=Gi(e).buffer,u=Object.assign(Object.assign({},n),{id:Gi(n.id).buffer}),m=Object.assign(Object.assign({},o),{challenge:l,user:u});if(i&&i.length>0){m.excludeCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const g=i[p];m.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:Gi(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return m}function sA(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:n}=r,i=Zi(r,["challenge","allowCredentials"]),o=Gi(e).buffer,l=Object.assign(Object.assign({},i),{challenge:o});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const m=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},m),{id:Gi(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return l}function rA(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r;return{id:r.id,rawId:r.id,response:{attestationObject:Mr(new Uint8Array(r.response.attestationObject)),clientDataJSON:Mr(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function iA(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r,i=r.getClientExtensionResults(),o=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:Mr(new Uint8Array(o.authenticatorData)),clientDataJSON:Mr(new Uint8Array(o.clientDataJSON)),signature:Mr(new Uint8Array(o.signature)),userHandle:o.userHandle?Mr(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Uw(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function lv(){var r,e;return!!(Et()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function aA(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ec("Browser returned unexpected credential type",e)}:{data:null,error:new Ec("Empty credential response",e)}}catch(e){return{data:null,error:Qk({error:e,options:r})}}}async function oA(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ec("Browser returned unexpected credential type",e)}:{data:null,error:new Ec("Empty credential response",e)}}catch(e){return{data:null,error:Zk({error:e,options:r})}}}const lA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},cA={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Tc(...r){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of r)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))i[l]=u;else if(n(u))i[l]=u;else if(e(u)){const m=i[l];e(m)?i[l]=Tc(m,u):i[l]=Tc(u)}else i[l]=u}return i}function uA(r,e){return Tc(lA,r,e||{})}function dA(r,e){return Tc(cA,r,e||{})}class hA{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:i,signal:o},l){try{const{data:u,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:m};const p=o??tA.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:g}=u.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${i}`),g.displayName||(g.displayName=g.name)}switch(u.webauthn.type){case"create":{const g=uA(u.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:b}=await aA({publicKey:g,signal:p});return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}case"request":{const g=dA(u.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:b}=await oA(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:g,signal:p}));return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}}}catch(u){return ae(u)?{data:null,error:u}:{data:null,error:new Ys("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new Ji("rpId is required for WebAuthn authentication")};try{if(!lv())return{data:null,error:new Ys("Browser does not support WebAuthn",null)};const{data:u,error:m}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:i},signal:o},{request:l});if(!u)return{data:null,error:m};const{webauthn:p}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:p.type,rpId:n,rpOrigins:i,credential_response:p.credential_response}})}catch(u){return ae(u)?{data:null,error:u}:{data:null,error:new Ys("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new Ji("rpId is required for WebAuthn registration")};try{if(!lv())return{data:null,error:new Ys("Browser does not support WebAuthn",null)};const{data:u,error:m}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(v=>{var b;return(b=v.data)===null||b===void 0?void 0:b.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:m};const{data:p,error:g}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:o},{create:l});return p?this._verify({factorId:u.id,challengeId:p.challengeId,webauthn:{rpId:n,rpOrigins:i,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(u){return ae(u)?{data:null,error:u}:{data:null,error:new Ys("Unexpected error in register",u)}}}}Wk();const fA={url:hk,storageKey:fk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function cv(r,e,n){return await n()}const Pi={};class Xi{get jwks(){var e,n;return(n=(e=Pi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Pi[this.storageKey]=Object.assign(Object.assign({},Pi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Pi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Pi[this.storageKey]=Object.assign(Object.assign({},Pi[this.storageKey]),{cachedAt:e})}constructor(e){var n,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},fA),e);if(this.storageKey=l.storageKey,this.instanceID=(n=Xi.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Xi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Et()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Kf({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=kw(l.fetch),this.lock=l.lock||cv,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&Et()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=Ow:this.lock=cv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new hA(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Cw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=av(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=av(this.memoryStorage)),Et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${vw}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},i="none";if(Et()&&(n=Ck(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),Et()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Sw(l)){const p=(e=l.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:m}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",m),await this._saveSession(u),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ae(n)?this._returnResult({error:n}):this._returnResult({error:new Ys("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,o;try{const l=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:bn}),{data:u,error:m}=l;if(m||!u)return this._returnResult({data:{user:null,session:null},error:m});const p=u.session,g=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(l){if(ae(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,i,o;try{let l;if("email"in e){const{email:v,password:b,options:_}=e;let x=null,S=null;this.flowType==="pkce"&&([x,S]=await Di(this.storage,this.storageKey)),l=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:v,password:b,data:(n=_==null?void 0:_.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:x,code_challenge_method:S},xform:bn})}else if("phone"in e){const{phone:v,password:b,options:_}=e;l=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:b,data:(i=_==null?void 0:_.data)!==null&&i!==void 0?i:{},channel:(o=_==null?void 0:_.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:bn})}else throw new Qa("You must provide either an email or phone number and a password");const{data:u,error:m}=l;if(m||!u)return await St(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const p=u.session,g=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(l){if(await St(this.storage,`${this.storageKey}-code-verifier`),ae(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:u,options:m}=e;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:rv})}else if("phone"in e){const{phone:l,password:u,options:m}=e;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:rv})}else throw new Qa("You must provide either an email or phone number and a password");const{data:i,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const l=new Ar;return this._returnResult({data:{user:null,session:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,i,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,i,o,l,u,m,p,g,v,b,_;let x,S;if("message"in e)x=e.message,S=e.signature;else{const{chain:T,wallet:C,statement:j,options:U}=e;let M;if(Et())if(typeof C=="object")M=C;else{const X=window;if("ethereum"in X&&typeof X.ethereum=="object"&&"request"in X.ethereum&&typeof X.ethereum.request=="function")M=X.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=C}const V=new URL((n=U==null?void 0:U.url)!==null&&n!==void 0?n:window.location.href),G=await M.request({method:"eth_requestAccounts"}).then(X=>X).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!G||G.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=Rw(G[0]);let F=(i=U==null?void 0:U.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!F){const X=await M.request({method:"eth_chainId"});F=Yk(X)}const ye={domain:V.host,address:Y,statement:j,uri:V.href,version:"1",chainId:F,nonce:(o=U==null?void 0:U.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=U==null?void 0:U.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(m=U==null?void 0:U.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=U==null?void 0:U.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=U==null?void 0:U.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(v=U==null?void 0:U.signInWithEthereum)===null||v===void 0?void 0:v.resources};x=Xk(ye),S=await M.request({method:"personal_sign",params:[Jk(x),Y]})}try{const{data:T,error:C}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:S},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:bn});if(C)throw C;if(!T||!T.session||!T.user){const j=new Ar;return this._returnResult({data:{user:null,session:null},error:j})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:C})}catch(T){if(ae(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async signInWithSolana(e){var n,i,o,l,u,m,p,g,v,b,_,x;let S,T;if("message"in e)S=e.message,T=e.signature;else{const{chain:C,wallet:j,statement:U,options:M}=e;let V;if(Et())if(typeof j=="object")V=j;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))V=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=j}const G=new URL((n=M==null?void 0:M.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in V&&V.signIn){const Y=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M==null?void 0:M.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),U?{statement:U}:null));let F;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")F=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)F=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)S=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),T=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${G.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(o=(i=M==null?void 0:M.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=M==null?void 0:M.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((u=M==null?void 0:M.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((m=M==null?void 0:M.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((p=M==null?void 0:M.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((g=M==null?void 0:M.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((b=(v=M==null?void 0:M.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||b===void 0)&&b.length?["Resources",...M.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const Y=await V.signMessage(new TextEncoder().encode(S),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=Y}}try{const{data:C,error:j}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Mr(T)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:bn});if(j)throw j;if(!C||!C.session||!C.user){const U=new Ar;return this._returnResult({data:{user:null,session:null},error:U})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:j})}catch(C){if(ae(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const n=await kr(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Ew;const{data:l,error:u}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:bn});if(await St(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const m=new Ar;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(await St(this.storage,`${this.storageKey}-code-verifier`),ae(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:i,token:o,access_token:l,nonce:u}=e,m=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:bn}),{data:p,error:g}=m;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p||!p.session||!p.user){const v=new Ar;return this._returnResult({data:{user:null,session:null},error:v})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:g})}catch(n){if(ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,i,o,l,u;try{if("email"in e){const{email:m,options:p}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Di(this.storage,this.storageKey));const{error:b}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},create_user:(i=p==null?void 0:p.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:v},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in e){const{phone:m,options:p}=e,{data:g,error:v}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(o=p==null?void 0:p.data)!==null&&o!==void 0?o:{},create_user:(l=p==null?void 0:p.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(u=p==null?void 0:p.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:v})}throw new Qa("You must provide either an email or phone number.")}catch(m){if(await St(this.storage,`${this.storageKey}-code-verifier`),ae(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(e){var n,i;try{let o,l;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:m}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:bn});if(m)throw m;if(!u)throw new Error("An error occurred on token verification.");const p=u.session,g=u.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(o){if(ae(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var n,i,o,l,u;try{let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Di(this.storage,this.storageKey));const g=await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:p}),headers:this.headers,xform:$k});return!((l=g.data)===null||l===void 0)&&l.url&&Et()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(m){if(await St(this.storage,`${this.storageKey}-code-verifier`),ae(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new $t;const{error:o}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(ae(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:l}=e,{error:u}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:i,type:o,options:l}=e,{data:u,error:m}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:m})}throw new Qa("You must provide either an email or phone number and a type")}catch(n){if(ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await kr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Dh:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const u=await kr(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Ph()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=zk(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Js}):await this._useSession(async n=>{var i,o,l;const{data:u,error:m}=n;if(m)throw m;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $t}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:Js})})}catch(n){if(ae(n))return xw(n)&&(await this._removeSession(),await St(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new $t;const u=o.session;let m=null,p=null;this.flowType==="pkce"&&e.email!=null&&([m,p]=await Di(this.storage,this.storageKey));const{data:g,error:v}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:m,code_challenge_method:p}),jwt:u.access_token,xform:Js});if(v)throw v;return u.user=g.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await St(this.storage,`${this.storageKey}-code-verifier`),ae(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new $t;const n=Date.now()/1e3;let i=n,o=!0,l=null;const{payload:u}=Mh(e.access_token);if(u.exp&&(i=u.exp,o=i<=n),o){const{data:m,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m)return{data:{user:null,session:null},error:null};l=m}else{const{data:m,error:p}=await this._getUser(e.access_token);if(p)throw p;l={access_token:e.access_token,refresh_token:e.refresh_token,user:m.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(ae(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:u,error:m}=n;if(m)throw m;e=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new $t;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Et())throw new Za("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Za(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new xf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Za("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new xf("No code detected.");const{data:U,error:M}=await this._exchangeCodeForSession(e.code);if(M)throw M;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:m,expires_at:p,token_type:g}=e;if(!l||!m||!u||!g)throw new Za("No session defined in URL");const v=Math.round(Date.now()/1e3),b=parseInt(m);let _=v+b;p&&(_=parseInt(p));const x=_-v;x*1e3<=Bi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${b}s`);const S=_-b;v-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,_,v):v-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,_,v);const{data:T,error:C}=await this._getUser(l);if(C)throw C;const j={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:b,expires_at:_,refresh_token:u,token_type:g,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:j,redirectType:e.type},error:null})}catch(i){if(ae(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await kr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({error:l});const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:m}=await this.admin.signOut(u,e);if(m&&!(_w(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return e!=="others"&&(await this._removeSession(),await St(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=Tk(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,o;try{const{data:{session:l},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Di(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await St(this.storage,`${this.storageKey}-code-verifier`),ae(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:i,error:o}=await this._useSession(async l=>{var u,m,p,g,v;const{data:b,error:_}=l;if(_)throw _;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(m=e.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",x,{headers:this.headers,jwt:(v=(g=b.session)===null||g===void 0?void 0:g.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return Et()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:e.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(ae(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var i;try{const{error:o,data:{session:l}}=n;if(o)throw o;const{options:u,provider:m,token:p,access_token:g,nonce:v}=e,b=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=l==null?void 0:l.access_token)!==null&&i!==void 0?i:void 0,body:{provider:m,id_token:p,access_token:g,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:bn}),{data:_,error:x}=b;return x?this._returnResult({data:{user:null,session:null},error:x}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new Ar}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:x}))}catch(o){if(await St(this.storage,`${this.storageKey}-code-verifier`),ae(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,o;const{data:l,error:u}=n;if(u)throw u;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await jk(async o=>(o>0&&await Ak(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:bn})),(o,l)=>{const u=200*Math.pow(2,o);return l&&cc(l)&&Date.now()+u-i<Bi})}catch(i){if(this._debug(n,"error",i),ae(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),Et()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await kr(this.storage,this.storageKey);if(o&&this.userStorage){let u=await kr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await qi(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Ph()}else if(o&&!o.user&&!o.user){const u=await kr(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await St(this.storage,this.storageKey+"-user"),await qi(this.storage,this.storageKey,o)):o.user=Ph()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Dh;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${Dh}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),cc(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:m}=await this._getUser(o.access_token);!m&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new $t;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Aw;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new $t;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const m={data:l.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(l){if(this._debug(o,"error",l),ae(l)){const u={data:null,error:l};return cc(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(e,n)}catch(p){l.push(p)}});if(await Promise.all(u),l.length>0){for(let m=0;m<l.length;m+=1)console.error(l[m]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await St(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await qi(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const l=nv(o);await qi(this.storage,this.storageKey,l)}else{const o=nv(n);await qi(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await St(this.storage,this.storageKey),await St(this.storage,this.storageKey+"-code-verifier"),await St(this.storage,this.storageKey+"-user"),this.userStorage&&await St(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Et()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Bi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/Bi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Bi}ms, refresh threshold is ${wf} ticks`),o<=wf&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ff)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Et()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,u]=await Di(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(m.toString())}if(i!=null&&i.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;return l?this._returnResult({data:null,error:l}):await pe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const m=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:g}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&p.type==="totp"&&(!((o=p==null?void 0:p.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?rA(e.webauthn.credential_response):iA(e.webauthn.credential_response)})}:{code:e.code}),{data:m,error:p}=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:p}))})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:m}=u;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:nA(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:sA(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Mh(i.access_token);let u=null;l.aal&&(u=l.aal);let m=u;((n=(e=i.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(m="aal2");const g=l.amr||[];return{data:{currentLevel:u,nextLevel:m,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?await pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new $t})})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new $t});const u=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return u.data&&u.data.redirect_url&&Et()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(i){if(ae(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new $t});const u=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return u.data&&u.data.redirect_url&&Et()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(i){if(ae(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;return i?this._returnResult({data:null,error:i}):n?await pe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new $t})})}catch(e){if(ae(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?(await pe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new $t})})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(m=>m.kid===e);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(m=>m.kid===e),i&&this.jwks_cached_at+gk>o)return i;const{data:l,error:u}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(m=>m.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:x,error:S}=await this.getSession();if(S||!x.session)return this._returnResult({data:null,error:S});i=x.session.access_token}const{header:o,payload:l,signature:u,raw:{header:m,payload:p}}=Mh(i);n!=null&&n.allowExpired||Mk(l.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!g){const{error:x}=await this.getUser(i);if(x)throw x;return{data:{claims:l,header:o,signature:u},error:null}}const v=Pk(o.alg),b=await crypto.subtle.importKey("jwk",g,v,!0,["verify"]);if(!await crypto.subtle.verify(v,b,u,Sk(`${m}.${p}`)))throw new xc("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(i){if(ae(i))return this._returnResult({data:null,error:i});throw i}}}Xi.nextInstanceID={};const mA=Kf,Iw=Xi;class pA extends Iw{constructor(e){super(e)}}class Dw{constructor(e,n,i){var o,l,u;this.supabaseUrl=e,this.supabaseKey=n;const m=dk(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,g={db:sk,realtime:ik,auth:Object.assign(Object.assign({},rk),{storageKey:p}),global:nk},v=uk(i??{},g);this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=v.global.headers)!==null&&l!==void 0?l:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(b,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=v.auth)!==null&&u!==void 0?u:{},this.headers,v.global.fetch),this.fetch=lk(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&this.accessToken().then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new i1(new URL("rest/v1",m).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new Z1(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new t1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:o,userStorage:l,storageKey:u,flowType:m,lock:p,debug:g,throwOnError:v},b,_){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pA({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),b),storageKey:u,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:o,userStorage:l,flowType:m,lock:p,debug:g,throwOnError:v,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new fw(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gA=(r,e,n)=>new Dw(r,e,n);function yA(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}yA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const vA=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:mA,AuthApiError:ww,AuthClient:Iw,AuthError:Ji,AuthImplicitGrantRedirectError:Za,AuthInvalidCredentialsError:Qa,AuthInvalidJwtError:xc,AuthInvalidTokenResponseError:Ar,AuthPKCECodeVerifierMissingError:Ew,AuthPKCEGrantCodeExchangeError:xf,AuthRetryableFetchError:_c,AuthSessionMissingError:$t,AuthUnknownError:Ys,AuthWeakPasswordError:Sf,CustomAuthError:Bn,get FunctionRegion(){return wc},FunctionsError:Gc,FunctionsFetchError:tw,FunctionsHttpError:df,FunctionsRelayError:uf,GoTrueAdminApi:Kf,GoTrueClient:Xi,NavigatorLockAcquireTimeoutError:Nw,PostgrestError:a1,REALTIME_CHANNEL_STATES:b1,get REALTIME_LISTEN_TYPES(){return Vi},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return gf},get REALTIME_PRESENCE_LISTEN_EVENTS(){return pf},get REALTIME_SUBSCRIBE_STATES(){return In},RealtimeChannel:Dr,RealtimeClient:fw,RealtimePresence:$i,SIGN_OUT_SCOPES:uc,SupabaseClient:Dw,WebSocketFactory:lw,createClient:gA,isAuthApiError:_w,isAuthError:ae,isAuthImplicitGrantRedirectError:Sw,isAuthPKCECodeVerifierMissingError:yk,isAuthRetryableFetchError:cc,isAuthSessionMissingError:xw,isAuthWeakPasswordError:vk,lockInternals:Nr,navigatorLock:Ow,processLock:Fk},Symbol.toStringTag,{value:"Module"})),{createClient:bA}=vA,wA="https://qstizfuimenznizfhpkk.supabase.co",_A="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFzdGl6ZnVpbWVuem5pemZocGtrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3MjQ4MDIsImV4cCI6MjA4MTMwMDgwMn0.YQ6Y_uGJRv2RtiIFho9kvcgbsNRFDOawQnYM61RuG8c",Z=bA(wA,_A),xA=()=>{};var uv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},SA=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const o=r[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[n++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[n++],u=r[n++],m=r[n++],p=((o&7)<<18|(l&63)<<12|(u&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[n++],u=r[n++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Pw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],u=o+1<r.length,m=u?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,v=l>>2,b=(l&3)<<4|m>>4;let _=(m&15)<<2|g>>6,x=g&63;p||(x=64,u||(_=64)),i.push(n[v],n[b],n[_],n[x])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Mw(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):SA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const b=o<r.length?n[r.charAt(o)]:64;if(++o,l==null||m==null||g==null||b==null)throw new EA;const _=l<<2|m>>4;if(i.push(_),g!==64){const x=m<<4&240|g>>2;if(i.push(x),b!==64){const S=g<<6&192|b;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class EA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TA=function(r){const e=Mw(r);return Pw.encodeByteArray(e,!0)},Lw=function(r){return TA(r).replace(/\./g,"")},zw=function(r){try{return Pw.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=()=>CA().__FIREBASE_DEFAULTS__,AA=()=>{if(typeof process>"u"||typeof uv>"u")return;const r=uv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},jA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&zw(r[1]);return e&&JSON.parse(e)},Wf=()=>{try{return xA()||kA()||AA()||jA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},NA=r=>{var e,n;return(n=(e=Wf())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},Bw=()=>{var r;return(r=Wf())==null?void 0:r.config},qw=r=>{var e;return(e=Wf())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function RA(r){return(await fetch(r,{credentials:"include"})).ok}const io={};function UA(){const r={prod:[],emulator:[]};for(const e of Object.keys(io))io[e]?r.emulator.push(e):r.prod.push(e);return r}function IA(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let dv=!1;function DA(r,e){if(typeof window>"u"||typeof document>"u"||!Fc(window.location.host)||io[r]===e||io[r]||dv)return;io[r]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",l=UA().prod.length>0;function u(){const _=document.getElementById(i);_&&_.remove()}function m(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function p(_,x){_.setAttribute("width","24"),_.setAttribute("id",x),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function g(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{dv=!0,u()},_}function v(_,x){_.setAttribute("id",x),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function b(){const _=IA(i),x=n("text"),S=document.getElementById(x)||document.createElement("span"),T=n("learnmore"),C=document.getElementById(T)||document.createElement("a"),j=n("preprendIcon"),U=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const M=_.element;m(M),v(C,T);const V=g();p(U,j),M.append(U,S,C,V),document.body.appendChild(M)}l?(S.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function PA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function zA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BA(){const r=Ut();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Hw(){try{return typeof indexedDB=="object"}catch{return!1}}function $w(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(n){e(n)}})}function qA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="FirebaseError";class ps extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=HA,Object.setPrototypeOf(this,ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gr.prototype.create)}}class Gr{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?$A(l,i):"Error",m=`${this.serviceName}: ${u} (${o}).`;return new ps(o,m,i)}}function $A(r,e){return r.replace(VA,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const VA=/\{\$([^}]+)}/g;function GA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Qi(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const l=r[o],u=e[o];if(hv(l)&&hv(u)){if(!Qi(l,u))return!1}else if(l!==u)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function hv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function eo(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function to(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function KA(r,e){const n=new FA(r,e);return n.subscribe.bind(n)}class FA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");WA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=Lh),o.error===void 0&&(o.error=Lh),o.complete===void 0&&(o.complete=Lh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WA(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Lh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(r){return r&&r._delegate?r._delegate:r}class zn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new OA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XA(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&u.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:JA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JA(r){return r===Or?void 0:r}function XA(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ge||(Ge={}));const ZA={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},ej=Ge.INFO,tj={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},nj=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=tj[e];if(o)console[o](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vw{constructor(e){this.name=e,this._logLevel=ej,this._logHandler=nj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const sj=(r,e)=>e.some(n=>r instanceof n);let fv,mv;function rj(){return fv||(fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ij(){return mv||(mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gw=new WeakMap,Ef=new WeakMap,Kw=new WeakMap,zh=new WeakMap,Yf=new WeakMap;function aj(r){const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{n(cs(r.result)),o()},u=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&Gw.set(n,r)}).catch(()=>{}),Yf.set(e,r),e}function oj(r){if(Ef.has(r))return;const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{n(),o()},u=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});Ef.set(r,e)}let Tf={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Ef.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Kw.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cs(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function lj(r){Tf=r(Tf)}function cj(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(Bh(this),e,...n);return Kw.set(i,e.sort?e.sort():[e]),cs(i)}:ij().includes(r)?function(...e){return r.apply(Bh(this),e),cs(Gw.get(this))}:function(...e){return cs(r.apply(Bh(this),e))}}function uj(r){return typeof r=="function"?cj(r):(r instanceof IDBTransaction&&oj(r),sj(r,rj())?new Proxy(r,Tf):r)}function cs(r){if(r instanceof IDBRequest)return aj(r);if(zh.has(r))return zh.get(r);const e=uj(r);return e!==r&&(zh.set(r,e),Yf.set(e,r)),e}const Bh=r=>Yf.get(r);function Wc(r,e,{blocked:n,upgrade:i,blocking:o,terminated:l}={}){const u=indexedDB.open(r,e),m=cs(u);return i&&u.addEventListener("upgradeneeded",p=>{i(cs(u.result),p.oldVersion,p.newVersion,cs(u.transaction),p)}),n&&u.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}function qh(r,{blocked:e}={}){const n=indexedDB.deleteDatabase(r);return e&&n.addEventListener("blocked",i=>e(i.oldVersion,i)),cs(n).then(()=>{})}const dj=["get","getKey","getAll","getAllKeys","count"],hj=["put","add","delete","clear"],Hh=new Map;function pv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Hh.get(e))return Hh.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=hj.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||dj.includes(n)))return;const l=async function(u,...m){const p=this.transaction(u,o?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Hh.set(e,l),l}lj(r=>({...r,get:(e,n,i)=>pv(e,n)||r.get(e,n,i),has:(e,n)=>!!pv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mj(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function mj(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cf="@firebase/app",gv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new Vw("@firebase/app"),pj="@firebase/app-compat",gj="@firebase/analytics-compat",yj="@firebase/analytics",vj="@firebase/app-check-compat",bj="@firebase/app-check",wj="@firebase/auth",_j="@firebase/auth-compat",xj="@firebase/database",Sj="@firebase/data-connect",Ej="@firebase/database-compat",Tj="@firebase/functions",Cj="@firebase/functions-compat",kj="@firebase/installations",Aj="@firebase/installations-compat",jj="@firebase/messaging",Nj="@firebase/messaging-compat",Oj="@firebase/performance",Rj="@firebase/performance-compat",Uj="@firebase/remote-config",Ij="@firebase/remote-config-compat",Dj="@firebase/storage",Mj="@firebase/storage-compat",Pj="@firebase/firestore",Lj="@firebase/ai",zj="@firebase/firestore-compat",Bj="firebase",qj="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="[DEFAULT]",Hj={[Cf]:"fire-core",[pj]:"fire-core-compat",[yj]:"fire-analytics",[gj]:"fire-analytics-compat",[bj]:"fire-app-check",[vj]:"fire-app-check-compat",[wj]:"fire-auth",[_j]:"fire-auth-compat",[xj]:"fire-rtdb",[Sj]:"fire-data-connect",[Ej]:"fire-rtdb-compat",[Tj]:"fire-fn",[Cj]:"fire-fn-compat",[kj]:"fire-iid",[Aj]:"fire-iid-compat",[jj]:"fire-fcm",[Nj]:"fire-fcm-compat",[Oj]:"fire-perf",[Rj]:"fire-perf-compat",[Uj]:"fire-rc",[Ij]:"fire-rc-compat",[Dj]:"fire-gcs",[Mj]:"fire-gcs-compat",[Pj]:"fire-fst",[zj]:"fire-fst-compat",[Lj]:"fire-vertex","fire-js":"fire-js",[Bj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Map,$j=new Map,Af=new Map;function yv(r,e){try{r.container.addComponent(e)}catch(n){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function hs(r){const e=r.name;if(Af.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;Af.set(e,r);for(const n of Cc.values())yv(n,r);for(const n of $j.values())yv(n,r);return!0}function bo(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function xn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nr=new Gr("app","Firebase",Vj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=qj;function Fw(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i={name:kf,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw nr.create("bad-app-name",{appName:String(o)});if(n||(n=Bw()),!n)throw nr.create("no-options");const l=Cc.get(o);if(l){if(Qi(n,l.options)&&Qi(i,l.config))return l;throw nr.create("duplicate-app",{appName:o})}const u=new QA(o);for(const p of Af.values())u.addComponent(p);const m=new Gj(n,i,u);return Cc.set(o,m),m}function Ww(r=kf){const e=Cc.get(r);if(!e&&r===kf&&Bw())return Fw();if(!e)throw nr.create("no-app",{appName:r});return e}function Mn(r,e,n){let i=Hj[r]??r;n&&(i+=`-${n}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(u.join(" "));return}hs(new zn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj="firebase-heartbeat-database",Fj=1,co="firebase-heartbeat-store";let $h=null;function Yw(){return $h||($h=Wc(Kj,Fj,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(co)}catch(n){console.warn(n)}}}}).catch(r=>{throw nr.create("idb-open",{originalErrorMessage:r.message})})),$h}async function Wj(r){try{const n=(await Yw()).transaction(co),i=await n.objectStore(co).get(Jw(r));return await n.done,i}catch(e){if(e instanceof ps)ds.warn(e.message);else{const n=nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ds.warn(n.message)}}}async function vv(r,e){try{const i=(await Yw()).transaction(co,"readwrite");await i.objectStore(co).put(e,Jw(r)),await i.done}catch(n){if(n instanceof ps)ds.warn(n.message);else{const i=nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ds.warn(i.message)}}}function Jw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=1024,Jj=30;class Xj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Zj(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=bv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>Jj){const u=eN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ds.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bv(),{heartbeatsToSend:i,unsentEntries:o}=Qj(this._heartbeatsCache.heartbeats),l=Lw(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return ds.warn(n),""}}}function bv(){return new Date().toISOString().substring(0,10)}function Qj(r,e=Yj){const n=[];let i=r.slice();for(const o of r){const l=n.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),wv(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),wv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Zj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hw()?$w().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Wj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function wv(r){return Lw(JSON.stringify({version:2,heartbeats:r})).length}function eN(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(r){hs(new zn("platform-logger",e=>new fj(e),"PRIVATE")),hs(new zn("heartbeat",e=>new Xj(e),"PRIVATE")),Mn(Cf,gv,r),Mn(Cf,gv,"esm2020"),Mn("fire-js","")}tN("");var nN="firebase",sN="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn(nN,sN,"app");function Xw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rN=Xw,Qw=new Gr("auth","Firebase",Xw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new Vw("@firebase/auth");function iN(r,...e){kc.logLevel<=Ge.WARN&&kc.warn(`Auth (${wo}): ${r}`,...e)}function dc(r,...e){kc.logLevel<=Ge.ERROR&&kc.error(`Auth (${wo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(r,...e){throw Jf(r,...e)}function Pn(r,...e){return Jf(r,...e)}function Zw(r,e,n){const i={...rN(),[e]:n};return new Gr("auth","Firebase",i).create(e,{appName:r.name})}function us(r){return Zw(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jf(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return Qw.create(r,...e)}function ge(r,e,...n){if(!r)throw Jf(e,...n)}function os(r){const e="INTERNAL ASSERTION FAILED: "+r;throw dc(e),new Error(e)}function fs(r,e){r||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function aN(){return _v()==="http:"||_v()==="https:"}function _v(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aN()||LA()||"connection"in navigator)?navigator.onLine:!0}function lN(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){this.shortDelay=e,this.longDelay=n,fs(n>e,"Short delay should be less than long delay!"),this.isMobile=MA()||zA()}get(){return oN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(r,e){fs(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dN=new _o(3e4,6e4);function sr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function rr(r,e,n,i,o={}){return t_(r,o,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const m=vo({key:r.config.apiKey,...u}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...l};return PA()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Fc(r.emulatorConfig.host)&&(g.credentials="include"),e_.fetch()(await n_(r,r.config.apiHost,n,m),g)})}async function t_(r,e,n){r._canInitEmulator=!1;const i={...cN,...e};try{const o=new fN(r),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw rc(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const m=l.ok?u.errorMessage:u.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw rc(r,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw rc(r,"email-already-in-use",u);if(p==="USER_DISABLED")throw rc(r,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Zw(r,v,g);Tn(r,v)}}catch(o){if(o instanceof ps)throw o;Tn(r,"network-request-failed",{message:String(o)})}}async function xo(r,e,n,i,o={}){const l=await rr(r,e,n,i,o);return"mfaPendingCredential"in l&&Tn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function n_(r,e,n,i){const o=`${e}${n}?${i}`,l=r,u=l.config.emulator?Xf(r.config,o):`${r.config.apiScheme}://${o}`;return uN.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function hN(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Pn(this.auth,"network-request-failed")),dN.get())})}}function rc(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Pn(r,e,i);return o.customData._tokenResponse=n,o}function xv(r){return r!==void 0&&r.enterprise!==void 0}class mN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pN(r,e){return rr(r,"GET","/v2/recaptchaConfig",sr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(r,e){return rr(r,"POST","/v1/accounts:delete",e)}async function Ac(r,e){return rr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yN(r,e=!1){const n=fn(r),i=await n.getIdToken(e),o=Qf(i);ge(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:ao(Vh(o.auth_time)),issuedAtTime:ao(Vh(o.iat)),expirationTime:ao(Vh(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Vh(r){return Number(r)*1e3}function Qf(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return dc("JWT malformed, contained fewer than 3 sections"),null;try{const o=zw(n);return o?JSON.parse(o):(dc("Failed to decode base64 JWT payload"),null)}catch(o){return dc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Sv(r){const e=Qf(r);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ps&&vN(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function vN({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ao(this.lastLoginAt),this.creationTime=ao(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(r){var b;const e=r.auth,n=await r.getIdToken(),i=await uo(r,Ac(e,{idToken:n}));ge(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=(b=o.providerUserInfo)!=null&&b.length?s_(o.providerUserInfo):[],u=_N(r.providerData,l),m=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!(u!=null&&u.length),g=m?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Nf(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,v)}async function wN(r){const e=fn(r);await jc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _N(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function s_(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(r,e){const n=await t_(r,{},async()=>{const i=vo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,u=await n_(r,o,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:i};return r.emulatorConfig&&Fc(r.emulatorConfig.host)&&(p.credentials="include"),e_.fetch()(u,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SN(r,e){return rr(r,"POST","/v2/accounts:revokeToken",sr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=Sv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:l}=await xN(e,n);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:l}=n,u=new Ki;return i&&(ge(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(ge(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(ge(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ki,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(r,e){ge(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class En{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new bN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Nf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await uo(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yN(this,e)}reload(){return wN(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new En({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await jc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(us(this.auth));const e=await this.getIdToken();return await uo(this,gN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,l=n.phoneNumber??void 0,u=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:b,emailVerified:_,isAnonymous:x,providerData:S,stsTokenManager:T}=n;ge(b&&T,e,"internal-error");const C=Ki.fromJSON(this.name,T);ge(typeof b=="string",e,"internal-error"),$s(i,e.name),$s(o,e.name),ge(typeof _=="boolean",e,"internal-error"),ge(typeof x=="boolean",e,"internal-error"),$s(l,e.name),$s(u,e.name),$s(m,e.name),$s(p,e.name),$s(g,e.name),$s(v,e.name);const j=new En({uid:b,auth:e,email:o,emailVerified:_,displayName:i,isAnonymous:x,photoURL:u,phoneNumber:l,tenantId:m,stsTokenManager:C,createdAt:g,lastLoginAt:v});return S&&Array.isArray(S)&&(j.providerData=S.map(U=>({...U}))),p&&(j._redirectEventId=p),j}static async _fromIdTokenResponse(e,n,i=!1){const o=new Ki;o.updateFromServerResponse(n);const l=new En({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await jc(l),l}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];ge(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?s_(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),m=new Ki;m.updateFromIdToken(i);const p=new En({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:u}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Nf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=new Map;function ls(r){fs(r instanceof Function,"Expected a class definition");let e=Ev.get(r);return e?(fs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ev.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}r_.type="NONE";const Tv=r_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(r,e,n){return`firebase:${r}:${e}:${n}`}class Fi{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=hc(this.userKey,o.apiKey,l),this.fullPersistenceKey=hc("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ac(this.auth,{idToken:e}).catch(()=>{});return n?En._fromGetAccountInfoResponse(this.auth,n,e):null}return En._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Fi(ls(Tv),e,i);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||ls(Tv);const u=hc(i,e.config.apiKey,e.name);let m=null;for(const g of n)try{const v=await g._get(u);if(v){let b;if(typeof v=="string"){const _=await Ac(e,{idToken:v}).catch(()=>{});if(!_)break;b=await En._fromGetAccountInfoResponse(e,_,v)}else b=En._fromJSON(e,v);g!==l&&(m=b),l=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Fi(l,e,i):(l=p[0],m&&await l._set(u,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==l)try{await g._remove(u)}catch{}})),new Fi(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(i_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u_(e))return"Blackberry";if(d_(e))return"Webos";if(a_(e))return"Safari";if((e.includes("chrome/")||o_(e))&&!e.includes("edge/"))return"Chrome";if(c_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function i_(r=Ut()){return/firefox\//i.test(r)}function a_(r=Ut()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o_(r=Ut()){return/crios\//i.test(r)}function l_(r=Ut()){return/iemobile/i.test(r)}function c_(r=Ut()){return/android/i.test(r)}function u_(r=Ut()){return/blackberry/i.test(r)}function d_(r=Ut()){return/webos/i.test(r)}function Zf(r=Ut()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function EN(r=Ut()){var e;return Zf(r)&&!!((e=window.navigator)!=null&&e.standalone)}function TN(){return BA()&&document.documentMode===10}function h_(r=Ut()){return Zf(r)||c_(r)||d_(r)||u_(r)||/windows phone/i.test(r)||l_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(r,e=[]){let n;switch(r){case"Browser":n=Cv(Ut());break;case"Worker":n=`${Cv(Ut())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=l=>new Promise((u,m)=>{try{const p=e(l);u(p)}catch(p){m(p)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(r,e={}){return rr(r,"GET","/v2/passwordPolicy",sr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=6;class jN{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??AN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kv(this),this.idTokenSubscription=new kv(this),this.beforeStateQueue=new CN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ls(n)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Fi.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ac(this,{idToken:e}),i=await En._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(xn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===m)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(us(this));const n=e?fn(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ls(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kN(this),n=new jN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await SN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ls(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Fi.create(this,[ls(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(m,this,"internal-error"),m.then(()=>{u||l(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(n);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&iN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Kr(r){return fn(r)}class kv{constructor(e){this.auth=e,this.observer=null,this.addObserver=KA(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ON(r){Yc=r}function m_(r){return Yc.loadJS(r)}function RN(){return Yc.recaptchaEnterpriseScript}function UN(){return Yc.gapiScript}function IN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class DN{constructor(){this.enterprise=new MN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const PN="recaptcha-enterprise",p_="NO_RECAPTCHA";class LN{constructor(e){this.type=PN,this.auth=Kr(e)}async verify(e="verify",n=!1){async function i(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,m)=>{pN(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new mN(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,u(g.siteKey)}}).catch(p=>{m(p)})})}function o(l,u,m){const p=window.grecaptcha;xv(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{u(g)}).catch(()=>{u(p_)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DN().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(m=>{if(!n&&xv(window.grecaptcha))o(m,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=RN();p.length!==0&&(p+=m),m_(p).then(()=>{o(m,l,u)}).catch(g=>{u(g)})}}).catch(m=>{u(m)})})}}async function Av(r,e,n,i=!1,o=!1){const l=new LN(r);let u;if(o)u=p_;else try{u=await l.verify(n)}catch{u=await l.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:u}):Object.assign(m,{captchaResponse:u}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Of(r,e,n,i,o){var l;if((l=r._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Av(r,e,n,n==="getOobCode");return i(r,u)}else return i(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Av(r,e,n,n==="getOobCode");return i(r,m)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(r,e){const n=bo(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),l=n.getOptions();if(Qi(l,e??{}))return o;Tn(o,"already-initialized")}return n.initialize({options:e})}function BN(r,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ls);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function qN(r,e,n){const i=Kr(r);ge(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=g_(e),{host:u,port:m}=HN(e),p=m===null?"":`:${m}`,g={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ge(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ge(Qi(g,i.config.emulator)&&Qi(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Fc(u)?(RA(`${l}//${u}${p}`),DA("Auth",!0)):$N()}function g_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function HN(r){const e=g_(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:jv(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:jv(u)}}}function jv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function $N(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,n){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}async function VN(r,e){return rr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(r,e){return xo(r,"POST","/v1/accounts:signInWithPassword",sr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(r,e){return xo(r,"POST","/v1/accounts:signInWithEmailLink",sr(r,e))}async function FN(r,e){return xo(r,"POST","/v1/accounts:signInWithEmailLink",sr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends em{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new ho(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new ho(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Of(e,n,"signInWithPassword",GN);case"emailLink":return KN(e,{email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Of(e,i,"signUpPassword",VN);case"emailLink":return FN(e,{idToken:n,email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wi(r,e){return xo(r,"POST","/v1/accounts:signInWithIdp",sr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="http://localhost";class qr extends em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=n;if(!i||!o)return null;const u=new qr(i,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Wi(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Wi(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wi(e,n)}buildRequest(){const e={requestUri:WN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JN(r){const e=eo(to(r)).link,n=e?eo(to(e)).deep_link_id:null,i=eo(to(r)).deep_link_id;return(i?eo(to(i)).link:null)||i||n||e||r}class tm{constructor(e){const n=eo(to(e)),i=n.apiKey??null,o=n.oobCode??null,l=YN(n.mode??null);ge(i&&o&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=JN(e);try{return new tm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.providerId=ta.PROVIDER_ID}static credential(e,n){return ho._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=tm.parseLink(n);return ge(i,"argument-error"),ho._fromEmailAndCode(e,i.code,i.tenantId)}}ta.PROVIDER_ID="password";ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends y_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends So{constructor(){super("facebook.com")}static credential(e){return qr._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends So{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qr._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Qs.credential(n,i)}catch{return null}}}Qs.GOOGLE_SIGN_IN_METHOD="google.com";Qs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends So{constructor(){super("github.com")}static credential(e){return qr._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.GITHUB_SIGN_IN_METHOD="github.com";Zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends So{constructor(){super("twitter.com")}static credential(e,n){return qr._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return er.credential(n,i)}catch{return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com";er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(r,e){return xo(r,"POST","/v1/accounts:signUp",sr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const l=await En._fromIdTokenResponse(e,i,o),u=Nv(i);return new Hr({user:l,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=Nv(i);return new Hr({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function Nv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends ps{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Nc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Nc(e,n,i,o)}}function v_(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Nc._fromErrorAndOperation(r,l,e,i):l})}async function QN(r,e,n=!1){const i=await uo(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Hr._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(r,e,n=!1){const{auth:i}=r;if(xn(i.app))return Promise.reject(us(i));const o="reauthenticate";try{const l=await uo(r,v_(i,o,e,r),n);ge(l.idToken,i,"internal-error");const u=Qf(l.idToken);ge(u,i,"internal-error");const{sub:m}=u;return ge(r.uid===m,i,"user-mismatch"),Hr._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Tn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b_(r,e,n=!1){if(xn(r.app))return Promise.reject(us(r));const i="signIn",o=await v_(r,i,e),l=await Hr._fromIdTokenResponse(r,i,o);return n||await r._updateCurrentUser(l.user),l}async function eO(r,e){return b_(Kr(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w_(r){const e=Kr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tO(r,e,n){if(xn(r.app))return Promise.reject(us(r));const i=Kr(r),u=await Of(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",XN).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&w_(r),p}),m=await Hr._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(m.user),m}function nO(r,e,n){return xn(r.app)?Promise.reject(us(r)):eO(fn(r),ta.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&w_(r),i})}function sO(r,e,n,i){return fn(r).onIdTokenChanged(e,n,i)}function rO(r,e,n){return fn(r).beforeAuthStateChanged(e,n)}function __(r,e,n,i){return fn(r).onAuthStateChanged(e,n,i)}function iO(r){return fn(r).signOut()}const Oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Oc,"1"),this.storage.removeItem(Oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=1e3,oO=10;class S_ extends x_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=h_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,m,p)=>{this.notifyListeners(u,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);TN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,oO):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},aO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}S_.type="LOCAL";const lO=S_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_ extends x_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}E_.type="SESSION";const T_=E_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Jc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:l}=n.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(u).map(async g=>g(n.origin,l)),p=await cO(m);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((m,p)=>{const g=nm("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(b){const _=b;if(_.data.eventId===g)switch(_.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(_.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return window}function dO(r){Ln().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}async function hO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fO(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function mO(){return C_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="firebaseLocalStorageDb",pO=1,Rc="firebaseLocalStorage",A_="fbase_key";class Eo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xc(r,e){return r.transaction([Rc],e?"readwrite":"readonly").objectStore(Rc)}function gO(){const r=indexedDB.deleteDatabase(k_);return new Eo(r).toPromise()}function Rf(){const r=indexedDB.open(k_,pO);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Rc,{keyPath:A_})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Rc)?e(i):(i.close(),await gO(),e(await Rf()))})})}async function Ov(r,e,n){const i=Xc(r,!0).put({[A_]:e,value:n});return new Eo(i).toPromise()}async function yO(r,e){const n=Xc(r,!1).get(e),i=await new Eo(n).toPromise();return i===void 0?null:i.value}function Rv(r,e){const n=Xc(r,!0).delete(e);return new Eo(n).toPromise()}const vO=800,bO=3;class j_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>bO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return C_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jc._getInstance(mO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await hO(),!this.activeServiceWorker)return;this.sender=new uO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rf();return await Ov(e,Oc,"1"),await Rv(e,Oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ov(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>yO(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Rv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Xc(o,!1).getAll();return new Eo(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}j_.type="LOCAL";const wO=j_;new _o(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(r,e){return e?ls(e):(ge(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends em{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function xO(r){return b_(r.auth,new sm(r),r.bypassAuthState)}function SO(r){const{auth:e,user:n}=r;return ge(n,e,"internal-error"),ZN(n,new sm(r),r.bypassAuthState)}async function EO(r){const{auth:e,user:n}=r;return ge(n,e,"internal-error"),QN(n,new sm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,n,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:l,error:u,type:m}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xO;case"linkViaPopup":case"linkViaRedirect":return EO;case"reauthViaPopup":case"reauthViaRedirect":return SO;default:Tn(this.auth,"internal-error")}}resolve(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=new _o(2e3,1e4);class Hi extends N_{constructor(e,n,i,o,l){super(e,n,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Hi.currentPopupAction&&Hi.currentPopupAction.cancel(),Hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){fs(this.filter.length===1,"Popup operations only handle one event");const e=nm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TO.get())};e()}}Hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="pendingRedirect",fc=new Map;class kO extends N_{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=fc.get(this.auth._key());if(!e){try{const i=await AO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}fc.set(this.auth._key(),e)}return this.bypassAuthState||fc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AO(r,e){const n=OO(e),i=NO(r);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function jO(r,e){fc.set(r._key(),e)}function NO(r){return ls(r._redirectPersistence)}function OO(r){return hc(CO,r.config.apiKey,r.name)}async function RO(r,e,n=!1){if(xn(r.app))return Promise.reject(us(r));const i=Kr(r),o=_O(i,e),u=await new kO(i,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=600*1e3;class IO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!O_(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Pn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uv(e))}saveEventToCache(e){this.cachedEventUids.add(Uv(e)),this.lastProcessedEventTime=Date.now()}}function Uv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function O_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DO(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return O_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MO(r,e={}){return rr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LO=/^https?/;async function zO(r){if(r.config.emulator)return;const{authorizedDomains:e}=await MO(r);for(const n of e)try{if(BO(n))return}catch{}Tn(r,"unauthorized-domain")}function BO(r){const e=jf(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!LO.test(n))return!1;if(PO.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=new _o(3e4,6e4);function Iv(){const r=Ln().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function HO(r){return new Promise((e,n)=>{var o,l,u;function i(){Iv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Iv(),n(Pn(r,"network-request-failed"))},timeout:qO.get()})}if((l=(o=Ln().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Ln().gapi)!=null&&u.load)i();else{const m=IN("iframefcb");return Ln()[m]=()=>{gapi.load?i():n(Pn(r,"network-request-failed"))},m_(`${UN()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw mc=null,e})}let mc=null;function $O(r){return mc=mc||HO(r),mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=new _o(5e3,15e3),GO="__/auth/iframe",KO="emulator/auth/iframe",FO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YO(r){const e=r.config;ge(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Xf(e,KO):`https://${r.config.authDomain}/${GO}`,i={apiKey:e.apiKey,appName:r.name,v:wo},o=WO.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${n}?${vo(i).slice(1)}`}async function JO(r){const e=await $O(r),n=Ln().gapi;return ge(n,r,"internal-error"),e.open({where:document.body,url:YO(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FO,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const u=Pn(r,"network-request-failed"),m=Ln().setTimeout(()=>{l(u)},VO.get());function p(){Ln().clearTimeout(m),o(i)}i.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QO=500,ZO=600,eR="_blank",tR="http://localhost";class Dv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nR(r,e,n,i=QO,o=ZO){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const p={...XO,width:i.toString(),height:o.toString(),top:l,left:u},g=Ut().toLowerCase();n&&(m=o_(g)?eR:n),i_(g)&&(e=e||tR,p.scrollbars="yes");const v=Object.entries(p).reduce((_,[x,S])=>`${_}${x}=${S},`,"");if(EN(g)&&m!=="_self")return sR(e||"",m),new Dv(null);const b=window.open(e||"",m,v);ge(b,r,"popup-blocked");try{b.focus()}catch{}return new Dv(b)}function sR(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="__/auth/handler",iR="emulator/auth/handler",aR=encodeURIComponent("fac");async function Mv(r,e,n,i,o,l){ge(r.config.authDomain,r,"auth-domain-config-required"),ge(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:wo,eventId:o};if(e instanceof y_){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",GA(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))u[v]=b}if(e instanceof So){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(u.scopes=v.join(","))}r.tenantId&&(u.tid=r.tenantId);const m=u;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const p=await r._getAppCheckToken(),g=p?`#${aR}=${encodeURIComponent(p)}`:"";return`${oR(r)}?${vo(m).slice(1)}${g}`}function oR({config:r}){return r.emulator?Xf(r,iR):`https://${r.authDomain}/${rR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="webStorageSupport";class lR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T_,this._completeRedirectFn=RO,this._overrideRedirectResult=jO}async _openPopup(e,n,i,o){var u;fs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await Mv(e,n,i,jf(),o);return nR(e,l,nm())}async _openRedirect(e,n,i,o){await this._originValidation(e);const l=await Mv(e,n,i,jf(),o);return dO(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:l}=this.eventManagers[n];return o?Promise.resolve(o):(fs(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await JO(e),i=new IO(e);return n.register("authEvent",o=>(ge(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gh,{type:Gh},o=>{var u;const l=(u=o==null?void 0:o[0])==null?void 0:u[Gh];l!==void 0&&n(!!l),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return h_()||a_()||Zf()}}const cR=lR;var Pv="@firebase/auth",Lv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hR(r){hs(new zn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=i.options;ge(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f_(r)},g=new NN(i,o,l,p);return BN(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),hs(new zn("auth-internal",e=>{const n=Kr(e.getProvider("auth").getImmediate());return(i=>new uR(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(Pv,Lv,dR(r)),Mn(Pv,Lv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=300,mR=qw("authIdTokenMaxAge")||fR;let zv=null;const pR=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>mR)return;const o=n==null?void 0:n.token;zv!==o&&(zv=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function gR(r=Ww()){const e=bo(r,"auth");if(e.isInitialized())return e.getImmediate();const n=zN(r,{popupRedirectResolver:cR,persistence:[wO,lO,T_]}),i=qw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=pR(l.toString());rO(n,u,()=>u(n.currentUser)),sO(n,m=>u(m))}}const o=NA("auth");return o&&qN(n,`http://${o}`),n}function yR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}ON({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Pn("internal-error");l.customData=o,n(l)},i.type="text/javascript",i.charset="UTF-8",yR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hR("Browser");const R_="@firebase/installations",rm="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=1e4,I_=`w:${rm}`,D_="FIS_v2",vR="https://firebaseinstallations.googleapis.com/v1",bR=3600*1e3,wR="installations",_R="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$r=new Gr(wR,_R,xR);function M_(r){return r instanceof ps&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_({projectId:r}){return`${vR}/projects/${r}/installations`}function L_(r){return{token:r.token,requestStatus:2,expiresIn:ER(r.expiresIn),creationTime:Date.now()}}async function z_(r,e){const i=(await e.json()).error;return $r.create("request-failed",{requestName:r,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function B_({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function SR(r,{refreshToken:e}){const n=B_(r);return n.append("Authorization",TR(e)),n}async function q_(r){const e=await r();return e.status>=500&&e.status<600?r():e}function ER(r){return Number(r.replace("s","000"))}function TR(r){return`${D_} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR({appConfig:r,heartbeatServiceProvider:e},{fid:n}){const i=P_(r),o=B_(r),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const u={fid:n,authVersion:D_,appId:r.appId,sdkVersion:I_},m={method:"POST",headers:o,body:JSON.stringify(u)},p=await q_(()=>fetch(i,m));if(p.ok){const g=await p.json();return{fid:g.fid||n,registrationStatus:2,refreshToken:g.refreshToken,authToken:L_(g.authToken)}}else throw await z_("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=/^[cdef][\w-]{21}$/,Uf="";function jR(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const n=NR(r);return AR.test(n)?n:Uf}catch{return Uf}}function NR(r){return kR(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=new Map;function V_(r,e){const n=Qc(r);G_(n,e),OR(n,e)}function G_(r,e){const n=$_.get(r);if(n)for(const i of n)i(e)}function OR(r,e){const n=RR();n&&n.postMessage({key:r,fid:e}),UR()}let Pr=null;function RR(){return!Pr&&"BroadcastChannel"in self&&(Pr=new BroadcastChannel("[Firebase] FID Change"),Pr.onmessage=r=>{G_(r.data.key,r.data.fid)}),Pr}function UR(){$_.size===0&&Pr&&(Pr.close(),Pr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="firebase-installations-database",DR=1,Vr="firebase-installations-store";let Kh=null;function im(){return Kh||(Kh=Wc(IR,DR,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Vr)}}})),Kh}async function Uc(r,e){const n=Qc(r),o=(await im()).transaction(Vr,"readwrite"),l=o.objectStore(Vr),u=await l.get(n);return await l.put(e,n),await o.done,(!u||u.fid!==e.fid)&&V_(r,e.fid),e}async function K_(r){const e=Qc(r),i=(await im()).transaction(Vr,"readwrite");await i.objectStore(Vr).delete(e),await i.done}async function Zc(r,e){const n=Qc(r),o=(await im()).transaction(Vr,"readwrite"),l=o.objectStore(Vr),u=await l.get(n),m=e(u);return m===void 0?await l.delete(n):await l.put(m,n),await o.done,m&&(!u||u.fid!==m.fid)&&V_(r,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function am(r){let e;const n=await Zc(r.appConfig,i=>{const o=MR(i),l=PR(r,o);return e=l.registrationPromise,l.installationEntry});return n.fid===Uf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function MR(r){const e=r||{fid:jR(),registrationStatus:0};return F_(e)}function PR(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject($r.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=LR(r,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:zR(r)}:{installationEntry:e}}async function LR(r,e){try{const n=await CR(r,e);return Uc(r.appConfig,n)}catch(n){throw M_(n)&&n.customData.serverCode===409?await K_(r.appConfig):await Uc(r.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function zR(r){let e=await Bv(r.appConfig);for(;e.registrationStatus===1;)await H_(100),e=await Bv(r.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await am(r);return i||n}return e}function Bv(r){return Zc(r,e=>{if(!e)throw $r.create("installation-not-found");return F_(e)})}function F_(r){return BR(r)?{fid:r.fid,registrationStatus:0}:r}function BR(r){return r.registrationStatus===1&&r.registrationTime+U_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR({appConfig:r,heartbeatServiceProvider:e},n){const i=HR(r,n),o=SR(r,n),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const u={installation:{sdkVersion:I_,appId:r.appId}},m={method:"POST",headers:o,body:JSON.stringify(u)},p=await q_(()=>fetch(i,m));if(p.ok){const g=await p.json();return L_(g)}else throw await z_("Generate Auth Token",p)}function HR(r,{fid:e}){return`${P_(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function om(r,e=!1){let n;const i=await Zc(r.appConfig,l=>{if(!W_(l))throw $r.create("not-registered");const u=l.authToken;if(!e&&GR(u))return l;if(u.requestStatus===1)return n=$R(r,e),l;{if(!navigator.onLine)throw $r.create("app-offline");const m=FR(l);return n=VR(r,m),m}});return n?await n:i.authToken}async function $R(r,e){let n=await qv(r.appConfig);for(;n.authToken.requestStatus===1;)await H_(100),n=await qv(r.appConfig);const i=n.authToken;return i.requestStatus===0?om(r,e):i}function qv(r){return Zc(r,e=>{if(!W_(e))throw $r.create("not-registered");const n=e.authToken;return WR(n)?{...e,authToken:{requestStatus:0}}:e})}async function VR(r,e){try{const n=await qR(r,e),i={...e,authToken:n};return await Uc(r.appConfig,i),n}catch(n){if(M_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await K_(r.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Uc(r.appConfig,i)}throw n}}function W_(r){return r!==void 0&&r.registrationStatus===2}function GR(r){return r.requestStatus===2&&!KR(r)}function KR(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+bR}function FR(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function WR(r){return r.requestStatus===1&&r.requestTime+U_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(r){const e=r,{installationEntry:n,registrationPromise:i}=await am(e);return i?i.catch(console.error):om(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(r,e=!1){const n=r;return await XR(n),(await om(n,e)).token}async function XR(r){const{registrationPromise:e}=await am(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(r){if(!r||!r.options)throw Fh("App Configuration");if(!r.name)throw Fh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!r.options[n])throw Fh(n);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Fh(r){return $r.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="installations",ZR="installations-internal",eU=r=>{const e=r.getProvider("app").getImmediate(),n=QR(e),i=bo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},tU=r=>{const e=r.getProvider("app").getImmediate(),n=bo(e,Y_).getImmediate();return{getId:()=>YR(n),getToken:o=>JR(n,o)}};function nU(){hs(new zn(Y_,eU,"PUBLIC")),hs(new zn(ZR,tU,"PRIVATE"))}nU();Mn(R_,rm);Mn(R_,rm,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU="/firebase-messaging-sw.js",rU="/firebase-cloud-messaging-push-scope",J_="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",iU="https://fcmregistrations.googleapis.com/v1",X_="google.c.a.c_id",aU="google.c.a.c_l",oU="google.c.a.ts",lU="google.c.a.e",Hv=1e4;var $v;(function(r){r[r.DATA_MESSAGE=1]="DATA_MESSAGE",r[r.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})($v||($v={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var fo;(function(r){r.PUSH_RECEIVED="push-received",r.NOTIFICATION_CLICKED="notification-clicked"})(fo||(fo={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(r){const e=new Uint8Array(r);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cU(r){const e="=".repeat((4-r.length%4)%4),n=(r+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),o=new Uint8Array(i.length);for(let l=0;l<i.length;++l)o[l]=i.charCodeAt(l);return o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="fcm_token_details_db",uU=5,Vv="fcm_token_object_Store";async function dU(r){if("databases"in indexedDB&&!(await indexedDB.databases()).map(l=>l.name).includes(Wh))return null;let e=null;return(await Wc(Wh,uU,{upgrade:async(i,o,l,u)=>{if(o<2||!i.objectStoreNames.contains(Vv))return;const m=u.objectStore(Vv),p=await m.index("fcmSenderId").get(r);if(await m.clear(),!!p){if(o===2){const g=p;if(!g.auth||!g.p256dh||!g.endpoint)return;e={token:g.fcmToken,createTime:g.createTime??Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:as(g.vapidKey)}}}else if(o===3){const g=p;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:as(g.auth),p256dh:as(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:as(g.vapidKey)}}}else if(o===4){const g=p;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:as(g.auth),p256dh:as(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:as(g.vapidKey)}}}}}})).close(),await qh(Wh),await qh("fcm_vapid_details_db"),await qh("undefined"),hU(e)?e:null}function hU(r){if(!r||!r.subscriptionOptions)return!1;const{subscriptionOptions:e}=r;return typeof r.createTime=="number"&&r.createTime>0&&typeof r.token=="string"&&r.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU="firebase-messaging-database",mU=1,mo="firebase-messaging-store";let Yh=null;function Q_(){return Yh||(Yh=Wc(fU,mU,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(mo)}}})),Yh}async function pU(r){const e=Z_(r),i=await(await Q_()).transaction(mo).objectStore(mo).get(e);if(i)return i;{const o=await dU(r.appConfig.senderId);if(o)return await lm(r,o),o}}async function lm(r,e){const n=Z_(r),o=(await Q_()).transaction(mo,"readwrite");return await o.objectStore(mo).put(e,n),await o.done,e}function Z_({appConfig:r}){return r.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},jt=new Gr("messaging","Messaging",gU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yU(r,e){const n=await um(r),i=ex(e),o={method:"POST",headers:n,body:JSON.stringify(i)};let l;try{l=await(await fetch(cm(r.appConfig),o)).json()}catch(u){throw jt.create("token-subscribe-failed",{errorInfo:u==null?void 0:u.toString()})}if(l.error){const u=l.error.message;throw jt.create("token-subscribe-failed",{errorInfo:u})}if(!l.token)throw jt.create("token-subscribe-no-token");return l.token}async function vU(r,e){const n=await um(r),i=ex(e.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(i)};let l;try{l=await(await fetch(`${cm(r.appConfig)}/${e.token}`,o)).json()}catch(u){throw jt.create("token-update-failed",{errorInfo:u==null?void 0:u.toString()})}if(l.error){const u=l.error.message;throw jt.create("token-update-failed",{errorInfo:u})}if(!l.token)throw jt.create("token-update-no-token");return l.token}async function bU(r,e){const i={method:"DELETE",headers:await um(r)};try{const l=await(await fetch(`${cm(r.appConfig)}/${e}`,i)).json();if(l.error){const u=l.error.message;throw jt.create("token-unsubscribe-failed",{errorInfo:u})}}catch(o){throw jt.create("token-unsubscribe-failed",{errorInfo:o==null?void 0:o.toString()})}}function cm({projectId:r}){return`${iU}/projects/${r}/registrations`}async function um({appConfig:r,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function ex({p256dh:r,auth:e,endpoint:n,vapidKey:i}){const o={web:{endpoint:n,auth:e,p256dh:r}};return i!==J_&&(o.web.applicationPubKey=i),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=10080*60*1e3;async function _U(r){const e=await SU(r.swRegistration,r.vapidKey),n={vapidKey:r.vapidKey,swScope:r.swRegistration.scope,endpoint:e.endpoint,auth:as(e.getKey("auth")),p256dh:as(e.getKey("p256dh"))},i=await pU(r.firebaseDependencies);if(i){if(EU(i.subscriptionOptions,n))return Date.now()>=i.createTime+wU?xU(r,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{await bU(r.firebaseDependencies,i.token)}catch(o){console.warn(o)}return Gv(r.firebaseDependencies,n)}else return Gv(r.firebaseDependencies,n)}async function xU(r,e){try{const n=await vU(r.firebaseDependencies,e),i={...e,token:n,createTime:Date.now()};return await lm(r.firebaseDependencies,i),n}catch(n){throw n}}async function Gv(r,e){const i={token:await yU(r,e),createTime:Date.now(),subscriptionOptions:e};return await lm(r,i),i.token}async function SU(r,e){const n=await r.pushManager.getSubscription();return n||r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cU(e)})}function EU(r,e){const n=e.vapidKey===r.vapidKey,i=e.endpoint===r.endpoint,o=e.auth===r.auth,l=e.p256dh===r.p256dh;return n&&i&&o&&l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(r){const e={from:r.from,collapseKey:r.collapse_key,messageId:r.fcmMessageId};return TU(e,r),CU(e,r),kU(e,r),e}function TU(r,e){if(!e.notification)return;r.notification={};const n=e.notification.title;n&&(r.notification.title=n);const i=e.notification.body;i&&(r.notification.body=i);const o=e.notification.image;o&&(r.notification.image=o);const l=e.notification.icon;l&&(r.notification.icon=l)}function CU(r,e){e.data&&(r.data=e.data)}function kU(r,e){var o,l,u,m;if(!e.fcmOptions&&!((o=e.notification)!=null&&o.click_action))return;r.fcmOptions={};const n=((l=e.fcmOptions)==null?void 0:l.link)??((u=e.notification)==null?void 0:u.click_action);n&&(r.fcmOptions.link=n);const i=(m=e.fcmOptions)==null?void 0:m.analytics_label;i&&(r.fcmOptions.analyticsLabel=i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(r){return typeof r=="object"&&!!r&&X_ in r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(r){if(!r||!r.options)throw Jh("App Configuration Object");if(!r.name)throw Jh("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=r;for(const i of e)if(!n[i])throw Jh(i);return{appName:r.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Jh(r){return jt.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=jU(e);this.firebaseDependencies={app:e,appConfig:o,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OU(r){try{r.swRegistration=await navigator.serviceWorker.register(sU,{scope:rU}),r.swRegistration.update().catch(()=>{}),await RU(r.swRegistration)}catch(e){throw jt.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function RU(r){return new Promise((e,n)=>{const i=setTimeout(()=>n(new Error(`Service worker not registered after ${Hv} ms`)),Hv),o=r.installing||r.waiting;r.active?(clearTimeout(i),e()):o?o.onstatechange=l=>{var u;((u=l.target)==null?void 0:u.state)==="activated"&&(o.onstatechange=null,clearTimeout(i),e())}:(clearTimeout(i),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(r,e){if(!e&&!r.swRegistration&&await OU(r),!(!e&&r.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw jt.create("invalid-sw-registration");r.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(r,e){e?r.vapidKey=e:r.vapidKey||(r.vapidKey=J_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(r,e){if(!navigator)throw jt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw jt.create("permission-blocked");return await IU(r,e==null?void 0:e.vapidKey),await UU(r,e==null?void 0:e.serviceWorkerRegistration),_U(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(r,e,n){const i=MU(e);(await r.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[X_],message_name:n[aU],message_time:n[oU],message_device_time:Math.floor(Date.now()/1e3)})}function MU(r){switch(r){case fo.NOTIFICATION_CLICKED:return"notification_open";case fo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(r,e){const n=e.data;if(!n.isFirebaseMessaging)return;r.onMessageHandler&&n.messageType===fo.PUSH_RECEIVED&&(typeof r.onMessageHandler=="function"?r.onMessageHandler(Kv(n)):r.onMessageHandler.next(Kv(n)));const i=n.data;AU(i)&&i[lU]==="1"&&await DU(r,n.messageType,i)}const Fv="@firebase/messaging",Wv="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=r=>{const e=new NU(r.getProvider("app").getImmediate(),r.getProvider("installations-internal").getImmediate(),r.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>PU(e,n)),e},zU=r=>{const e=r.getProvider("messaging").getImmediate();return{getToken:i=>tx(e,i)}};function BU(){hs(new zn("messaging",LU,"PUBLIC")),hs(new zn("messaging-internal",zU,"PRIVATE")),Mn(Fv,Wv),Mn(Fv,Wv,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qU(){try{await $w()}catch{return!1}return typeof window<"u"&&Hw()&&qA()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(r,e){if(!navigator)throw jt.create("only-available-in-window");return r.onMessageHandler=e,()=>{r.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $U(r=Ww()){return qU().then(e=>{if(!e)throw jt.create("unsupported-browser")},e=>{throw jt.create("indexed-db-unsupported")}),bo(fn(r),"messaging").getImmediate()}async function VU(r,e){return r=fn(r),tx(r,e)}function GU(r,e){return r=fn(r),HU(r,e)}BU();const KU={apiKey:"AIzaSyBuu6ziYQMFENY8XUGjSbe39hYDJmQl8cc",authDomain:"campus-confession-3f696.firebaseapp.com",databaseURL:"https://campus-confession-3f696-default-rtdb.firebaseio.com",projectId:"campus-confession-3f696",storageBucket:"campus-confession-3f696.firebasestorage.app",messagingSenderId:"137080487648",appId:"1:137080487648:web:f5ca9d910bcfd983c41a85"},nx=Fw(KU),Rr=gR(nx);let no=null;try{if(typeof window<"u"&&typeof navigator<"u"&&"serviceWorker"in navigator)try{no=$U(nx)}catch{console.log("Firebase Messaging not supported")}}catch{console.log("Firebase Messaging check failed")}const ft=r=>typeof r=="string"?parseInt(r):Number(r);class FU{constructor(){this.currentUser=null,this.authStateListener=__(Rr,async e=>{if(e){let n=await this.getUser(e.uid);if(!n){const i={id:e.uid,email:e.email||"",avatarUrl:`https://api.dicebear.com/9.x/avataaars/svg?seed=${e.uid}&backgroundColor=e0e7ff`,createdAt:Date.now(),following:[],followers:[],isAdmin:!1,acceptedChats:[],blockedUsers:[]},{error:o}=await Z.from("users").insert(i);o||(n=i)}this.currentUser=n}else this.currentUser=null})}async checkEmailAvailability(e){return!0}async checkUsernameAvailability(e){if(!e)return!1;const{data:n}=await Z.from("users").select("username").eq("username",e);return!n||n.length===0}async login(e,n){try{const i=await nO(Rr,e,n),o=i.user.uid;let l=await this.getUser(o);if(!l&&i.user){const u={id:o,email:i.user.email||"",avatarUrl:`https://api.dicebear.com/9.x/avataaars/svg?seed=${o}&backgroundColor=e0e7ff`,createdAt:Date.now(),following:[],followers:[],isAdmin:!1,acceptedChats:[],blockedUsers:[]},{error:m}=await Z.from("users").insert(u);if(m)throw new Error("Database error: "+m.message);l=u}return this.currentUser=l,l}catch(i){throw console.error("Login failed",i),i}}async register(e,n){const o=(await tO(Rr,e,n)).user.uid,l=e==="admin@yug.com",u={id:o,email:e,avatarUrl:`https://api.dicebear.com/9.x/avataaars/svg?seed=${o}&backgroundColor=e0e7ff`,createdAt:Date.now(),following:[],followers:[],isAdmin:l,acceptedChats:[],blockedUsers:[]},{error:m}=await Z.from("users").insert(u);if(m)throw console.error("Error creating user in Supabase",m),new Error("Failed to create user profile: "+m.message);return this.currentUser=u,u}async ensureClerkUser(e){const n=await this.getUser(e.id);if(n)return n;const i=e.primaryEmailAddress.emailAddress;if(i){const{data:u}=await Z.from("users").select("*").eq("email",i).single();if(u)return{...u,createdAt:ft(u.createdAt)}}const o={id:e.id,email:i,createdAt:Date.now(),following:[],followers:[],isAdmin:!1,acceptedChats:[],blockedUsers:[]},{error:l}=await Z.from("users").insert(o);if(l)throw console.error("Error creating user from Clerk:",l),l;return o}async getCurrentUser(){return this.currentUser?this.currentUser:Rr.currentUser?(this.currentUser=await this.getUser(Rr.currentUser.uid),this.currentUser):null}async logout(){await iO(Rr),this.currentUser=null}async getUser(e){const{data:n,error:i}=await Z.from("users").select("*").eq("id",e).single();return i||!n?null:{...n,createdAt:ft(n.createdAt)}}async updateUser(e,n){const{data:i,error:o}=await Z.from("users").update(n).eq("id",e).select().single();if(o)throw o;const l={...i,createdAt:ft(i.createdAt||0)};return this.currentUser&&this.currentUser.id===e&&(this.currentUser=l),l}async getAllUsers(){const{data:e}=await Z.from("users").select("*");return(e||[]).map(n=>({...n,createdAt:ft(n.createdAt)}))}async deleteUser(e){await Z.from("users").delete().eq("id",e)}async deleteAccount(e){await Z.from("notifications").delete().or(`userId.eq.${e},actorId.eq.${e}`),await Z.from("messages").delete().or(`senderId.eq.${e},receiverId.eq.${e}`),await Z.from("comments").delete().eq("userId",e),await Z.from("confessions").delete().eq("userId",e),await Z.from("users").delete().eq("id",e),await this.logout()}async followUser(e,n){const i=await this.getUser(e),o=await this.getUser(n);if(i&&o){let l=i.following||[],u=o.followers||[];l.includes(n)||(l=[...l,n],await Z.from("users").update({following:l}).eq("id",e)),u.includes(e)||(u=[...u,e],await Z.from("users").update({followers:u}).eq("id",n))}}async unfollowUser(e,n){const i=await this.getUser(e),o=await this.getUser(n);if(i&&o){const l=(i.following||[]).filter(m=>m!==n),u=(o.followers||[]).filter(m=>m!==e);await Z.from("users").update({following:l}).eq("id",e),await Z.from("users").update({followers:u}).eq("id",n)}}async blockUser(e,n){const i=await this.getUser(e);if(i){let o=i.blockedUsers||[];if(!o.includes(n)){o=[...o,n],await Z.from("users").update({blockedUsers:o}).eq("id",e),await this.unfollowUser(e,n),await this.unfollowUser(n,e);let l=i.acceptedChats||[];l=l.filter(u=>u!==n),await Z.from("users").update({acceptedChats:l}).eq("id",e)}}}async unblockUser(e,n){const i=await this.getUser(e);if(i&&i.blockedUsers){const o=i.blockedUsers.filter(l=>l!==n);await Z.from("users").update({blockedUsers:o}).eq("id",e)}}async getColleges(){const{data:e}=await Z.from("colleges").select("*");return e||[]}async addCollege(e){const n="c"+Date.now(),{data:i}=await Z.from("colleges").insert({id:n,name:e}).select().single();return i}async updateCollege(e,n){const{error:i}=await Z.from("colleges").update({name:n}).eq("id",e);if(i)throw console.error("Error updating college:",i),new Error(`Failed to update college: ${i.message}`)}async deleteCollege(e){console.log("Attempting to delete college:",e);const{error:n}=await Z.from("colleges").delete().eq("id",e);if(n)throw console.error("Error deleting college:",n),new Error(`Failed to delete college: ${n.message}`);console.log("College deleted successfully:",e)}async requestCollege(e,n,i){const l={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"req-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),name:e,location:n,requestedBy:i,status:"pending",timestamp:Date.now()},{error:u}=await Z.from("college_requests").insert(l);if(u)throw console.error("Error requesting college:",u),u}async getCollegeRequests(){const{data:e}=await Z.from("college_requests").select("*");return(e||[]).map(n=>({...n,timestamp:ft(n.timestamp)})).sort((n,i)=>i.timestamp-n.timestamp)}async approveCollegeRequest(e,n){const{data:i}=await Z.from("college_requests").select("*").eq("id",e).single();i&&(await this.addCollege(n),await Z.from("college_requests").delete().eq("id",e),await this.createNotification(i.requestedBy,"system","system","System","",void 0,`Your request to add "${i.name}" (approved as "${n}") has been approved.`))}async rejectCollegeRequest(e){await Z.from("college_requests").delete().eq("id",e)}subscribeToConfessions(e,n,i){const o=async()=>{let m=Z.from("confessions").select("*");n==="campus"?m=m.eq("collegeId",e).eq("visibility","campus"):m=m.eq("visibility","open");const{data:p}=await m;if(p){const v=p.map(b=>({...b,timestamp:ft(b.timestamp),likes:b.likes||[]})).filter(b=>!b.hidden).sort((b,_)=>_.timestamp-b.timestamp);i(v)}};o();const l=n==="campus"?`confessions-campus-${e}`:"confessions-open",u=Z.channel(l).on("postgres_changes",{event:"*",schema:"public",table:"confessions"},m=>{const p=m.new;m.eventType==="INSERT"?p.visibility===n&&(n==="open"||p.collegeId===e)&&o():o()}).subscribe();return()=>{Z.removeChannel(u)}}async createConfession(e,n,i,o,l,u,m="campus"){const g={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"conf-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),userId:e,username:n,userAvatar:u||`https://api.dicebear.com/9.x/avataaars/svg?seed=${n}&backgroundColor=e0e7ff`,content:i,collegeId:o,timestamp:Date.now(),isAnonymous:l,likes:[],hidden:!1,visibility:m};console.log("Inserting confession:",g);const{data:v,error:b}=await Z.from("confessions").insert(g).select().single();if(b)throw console.error("Supabase insert error [confessions]:",b),b;return{...v,timestamp:ft(v.timestamp)}}async deleteConfession(e){const n=typeof e=="string"?e:e.id;console.log("Attempting to delete confession:",n);const{error:i}=await Z.from("confessions").delete().eq("id",n);if(i)throw console.error("Error deleting confession:",i),new Error(`Failed to delete confession: ${i.message}`);return console.log("Confession deleted successfully:",n),!0}async hideConfession(e,n){const{error:i}=await Z.from("confessions").update({hidden:!0}).eq("id",e);return!i}async toggleLike(e,n){const{error:i}=await Z.rpc("toggle_like",{confession_id:e,user_id:n});if(i)throw i;const{data:o}=await Z.from("confessions").select("*").eq("id",e).single();o&&o.likes&&o.likes.includes(n)&&o.userId}async getConfessionsByCollege(e){const{data:n}=await Z.from("confessions").select("*").eq("collegeId",e);return(n||[]).map(i=>({...i,timestamp:ft(i.timestamp)})).filter(i=>!i.hidden).sort((i,o)=>o.timestamp-i.timestamp)}async getConfessionsByUser(e){const{data:n}=await Z.from("confessions").select("*").eq("userId",e);return(n||[]).map(i=>({...i,timestamp:ft(i.timestamp)})).filter(i=>!i.hidden).sort((i,o)=>o.timestamp-i.timestamp)}async getAllConfessions(){const{data:e}=await Z.from("confessions").select("*");return(e||[]).map(n=>({...n,timestamp:ft(n.timestamp)})).sort((n,i)=>i.timestamp-n.timestamp)}async addComment(e,n,i,o){const l={id:crypto.randomUUID(),confessionId:e,userId:n,username:i,content:o,timestamp:Date.now()},{data:u,error:m}=await Z.from("comments").insert(l).select().single();if(m)throw m;return{...u,timestamp:ft(u.timestamp)}}async getComments(e){const{data:n}=await Z.from("comments").select("*").eq("confessionId",e);return(n||[]).map(i=>({...i,timestamp:ft(i.timestamp)})).sort((i,o)=>i.timestamp-o.timestamp)}async sendMessage(e,n,i){var v,b;const o=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"msg-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),l=await this.getUser(n);if(l&&((v=l.blockedUsers)!=null&&v.includes(e)))throw new Error("You are blocked by this user.");const u=await this.getUser(e);if(u&&((b=u.blockedUsers)!=null&&b.includes(n)))throw new Error("You have blocked this user.");const m={id:o,senderId:e,receiverId:n,content:i,timestamp:Date.now(),read:!1},{data:p,error:g}=await Z.from("messages").insert(m).select().single();if(g)throw console.error("Error sending message:",g),g;return await this.acceptChat(e,n),{...p,timestamp:ft(p.timestamp)}}subscribeToMessages(e,n){return Z.channel(`public:messages:receiverId=eq.${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`receiverId=eq.${e}`},async i=>{var l;const o=await this.getUser(e);o&&!((l=o.blockedUsers)!=null&&l.includes(i.new.senderId))&&n({...i.new,timestamp:ft(i.new.timestamp)})}).subscribe()}async getMessages(e,n){const{data:i}=await Z.from("messages").select("*").or(`and(senderId.eq.${e},receiverId.eq.${n}),and(senderId.eq.${n},receiverId.eq.${e})`);return(i||[]).map(o=>({...o,timestamp:ft(o.timestamp)})).sort((o,l)=>o.timestamp-l.timestamp)}async getInbox(e){var p;const n=await this.getUser(e);if(!n)return{requests:[],accepted:[]};const{data:i}=await Z.from("messages").select("senderId, receiverId").or(`senderId.eq.${e},receiverId.eq.${e}`),o=new Set;i==null||i.forEach(g=>{o.add(g.senderId===e?g.receiverId:g.senderId)});const l=new Set,u=new Set,m=n.blockedUsers||[];return(p=n.acceptedChats)==null||p.forEach(g=>{m.includes(g)||u.add(g)}),o.forEach(g=>{var x,S;if(m.includes(g))return;const v=(x=n.following)==null?void 0:x.includes(g),b=(S=n.acceptedChats)==null?void 0:S.includes(g),_=i==null?void 0:i.some(T=>T.senderId===e&&T.receiverId===g);v||b||_?u.add(g):l.add(g)}),u.forEach(g=>l.delete(g)),{requests:Array.from(l),accepted:Array.from(u)}}async acceptChat(e,n){const i=await this.getUser(e);if(i){const o=i.acceptedChats||[];o.includes(n)||await Z.from("users").update({acceptedChats:[...o,n]}).eq("id",e)}}async rejectChat(e,n){await Z.from("messages").delete().or(`and(senderId.eq.${e},receiverId.eq.${n}),and(senderId.eq.${n},receiverId.eq.${e})`);const i=await this.getUser(e);if(i&&i.acceptedChats){const o=i.acceptedChats.filter(l=>l!==n);await Z.from("users").update({acceptedChats:o}).eq("id",e)}}async markAsRead(e,n){await Z.from("messages").update({read:!0}).match({receiverId:e,senderId:n,read:!1})}async getUnreadCount(e){const{count:n}=await Z.from("messages").select("*",{count:"exact",head:!0}).match({receiverId:e,read:!1});return n||0}async getUnreadCountsPerPeer(e){const{data:n,error:i}=await Z.from("messages").select("senderId").eq("receiverId",e).eq("read",!1);if(i)return console.error("Error getting unread counts per peer:",i),{};const o={};return n==null||n.forEach(l=>{o[l.senderId]=(o[l.senderId]||0)+1}),o}async hasUnreadFrom(e,n){const{count:i}=await Z.from("messages").select("*",{count:"exact",head:!0}).match({receiverId:e,senderId:n,read:!1});return(i||0)>0}async isUsernameAvailable(e){const{data:n,error:i}=await Z.from("users").select("id").eq("username",e).maybeSingle();return i?(console.error("Error checking username availability:",i),!1):!n}async getReports(){const{data:e}=await Z.from("reports").select("*");return(e||[]).map(n=>({...n,timestamp:ft(n.timestamp)})).sort((n,i)=>i.timestamp-n.timestamp)}async submitReport(e,n,i){const o={id:crypto.randomUUID(),confessionId:e,reporterId:n,reason:i,timestamp:Date.now(),status:"pending"};await Z.from("reports").insert(o)}async resolveReport(e,n,i){await Z.from("reports").update({status:n,resolvedBy:i}).eq("id",e)}async deleteReport(e){await Z.from("reports").delete().eq("id",e)}async banUser(e){await Z.from("users").update({isBanned:!0}).eq("id",e)}async unbanUser(e){await Z.from("users").update({isBanned:!1}).eq("id",e)}async suspendUser(e,n){await Z.from("users").update({suspendedUntil:n}).eq("id",e)}async polishText(e){return e?(await new Promise(n=>setTimeout(n,1e3)),e.trim().replace(/\s+/g," ").replace(/^./,n=>n.toUpperCase())):""}async createNotification(e,n,i,o,l,u,m){const g={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"notif-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),userId:e,type:n,actorId:i,actorName:o,actorAvatar:l||"",entityId:u,content:m,read:!1,timestamp:Date.now()},{error:v}=await Z.from("notifications").insert(g);v&&console.error("Error creating notification:",v)}async getNotifications(e){const{data:n}=await Z.from("notifications").select("*").eq("userId",e).order("timestamp",{ascending:!1}).limit(50);return(n||[]).map(i=>({...i,timestamp:ft(i.timestamp)}))}async markNotificationsRead(e){await Z.from("notifications").update({read:!0}).eq("userId",e).eq("read",!1)}async getUnreadNotificationCount(e){const{count:n}=await Z.from("notifications").select("*",{count:"exact",head:!0}).eq("userId",e).eq("read",!1);return n||0}async sendSystemNotification(e,n){let i=[];if(n){const{data:l}=await Z.from("users").select("*").eq("collegeId",n);i=l||[]}else i=await this.getAllUsers();const o=i.map(l=>({id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"notif-sys-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),userId:l.id,type:"system",actorId:"system",actorName:"Admin",actorAvatar:"",content:e,read:!1,timestamp:Date.now()}));if(o.length>0){const{error:l}=await Z.from("notifications").insert(o);if(l)throw console.error("Error sending system notifications:",l),l}}subscribeToNotifications(e,n){return Z.channel(`public:notifications:userId=eq.${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`userId=eq.${e}`},i=>{const o=i.new;n({...o,timestamp:ft(o.timestamp)})}).subscribe()}subscribeToCollegeRequests(e){return Z.channel("public:college_requests").on("postgres_changes",{event:"*",schema:"public",table:"college_requests"},n=>{const i=n.new;i.timestamp&&e({...i,timestamp:ft(i.timestamp)})}).subscribe()}async requestNotificationPermission(e){if(no)try{if(await window.Notification.requestPermission()==="granted"){const i=await VU(no,{vapidKey:void 0});i&&(console.log("FCM Token:",i),await Z.from("users").update({fcmToken:i}).eq("id",e))}else console.log("Notification permission denied")}catch(n){console.error("Error requesting notification permission:",n)}}onMessageListener(){return no?new Promise(e=>{GU(no,n=>{e(n)})}):null}}const J=new FU,WU=r=>{const[e,n]=D.useState(0),[i,o]=D.useState(0),[l,u]=D.useState(!1);return{refreshing:!1,pullChange:0}};var ee=(r=>(r.AUTH="AUTH",r.SETUP_USERNAME="SETUP_USERNAME",r.SETUP_COLLEGE="SETUP_COLLEGE",r.SETUP_AVATAR="SETUP_AVATAR",r.HOME="HOME",r.SEARCH="SEARCH",r.POST="POST",r.MESSAGES="MESSAGES",r.PROFILE="PROFILE",r.ADMIN="ADMIN",r.CHAT_DETAIL="CHAT_DETAIL",r.USER_PROFILE="USER_PROFILE",r.NOTIFICATIONS="NOTIFICATIONS",r))(ee||{});const mt=({children:r,variant:e="primary",isLoading:n,className:i="",disabled:o,...l})=>{const u="px-5 py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 text-sm sm:text-base transform transition-all duration-300 active:scale-95 hover:-translate-y-0.5",m={primary:"bg-gradient-to-r from-primary-600 to-primary-500 hover:from-primary-500 hover:to-primary-400 text-white shadow-lg shadow-primary-500/30 hover:shadow-primary-500/50 disabled:from-slate-300 disabled:to-slate-300 disabled:shadow-none disabled:translate-y-0 disabled:scale-100",secondary:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 hover:border-slate-300 shadow-sm disabled:bg-slate-50 disabled:text-slate-400 disabled:translate-y-0 disabled:scale-100",danger:"bg-gradient-to-r from-red-500 to-rose-500 hover:from-red-400 hover:to-rose-400 text-white shadow-lg shadow-red-500/30 hover:shadow-red-500/50 disabled:from-slate-300 disabled:to-slate-300 disabled:shadow-none disabled:translate-y-0 disabled:scale-100",ghost:"bg-transparent hover:bg-primary-50 text-slate-600 hover:text-primary-600 hover:shadow-none translate-y-0"};return f.jsxs("button",{className:`${u} ${m[e]} ${i} ${n?"opacity-80 cursor-not-allowed":""}`,disabled:o||n,...l,children:[n&&f.jsx("i",{className:"fas fa-circle-notch fa-spin"}),r]})};function YU({users:r,confessions:e,reports:n,colleges:i}){return f.jsxs("div",{className:"animate-slide-up",children:[f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-soft border border-slate-100",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 text-blue-500 flex items-center justify-center mb-3",children:f.jsx("i",{className:"fas fa-users"})}),f.jsx("p",{className:"text-3xl font-black text-slate-800",children:r.length}),f.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Total Users"})]}),f.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-soft border border-slate-100",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-50 text-primary-500 flex items-center justify-center mb-3",children:f.jsx("i",{className:"fas fa-layer-group"})}),f.jsx("p",{className:"text-3xl font-black text-slate-800",children:e.length}),f.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Posts"})]}),f.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-soft border border-slate-100",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-50 text-purple-500 flex items-center justify-center mb-3",children:f.jsx("i",{className:"fas fa-university"})}),f.jsx("p",{className:"text-3xl font-black text-slate-800",children:i.length}),f.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Colleges"})]}),f.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-soft border border-slate-100",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-50 text-primary-500 flex items-center justify-center mb-3",children:f.jsx("i",{className:"fas fa-exclamation-triangle"})}),f.jsx("p",{className:"text-3xl font-black text-slate-800",children:n.length}),f.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Reports"})]})]}),f.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-soft border border-slate-100 mb-6",children:[f.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-4",children:"Students per College"}),f.jsx("div",{className:"space-y-4",children:i.map(o=>{const l=r.filter(m=>m.collegeId===o.id).length,u=r.length?l/r.length*100:0;return f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[f.jsx("span",{className:"font-bold text-slate-700",children:o.name}),f.jsxs("span",{className:"text-slate-500 font-medium",children:[l," students"]})]}),f.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2 overflow-hidden",children:f.jsx("div",{className:"bg-primary-500 h-full rounded-full transition-all duration-1000",style:{width:`${u}%`}})})]},o.id)})})]})]})}function JU({users:r,refresh:e}){const[n,i]=D.useState(""),o=r.filter(u=>{var m,p,g;return((m=u.username)==null?void 0:m.toLowerCase().includes(n.toLowerCase()))||((p=u.displayName)==null?void 0:p.toLowerCase().includes(n.toLowerCase()))||((g=u.email)==null?void 0:g.toLowerCase().includes(n.toLowerCase()))}),l=async(u,m)=>{m?await J.unbanUser(u):await J.banUser(u),e()};return f.jsxs("div",{className:"bg-white rounded-3xl shadow-soft border border-slate-100 overflow-hidden",children:[f.jsxs("div",{className:"p-4 border-b border-slate-50 flex justify-between items-center gap-4",children:[f.jsxs("div",{className:"flex-1 bg-slate-50 rounded-xl px-4 py-2 flex items-center gap-2",children:[f.jsx("i",{className:"fas fa-search text-slate-400"}),f.jsx("input",{className:"bg-transparent outline-none w-full text-sm font-bold text-slate-700",placeholder:"Search users...",value:n,onChange:u=>i(u.target.value)})]}),f.jsxs("span",{className:"text-xs bg-slate-100 text-slate-500 px-3 py-2 rounded-xl font-bold whitespace-nowrap",children:[o.length," Users"]})]}),f.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:o.map(u=>f.jsxs("div",{className:"p-4 flex items-center gap-3 border-b border-slate-50 last:border-0 hover:bg-slate-50 transition-colors",children:[f.jsx("img",{src:u.avatarUrl||"https://ui-avatars.com/api/?name=User",className:"w-10 h-10 rounded-xl bg-slate-100 object-cover"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("p",{className:"font-bold text-sm text-slate-900 truncate flex items-center gap-2",children:[u.displayName||u.username,u.isBanned&&f.jsx("span",{className:"bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded uppercase",children:"Banned"})]}),f.jsx("p",{className:"text-xs text-slate-400 truncate",children:u.email})]}),f.jsx("div",{className:"flex gap-2",children:f.jsx("button",{onClick:()=>l(u.id,!!u.isBanned),className:`h-8 px-3 rounded-lg flex items-center justify-center transition-colors font-bold text-xs ${u.isBanned?"bg-green-50 text-green-600 hover:bg-green-100":"bg-red-50 text-red-500 hover:bg-red-100"}`,children:u.isBanned?"Unban":"Ban"})})]},u.id))})]})}function XU({confessions:r,refresh:e,confirmAction:n}){const[i,o]=D.useState(""),l=r.filter(m=>m.content.toLowerCase().includes(i.toLowerCase())||m.username.toLowerCase().includes(i.toLowerCase())),u=async m=>{n("Delete Post?","Are you sure you want to delete this post? This action cannot be undone.",async()=>{try{await J.deleteConfession(m),e()}catch(p){console.error("Delete confession error:",p),alert(`Failed to delete confession: ${p.message||"Unknown error"}`)}})};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4",children:[f.jsx("i",{className:"fas fa-search text-slate-400"}),f.jsx("input",{className:"bg-transparent outline-none w-full font-bold text-slate-700",placeholder:"Search posts...",value:i,onChange:m=>o(m.target.value)})]}),l.map(m=>f.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex gap-4 animate-slide-up",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("span",{className:"font-bold text-xs text-slate-800",children:m.username}),f.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(m.timestamp).toLocaleDateString()}),m.isAnonymous&&f.jsx("span",{className:"bg-slate-800 text-white text-[10px] px-1.5 rounded",children:"ANON"}),f.jsx("span",{className:"bg-slate-100 text-slate-500 text-[10px] px-1.5 rounded",children:m.collegeId})]}),f.jsx("p",{className:"text-sm text-slate-600 line-clamp-2 font-medium",children:m.content})]}),f.jsxs("button",{onClick:()=>u(m.id),className:"h-full px-4 rounded-xl bg-red-50 text-red-500 hover:bg-red-100 font-bold text-xs transition-colors flex flex-col items-center justify-center gap-1",children:[f.jsx("i",{className:"fas fa-trash"}),f.jsx("span",{children:"Del"})]})]},m.id))]})}function QU({reports:r,confessions:e,refresh:n}){const i=r.filter(u=>u.status==="pending"),o="admin_user",l=async(u,m)=>{await J.resolveReport(u,m,o),n()};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("h3",{className:"font-bold text-slate-800 text-lg",children:["Pending Reports (",i.length,")"]}),i.length===0&&f.jsx("p",{className:"text-slate-400 text-sm",children:"No pending reports. Good job!"}),i.map(u=>{const m=e.find(p=>p.id===u.confessionId);return f.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-soft border border-rose-100 flex flex-col gap-3 animate-slide-up relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-rose-500"}),f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-xs font-bold text-rose-500 uppercase tracking-wider mb-1 block",children:"Reported Reason"}),f.jsx("p",{className:"font-bold text-slate-800",children:u.reason})]}),f.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:new Date(u.timestamp).toLocaleDateString()})]}),f.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[f.jsx("p",{className:"text-xs text-slate-500 font-medium mb-1",children:"Reported Post Content:"}),m?f.jsxs("p",{className:"text-sm text-slate-700 italic",children:['"',m.content,'"']}):f.jsx("p",{className:"text-sm text-red-400",children:"Post not found or already deleted."})]}),f.jsxs("div",{className:"flex gap-3 mt-2",children:[f.jsxs("button",{onClick:()=>l(u.id,"resolved"),className:"flex-1 bg-rose-50 text-rose-600 hover:bg-rose-100 py-2.5 rounded-xl text-xs font-bold transition-colors",children:[f.jsx("i",{className:"fas fa-check mr-2"})," Resolve (Delete Post)"]}),f.jsxs("button",{onClick:()=>l(u.id,"dismissed"),className:"flex-1 bg-slate-100 text-slate-600 hover:bg-slate-200 py-2.5 rounded-xl text-xs font-bold transition-colors",children:[f.jsx("i",{className:"fas fa-times mr-2"})," Dismiss"]})]})]},u.id)})]})}function ZU({colleges:r,refresh:e,confirmAction:n}){const[i,o]=D.useState(""),[l,u]=D.useState(null),[m,p]=D.useState(""),g=async()=>{i.trim()&&(await J.addCollege(i),o(""),e())},v=S=>{u(S.id),p(S.name)},b=async S=>{m.trim()&&(await J.updateCollege(S,m),u(null),p(""),e())},_=()=>{u(null),p("")},x=async S=>{n("Delete College?","Are you sure you want to delete this college? This action cannot be undone.",async()=>{try{await J.deleteCollege(S),e()}catch(T){console.error("Delete college error:",T),alert(`Failed to delete college: ${T.message||"Unknown error"}`)}})};return f.jsxs("div",{className:"animate-slide-up",children:[f.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 mb-6 relative",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{className:"flex-1 bg-slate-50 px-4 py-2 rounded-xl text-sm font-bold outline-none focus:ring-2 focus:ring-primary-100 transition-all placeholder-slate-400",placeholder:"New College Name",value:i,onChange:S=>o(S.target.value),onKeyDown:S=>S.key==="Enter"&&!r.some(T=>T.name.toLowerCase()===i.trim().toLowerCase())&&g()}),f.jsxs("button",{onClick:g,disabled:!i.trim()||r.some(S=>S.name.toLowerCase()===i.trim().toLowerCase()),className:"bg-slate-900 text-white px-6 rounded-xl font-bold text-sm shadow-lg shadow-slate-900/20 hover:scale-105 active:scale-95 transition-all disabled:opacity-50 disabled:shadow-none disabled:transform-none",children:[f.jsx("i",{className:"fas fa-plus mr-2"}),"Add"]})]}),i.trim().length>1&&f.jsx("div",{className:"mt-4 animate-fade-in",children:(()=>{const S=i.trim().toLowerCase(),T=r.filter(C=>C.name.toLowerCase().includes(S));return r.find(C=>C.name.toLowerCase()===S),T.length>0?f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Similar Colleges Found"}),T.map(C=>f.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border ${C.name.toLowerCase()===S?"bg-rose-50 border-rose-200":"bg-slate-50 border-slate-100"}`,children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-white flex items-center justify-center text-slate-400 shadow-sm",children:f.jsx("i",{className:"fas fa-university text-xs"})}),f.jsx("div",{className:"flex-1 min-w-0",children:f.jsx("span",{className:`block font-bold truncate ${C.name.toLowerCase()===S?"text-rose-600":"text-slate-700"}`,children:C.name})}),C.name.toLowerCase()===S&&f.jsx("span",{className:"text-[10px] font-bold bg-rose-100 text-rose-600 px-2 py-1 rounded-md",children:"EXISTS"})]},C.id))]}):f.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 p-3 rounded-xl border border-green-100",children:[f.jsx("i",{className:"fas fa-check-circle"}),f.jsx("span",{className:"text-sm font-bold",children:"No college found with this name. Safe to add."})]})})()})]}),f.jsx("div",{className:"space-y-3",children:r.map(S=>f.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex justify-between items-center group",children:l===S.id?f.jsxs(f.Fragment,{children:[f.jsx("input",{className:"flex-1 bg-slate-50 px-4 py-2 rounded-xl text-sm font-bold outline-none focus:ring-2 focus:ring-primary-100 transition-all",value:m,onChange:T=>p(T.target.value),onKeyDown:T=>T.key==="Enter"&&b(S.id),autoFocus:!0}),f.jsxs("div",{className:"flex gap-2 ml-2",children:[f.jsx("button",{onClick:()=>b(S.id),className:"w-8 h-8 rounded-lg bg-green-50 text-green-600 flex items-center justify-center hover:bg-green-100 transition-colors",children:f.jsx("i",{className:"fas fa-check text-xs"})}),f.jsx("button",{onClick:_,className:"w-8 h-8 rounded-lg bg-slate-50 text-slate-500 flex items-center justify-center hover:bg-slate-100 transition-colors",children:f.jsx("i",{className:"fas fa-times text-xs"})})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary-50 flex items-center justify-center text-primary-600",children:f.jsx("i",{className:"fas fa-university text-sm"})}),f.jsxs("div",{children:[f.jsx("span",{className:"font-bold text-slate-800 block",children:S.name}),f.jsxs("span",{className:"text-xs text-slate-400 font-medium",children:["ID: ",S.id]})]})]}),f.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>v(S),className:"w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center hover:bg-blue-100 transition-colors",children:f.jsx("i",{className:"fas fa-edit text-xs"})}),f.jsx("button",{onClick:()=>x(S.id),className:"w-8 h-8 rounded-lg bg-red-50 text-red-500 flex items-center justify-center hover:bg-red-100 transition-colors",children:f.jsx("i",{className:"fas fa-trash text-xs"})})]})]})},S.id))}),r.length===0&&f.jsxs("div",{className:"text-center py-12 text-slate-400",children:[f.jsx("i",{className:"fas fa-university text-4xl mb-3 opacity-30"}),f.jsx("p",{className:"font-medium",children:"No colleges yet. Add one to get started!"})]})]})}function eI({refresh:r,confirmAction:e}){const[n,i]=D.useState([]),[o,l]=D.useState(null),[u,m]=D.useState(""),[p,g]=D.useState("");D.useEffect(()=>{v();const S=J.subscribeToCollegeRequests(()=>{v()});return()=>{S.unsubscribe()}},[]);const v=async()=>{const S=await J.getCollegeRequests();i(S)},b=S=>{l(S),m(S.name),g(S.location)},_=async()=>{if(o)try{await J.approveCollegeRequest(o.id,u),l(null),v(),r()}catch{alert("Failed to approve")}},x=async S=>{e("Reject Request?",`Are you sure you want to reject and delete the request for "${S.name}"?`,async()=>{try{await J.rejectCollegeRequest(S.id),(o==null?void 0:o.id)===S.id&&l(null),v()}catch{alert("Failed to reject")}})};return o?f.jsxs("div",{className:"animate-scale-in max-w-lg mx-auto bg-white p-8 rounded-3xl shadow-2xl border border-slate-100",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[f.jsx("button",{onClick:()=>l(null),className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-500 hover:bg-slate-100 transition-colors",children:f.jsx("i",{className:"fas fa-arrow-left"})}),f.jsx("h2",{className:"font-black text-2xl text-slate-900",children:"Review Request"})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-slate-400 mb-2",children:"College Name"}),f.jsx("input",{className:"premium-input",value:u,onChange:S=>m(S.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-slate-400 mb-2",children:"Location"}),f.jsx("input",{className:"premium-input bg-slate-50 text-slate-500 cursor-not-allowed",value:p,disabled:!0}),f.jsx("p",{className:"text-[10px] text-slate-400 mt-1 italic",children:"Location is for reference only during manual addition."})]}),f.jsxs("div",{className:"pt-6 border-t border-slate-50 grid grid-cols-2 gap-3",children:[f.jsx(mt,{variant:"secondary",className:"bg-rose-50 text-rose-600 hover:bg-rose-100 border-none rounded-xl",onClick:()=>x(o),children:"Reject & Delete"}),f.jsx(mt,{className:"bg-primary-600 hover:bg-primary-700 text-white rounded-xl shadow-glow py-3",onClick:_,children:"Add College"})]})]})]}):f.jsxs("div",{className:"animate-slide-up",children:[f.jsx("h2",{className:"font-bold text-xl mb-4 text-slate-800",children:"Pending College Requests"}),n.length===0?f.jsxs("div",{className:"text-center py-12 text-slate-400 bg-slate-50 rounded-2xl border border-slate-100",children:[f.jsx("i",{className:"fas fa-inbox text-4xl mb-3 opacity-30"}),f.jsx("p",{className:"font-medium",children:"No pending requests."})]}):f.jsx("div",{className:"space-y-3",children:n.map(S=>f.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex justify-between items-center group hover:border-primary-100 transition-colors",children:[f.jsxs("div",{onClick:()=>b(S),className:"cursor-pointer flex-1",children:[f.jsx("h4",{className:"font-bold text-slate-900 group-hover:text-primary-600 transition-colors",children:S.name}),f.jsxs("p",{className:"text-sm text-slate-500",children:[f.jsx("i",{className:"fas fa-map-marker-alt mr-1"})," ",S.location]}),f.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Requested by user: ",S.requestedBy]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>x(S),className:"w-10 h-10 rounded-xl bg-rose-50 text-rose-500 hover:bg-rose-100 transition-colors flex items-center justify-center",title:"Reject & Delete",children:f.jsx("i",{className:"fas fa-trash-alt"})}),f.jsx(mt,{onClick:()=>b(S),className:"bg-slate-900 hover:bg-black text-white rounded-xl px-6",children:"Review"})]})]},S.id))})]})}function tI({colleges:r,confirmAction:e}){const[n,i]=D.useState(""),[o,l]=D.useState("all"),[u,m]=D.useState(!1),p=async()=>{n.trim()&&e("Send Broadcast?",`Are you sure you want to send this message to ${o==="all"?"ALL users":"users in the selected college"}? This will notify everyone immediately.`,async()=>{m(!0);try{await J.sendSystemNotification(n,o==="all"?void 0:o),alert("Broadcast sent successfully!"),i("")}catch(g){console.error(g),alert("Failed to send broadcast")}finally{m(!1)}},"info")};return f.jsx("div",{className:"animate-slide-up max-w-2xl mx-auto",children:f.jsxs("div",{className:"bg-amber-50 p-6 rounded-3xl border border-amber-100 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4 text-amber-800",children:[f.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center text-xl",children:f.jsx("i",{className:"fas fa-bullhorn"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg",children:"System Broadcast"}),f.jsx("p",{className:"text-sm opacity-80",children:"Send a notification to all users or a specific campus."})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-amber-800/70 mb-2 uppercase tracking-wide",children:"Target Audience"}),f.jsxs("select",{className:"w-full bg-white border border-amber-200 text-slate-800 p-3 rounded-xl outline-none focus:ring-2 focus:ring-amber-200 font-bold",value:o,onChange:g=>l(g.target.value),children:[f.jsx("option",{value:"all",children:" All Users (System Wide)"}),f.jsx("optgroup",{label:"Specific Campuses",children:r.map(g=>f.jsx("option",{value:g.id,children:g.name},g.id))})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-amber-800/70 mb-2 uppercase tracking-wide",children:"Message Content"}),f.jsx("textarea",{className:"w-full h-32 bg-white border border-amber-200 text-slate-800 p-4 rounded-xl outline-none focus:ring-2 focus:ring-amber-200 font-medium resize-none",placeholder:"Type your announcement here...",value:n,onChange:g=>i(g.target.value)}),f.jsxs("div",{className:"text-right text-xs font-bold mt-1 text-amber-800/60",children:[n.length,"/500"]})]}),f.jsx(mt,{onClick:p,disabled:!n.trim()||u,isLoading:u,className:"w-full py-4 text-lg bg-amber-600 hover:bg-amber-700 text-white rounded-xl shadow-lg shadow-amber-600/20",children:"Send Broadcast"})]})]})})}function nI(){const r=async e=>{let n=[],i="";if(e==="users"?(n=await J.getAllUsers(),i=`users_export_${Date.now()}.csv`):(n=await J.getAllConfessions(),i=`confessions_export_${Date.now()}.csv`),n.length===0){alert("No data to export.");return}const o=Object.keys(n[0]).join(","),l=n.map(g=>Object.values(g).map(v=>typeof v=="string"?`"${v.replace(/"/g,'""')}"`:v).join(",")),u=[o,...l].join(`
`),m=new Blob([u],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a");if(p.download!==void 0){const g=URL.createObjectURL(m);p.setAttribute("href",g),p.setAttribute("download",i),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p)}};return f.jsxs("div",{className:"space-y-6 animate-slide-up",children:[f.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-soft border border-slate-100",children:[f.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-4",children:"Data Export"}),f.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Download system data for backup or analysis."}),f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("button",{onClick:()=>r("users"),className:"flex items-center gap-3 px-6 py-3 bg-slate-50 rounded-xl hover:bg-slate-100 border border-slate-200 transition-all group",children:[f.jsx("div",{className:"w-10 h-10 bg-primary-100 text-primary-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:f.jsx("i",{className:"fas fa-file-csv"})}),f.jsxs("div",{className:"text-left",children:[f.jsx("span",{className:"block font-bold text-slate-700 text-sm",children:"Export Users"}),f.jsx("span",{className:"block text-xs text-slate-400",children:"CSV Format"})]})]}),f.jsxs("button",{onClick:()=>r("confessions"),className:"flex items-center gap-3 px-6 py-3 bg-slate-50 rounded-xl hover:bg-slate-100 border border-slate-200 transition-all group",children:[f.jsx("div",{className:"w-10 h-10 bg-primary-100 text-primary-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:f.jsx("i",{className:"fas fa-file-csv"})}),f.jsxs("div",{className:"text-left",children:[f.jsx("span",{className:"block font-bold text-slate-700 text-sm",children:"Export Posts"}),f.jsx("span",{className:"block text-xs text-slate-400",children:"CSV Format"})]})]})]})]}),f.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-soft border border-slate-100",children:[f.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-4",children:"Security"}),f.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-xl border border-slate-200",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-slate-700 text-sm",children:"Change Admin Password"}),f.jsx("p",{className:"text-xs text-slate-500",children:"Update your account credentials."})]}),f.jsx("button",{className:"bg-white border border-slate-200 text-slate-700 px-4 py-2 rounded-lg text-sm font-bold hover:bg-slate-50 transition-colors",children:"Manage"})]})]})]})}function sI({onBack:r,confirmAction:e}){const[n,i]=D.useState("overview"),[o,l]=D.useState([]),[u,m]=D.useState([]),[p,g]=D.useState([]),[v,b]=D.useState([]);D.useEffect(()=>{_()},[]);const _=async()=>{const[x,S,T,C]=await Promise.all([J.getAllUsers(),J.getAllConfessions(),J.getReports(),J.getColleges()]);l(x),m(S),g(T),b(C)};return f.jsxs("div",{className:"px-4 lg:px-0 min-h-screen pb-20",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8 sticky top-0 bg-slate-50/90 backdrop-blur z-20 py-4",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:r,className:"w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-sm hover:bg-slate-100 transition-colors",children:f.jsx("i",{className:"fas fa-arrow-left text-slate-600"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"font-black text-2xl text-slate-900 leading-none",children:"Admin Portal"}),f.jsx("p",{className:"text-xs text-slate-500 font-medium mt-1",children:"System Overview & Controls"})]})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("div",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold flex items-center gap-1",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})," Live"]})})]}),f.jsx("div",{className:"flex gap-1 bg-white p-1.5 rounded-2xl shadow-sm mb-6 w-full overflow-x-auto no-scrollbar",children:["overview","users","content","reports","colleges","requests","announcements","settings"].map(x=>f.jsx("button",{onClick:()=>i(x),className:`flex-1 py-2.5 px-4 rounded-xl text-sm font-bold capitalize transition-all whitespace-nowrap ${n===x?"bg-slate-900 text-white shadow-md":"text-slate-500 hover:bg-slate-50"}`,children:x},x))}),f.jsxs("div",{className:"animate-slide-up",children:[n==="overview"&&f.jsx(YU,{users:o,confessions:u,reports:p,colleges:v}),n==="users"&&f.jsx(JU,{users:o,refresh:_}),n==="content"&&f.jsx(XU,{confessions:u,refresh:_,confirmAction:e}),n==="reports"&&f.jsx(QU,{reports:p,confessions:u,refresh:_}),n==="colleges"&&f.jsx(ZU,{colleges:v,refresh:_,confirmAction:e}),n==="requests"&&f.jsx(eI,{refresh:_,confirmAction:e}),n==="announcements"&&f.jsx(tI,{colleges:v,confirmAction:e}),n==="settings"&&f.jsx(nI,{})]})]})}const Ic=({className:r})=>f.jsxs("svg",{className:r,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsxs("defs",{children:[f.jsxs("linearGradient",{id:"appLogoGradient",x1:"0",y1:"0",x2:"100",y2:"100",children:[f.jsx("stop",{stopColor:"#FF4500"}),f.jsx("stop",{offset:"1",stopColor:"#FF8C00"})]}),f.jsxs("mask",{id:"maskEyes",children:[f.jsx("rect",{width:"100",height:"100",fill:"white"}),f.jsx("ellipse",{cx:"40",cy:"55",rx:"5",ry:"3",fill:"black"}),f.jsx("ellipse",{cx:"60",cy:"55",rx:"5",ry:"3",fill:"black"})]}),f.jsxs("filter",{id:"premiumGlow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[f.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),f.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]})]}),f.jsxs("g",{filter:"url(#premiumGlow)",children:[f.jsx("rect",{width:"90",height:"90",x:"5",y:"5",rx:"22",fill:"url(#appLogoGradient)"}),f.jsxs("g",{mask:"url(#maskEyes)",children:[f.jsx("path",{d:"M50 20L85 38L50 56L15 38L50 20Z",fill:"white"}),f.jsx("path",{d:"M28 42V62C28 74 38 80 50 80C62 80 72 74 72 62V42H28Z",fill:"white"}),f.jsx("path",{d:"M50 80L40 92L40 80H50Z",fill:"white"})]}),f.jsx("path",{d:"M85 38V55",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round"}),f.jsx("circle",{cx:"85",cy:"55",r:"3.5",fill:"white"}),f.jsx("path",{d:"M50 28L70 38L50 48L30 38L50 28Z",fill:"white",fillOpacity:"0.2"})]})]}),rI=({setUser:r,setView:e,addToast:n})=>{const{isLoaded:i,signUp:o,setActive:l}=QT(),{signOut:u}=Pf(),[m,p]=D.useState("login"),[g,v]=D.useState(""),[b,_]=D.useState(""),[x,S]=D.useState(!1),[T,C]=D.useState(!1),[j,U]=D.useState(new Array(6).fill("")),M=D.useRef([]);D.useEffect(()=>{var X;T&&M.current[0]&&((X=M.current[0])==null||X.focus())},[T]);const V=(X,be)=>{var Ce;if(isNaN(Number(X.value)))return!1;const fe=[...j];fe[be]=X.value,U(fe),X.value&&be<5&&((Ce=M.current[be+1])==null||Ce.focus())},G=(X,be)=>{var fe;X.key==="Backspace"&&!j[be]&&be>0&&((fe=M.current[be-1])==null||fe.focus())},Y=async()=>{var fe,Ce;const X=g.trim(),be=b.trim();if(!X||!be){n("Please enter both email and password","error");return}S(!0);try{if(m==="login"){const de=await J.login(X,be);de&&(n("Welcome back!","success"),r(de),de.username?!de.collegeId&&!de.isAdmin?e(ee.SETUP_COLLEGE):e(ee.HOME):e(ee.SETUP_USERNAME))}else{if(!i)return;await o.create({emailAddress:X,password:be}),await o.prepareEmailAddressVerification({strategy:"email_code"}),C(!0),n("Verification code sent to your email.","info")}}catch(de){console.error("Auth error:",de);const ke=de.message||((Ce=(fe=de.errors)==null?void 0:fe[0])==null?void 0:Ce.message)||"Authentication failed";ke.includes("user-not-found")?n("Account not found.","error"):ke.includes("wrong-password")?n("Incorrect password.","error"):ke.includes("email-already-in-use")?n("Email already in use.","error"):n(ke,"error")}finally{S(!1)}},F=async()=>{var fe,Ce,de,ke,Xe,z,W;if(!i)return;const X=j.join("");if(X.length!==6){n("Please enter the full 6-digit code","error");return}S(!0);let be=!1;try{const te=await o.attemptEmailAddressVerification({code:X});console.log("Verification Result:",te);const xe=(Ce=(fe=te.verifications)==null?void 0:fe.emailAddress)==null?void 0:Ce.status;te.status==="complete"||xe==="verified"||te.status==="missing_requirements"?be=!0:n(`Verification Status: ${te.status}`,"info")}catch(te){console.error("Verification error:",JSON.stringify(te,null,2));const xe=((ke=(de=te.errors)==null?void 0:de[0])==null?void 0:ke.longMessage)||te.message||"";xe.includes("already been verified")||((z=(Xe=te.errors)==null?void 0:Xe[0])==null?void 0:z.code)==="verification_already_verified"?be=!0:n(xe||"Verification failed","error")}if(be){console.log("Clerk Verified. Registering in Firebase...");try{await J.register(g.trim(),b.trim()),n("Account created! Setting up profile...","success");const te=await J.login(g.trim(),b.trim());te&&(r(te),e(ee.SETUP_USERNAME)),await u()}catch(te){if(console.error("Firebase Registration Error:",te),(W=te.message)!=null&&W.includes("email-already-in-use")||te.code==="auth/email-already-in-use")try{const xe=await J.login(g.trim(),b.trim());n("Account Verified. Logging in...","success"),xe&&(r(xe),xe.username?!xe.collegeId&&!xe.isAdmin?e(ee.SETUP_COLLEGE):e(ee.HOME):e(ee.SETUP_USERNAME)),await u()}catch(xe){n("Login failed: "+xe.message,"error")}else n("Registration failed: "+te.message,"error")}}S(!1)},ye=X=>{X.key==="Enter"&&!x&&(T?F():Y())};return T?f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-slate-50 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-orange-500/5 blur-[120px] rounded-full"}),f.jsxs("div",{className:"w-full max-w-[400px] animate-slide-up z-10",children:[f.jsxs("div",{className:"flex flex-col items-center mb-10",children:[f.jsx("div",{className:"w-16 h-16 mb-6 rotate-1 drop-shadow-xl",children:f.jsx(Ic,{className:"w-full h-full"})}),f.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Verify Email"}),f.jsxs("p",{className:"text-slate-400 font-medium mt-2",children:["Enter the verification code sent to ",g]})]}),f.jsxs("div",{className:"premium-card p-10 rounded-[2.5rem]",children:[f.jsx("div",{className:"flex justify-center gap-2 mb-6",children:j.map((X,be)=>f.jsx("input",{type:"text",inputMode:"numeric",name:"otp",maxLength:1,className:"w-12 h-14 text-center text-2xl font-bold bg-slate-50 border border-slate-200 rounded-xl focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20 outline-none transition-all",value:X,ref:fe=>M.current[be]=fe,onChange:fe=>V(fe.target,be),onKeyDown:fe=>G(fe,be),autoFocus:be===0},be))}),f.jsx(mt,{className:"w-full py-4 text-sm font-bold rounded-2xl shadow-glow mt-2 bg-orange-600 hover:bg-orange-700 text-white transition-all active:scale-95",onClick:F,isLoading:x,children:"Verify & Create Account"}),f.jsx("button",{onClick:()=>C(!1),className:"w-full mt-4 text-slate-400 text-sm hover:text-orange-600 transition-colors",children:"Back"})]})]})]}):f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-slate-50 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-orange-500/5 blur-[120px] rounded-full"}),f.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-orange-500/5 blur-[120px] rounded-full"}),f.jsxs("div",{className:"w-full max-w-[400px] animate-slide-up z-10",children:[f.jsxs("div",{className:"flex flex-col items-center mb-10",children:[f.jsx("div",{className:"w-16 h-16 mb-6 rotate-1 drop-shadow-xl",children:f.jsx(Ic,{className:"w-full h-full"})}),f.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"UniConfess"}),f.jsx("p",{className:"text-slate-400 font-medium mt-2",children:"Campus stories, shared anonymously."})]}),f.jsxs("div",{className:"premium-card p-10 rounded-[2.5rem]",children:[f.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-6",children:m==="login"?"Welcome Back":"Join Your Campus"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx("i",{className:"far fa-envelope absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 text-sm"}),f.jsx("input",{type:"email",placeholder:"Campus Email",className:"premium-input pl-12",value:g,onChange:X=>v(X.target.value),onKeyPress:ye,autoComplete:"email"})]}),f.jsxs("div",{className:"relative",children:[f.jsx("i",{className:"fas fa-lock absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 text-sm"}),f.jsx("input",{type:"password",placeholder:"Password",className:"premium-input pl-12",value:b,onChange:X=>_(X.target.value),onKeyPress:ye,autoComplete:m==="login"?"current-password":"new-password"})]}),f.jsx(mt,{className:"w-full py-4 text-sm font-bold rounded-2xl shadow-glow mt-4 bg-orange-600 hover:bg-orange-700 text-white transition-all active:scale-95",onClick:Y,isLoading:x,children:m==="login"?"Sign In":"Create Account"}),f.jsx("div",{className:"mt-8 text-center",children:f.jsx("button",{onClick:X=>{X.preventDefault(),p(m==="login"?"signup":"login"),v(""),_("")},className:"text-slate-400 text-sm hover:text-orange-600 transition-colors font-semibold",children:m==="login"?f.jsxs("span",{children:["New here? ",f.jsx("span",{className:"text-orange-600 underline underline-offset-4",children:"Create Account"})]}):f.jsxs("span",{children:["Already have an account? ",f.jsx("span",{className:"text-orange-600 underline underline-offset-4",children:"Login"})]})})})]})]})]}),f.jsx("p",{className:"mt-12 text-slate-300 text-[10px] font-bold tracking-[0.2em] uppercase",children:"Built for Campus Privacy"})]})},iI=({user:r,colleges:e,setColleges:n,setView:i,setUser:o})=>{const[l,u]=D.useState(""),[m,p]=D.useState(!1),[g,v]=D.useState(""),[b,_]=D.useState(""),[x,S]=D.useState(!1);D.useEffect(()=>{(async()=>{if(e.length===0){const U=await J.getColleges();n(U)}})()},[]);const T=l.trim().length>0?(e||[]).filter(j=>{var U;return(U=j==null?void 0:j.name)==null?void 0:U.toLowerCase().includes(l.toLowerCase())}):[],C=async()=>{!g.trim()||!b.trim()||!r||(await J.requestCollege(g,b,r.id),S(!0),setTimeout(()=>{S(!1),p(!1),v(""),_("")},1e4))};return m?f.jsxs("div",{className:"min-h-screen bg-white p-6 flex flex-col animate-slide-up",children:[f.jsxs("button",{onClick:()=>p(!1),className:"self-start mb-6 text-slate-500 hover:text-slate-800 font-bold",children:[f.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Search"]}),f.jsx("h2",{className:"text-3xl font-black mb-2 text-slate-900",children:"Request College"}),f.jsx("p",{className:"text-slate-500 mb-8",children:"Tell us about your college and we'll add it within 24 hours."}),x?f.jsxs("div",{className:"bg-green-50 p-8 rounded-3xl text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-3xl mx-auto mb-4 animate-bounce",children:f.jsx("i",{className:"fas fa-check"})}),f.jsx("h3",{className:"font-bold text-green-800 text-xl mb-2",children:"Request Sent Successfully!"}),f.jsxs("p",{className:"text-green-600 font-bold",children:["Our admin team review it. and your college will be added within 24 hour.",f.jsx("span",{className:"block mt-2 opacity-70 text-sm",children:"Please wait while we redirect you..."})]})]}):f.jsxs("div",{className:"space-y-4 max-w-md mx-auto w-full",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"College Name"}),f.jsx("input",{className:"w-full bg-slate-50 p-4 rounded-xl outline-none font-bold",placeholder:"e.g. Baba Institute",value:g,onChange:j=>v(j.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Location (City, State)"}),f.jsx("input",{className:"w-full bg-slate-50 p-4 rounded-xl outline-none font-bold",placeholder:"e.g. Visakhapatnam, AP",value:b,onChange:j=>_(j.target.value)})]}),f.jsx(mt,{className:"w-full py-4 text-lg rounded-xl mt-4",onClick:C,disabled:!g||!b,children:"Submit Request"})]})]}):f.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 animate-fade-in",children:[f.jsx("h2",{className:"text-3xl font-black mb-2 mt-4 text-slate-900",children:"Find Your Tribe"}),f.jsx("p",{className:"text-slate-500 mb-8",children:"Search for your university to join."}),f.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-soft mb-6 flex items-center gap-3 sticky top-4 z-10 border border-slate-100",children:[f.jsx("i",{className:"fas fa-search text-slate-400 ml-2"}),f.jsx("input",{className:"w-full outline-none font-medium text-lg",placeholder:"Search schools...",value:l,onChange:j=>u(j.target.value),autoFocus:!0})]}),f.jsxs("div",{className:"space-y-3 pb-20",children:[T.map(j=>f.jsxs("div",{onClick:async()=>{if(r){const U=await J.updateUser(r.id,{collegeId:j.id});o(U),i(ee.HOME)}},className:"p-5 bg-white rounded-2xl shadow-sm border border-transparent hover:border-orange-200 cursor-pointer transition-all flex justify-between items-center group",children:[f.jsxs("div",{children:[f.jsx("span",{className:"font-bold text-slate-800 group-hover:text-orange-600 block text-lg",children:j.name}),j.location&&f.jsxs("span",{className:"text-xs text-slate-400 font-bold uppercase tracking-wide",children:[f.jsx("i",{className:"fas fa-map-marker-alt mr-1"})," ",j.location]})]}),f.jsx("i",{className:"fas fa-arrow-right text-slate-300 group-hover:text-orange-500"})]},j.id)),T.length===0&&!l.trim()&&f.jsxs("div",{className:"text-center py-20 opacity-50",children:[f.jsx("i",{className:"fas fa-search text-4xl text-slate-300 mb-4 animate-bounce"}),f.jsx("p",{className:"font-bold text-slate-900 text-lg",children:"Start typing to search..."}),f.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Find your campus by name."})]}),T.length===0&&l&&f.jsxs("div",{className:"text-center py-10",children:[f.jsx("p",{className:"font-bold text-slate-400 mb-4",children:"College not found?"}),f.jsx(mt,{variant:"secondary",onClick:()=>p(!0),className:"bg-white border-2 border-slate-200 text-slate-600 hover:bg-slate-100",children:"Request to Add College"})]})]}),f.jsx("div",{className:"mt-auto pt-12 pb-10 text-center",children:f.jsxs("button",{onClick:async()=>{await J.logout(),o(null),i(ee.AUTH)},className:"text-rose-500 text-base font-black transition-all uppercase tracking-widest px-10 py-4 bg-white rounded-2xl border border-slate-200 shadow-md inline-flex items-center gap-3 active:scale-95 hover:bg-slate-50",children:[f.jsx("i",{className:"fas fa-sign-out-alt"}),"Logout"]})})]})},aI=({isOpen:r,title:e,message:n,onConfirm:i,onClose:o,type:l="danger"})=>r?f.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-fade-in",onClick:o,children:f.jsxs("div",{className:"bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl animate-scale-in border border-white/20",onClick:u=>u.stopPropagation(),children:[f.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-5 mx-auto text-2xl shadow-sm ${l==="danger"?"bg-rose-50 text-rose-500":"bg-blue-50 text-blue-500"}`,children:f.jsx("i",{className:`fas ${l==="danger"?"fa-exclamation-triangle":"fa-info-circle"}`})}),f.jsx("h3",{className:"text-xl font-black text-center text-slate-900 mb-2",children:e}),f.jsx("p",{className:"text-center text-slate-500 text-sm mb-8 leading-relaxed font-medium",children:n}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(mt,{variant:"secondary",className:"flex-1 rounded-xl py-3",onClick:o,children:"Cancel"}),f.jsx(mt,{className:`flex-1 rounded-xl py-3 shadow-lg ${l==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/30":"bg-primary-600 hover:bg-primary-700 shadow-primary-500/30"}`,onClick:()=>{i(),o()},children:"Confirm"})]})]})}):null,ic=({active:r,icon:e,label:n,onClick:i,badge:o})=>f.jsxs("button",{onClick:i,className:`social-nav-item w-full group relative overflow-hidden transition-all duration-300 ${r?"social-nav-item-active":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[f.jsxs("div",{className:`relative z-10 text-xl w-6 flex justify-center items-center transition-colors duration-300 ${r?"text-primary-600":"text-slate-500"}`,children:[e,o>0&&f.jsx("span",{className:"absolute -top-2 -right-2 bg-rose-500 text-white text-[10px] h-4 w-4 rounded-full flex items-center justify-center shadow-sm border-2 border-white",children:o})]}),f.jsx("span",{className:"hidden lg:block relative z-10 tracking-tight transition-all duration-300",children:n}),r&&f.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-orange-600 rounded-r-full shadow-glow animate-fade-in"})]}),sx=P.memo(({confession:r,currentUser:e,isAdminView:n=!1,onLike:i,onDelete:o,onReply:l,onShare:u,onProfileClick:m,onReport:p,hideSocials:g=!1})=>{const[v,b]=D.useState(r.likes?r.likes.includes((e==null?void 0:e.id)||""):!1),[_,x]=D.useState(r.likes?r.likes.length:0),[S,T]=D.useState(!1),[C,j]=D.useState(!1),[U,M]=D.useState(!1);D.useEffect(()=>{b(r.likes?r.likes.includes((e==null?void 0:e.id)||""):!1),x(r.likes?r.likes.length:0)},[r.likes,e]);const V=r.content.length>200,G=U||!V?r.content:r.content.substring(0,200)+"...",Y=async de=>{if(de.stopPropagation(),!e)return;T(!0),setTimeout(()=>T(!1),300);const ke=!v;b(ke),x(Xe=>ke?Xe+1:Xe-1);try{await i(r.id,!ke)}catch{b(!ke),x(z=>ke?z-1:z+1)}},F=async de=>{de.stopPropagation(),j(!1),o&&await o(r)},ye=r.isAnonymous?"Anonymous Member":r.username,X=r.isAnonymous,be=e&&e.id===r.userId,fe=e&&(e.id==="admin_user"||e.isAdmin||e.email==="admin@yug.com"),Ce=n||be||fe;return f.jsxs("div",{className:`p-5 mb-0 transition-colors relative group animate-fade-in border-b border-slate-100/60 ${n?"":"hover:bg-slate-50/50 cursor-pointer"}`,onClick:()=>!n&&!g&&l(r.id),children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm overflow-hidden transition-transform duration-300 ${X?"bg-slate-900":"cursor-pointer hover:scale-105"}`,onClick:de=>{de.stopPropagation(),m(r.userId,X)},children:X?f.jsx("i",{className:"fas fa-mask text-white text-xs"}):f.jsx("img",{src:r.userAvatar||`https://ui-avatars.com/api/?name=${r.username||"User"}`,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"min-w-0",children:[f.jsxs("h4",{className:"font-bold text-slate-900 text-[15px] leading-tight flex items-center gap-2 truncate",children:[ye,n&&f.jsx("span",{className:"bg-rose-50 text-rose-600 text-[10px] px-2 py-0.5 rounded-full border border-rose-100 font-bold",children:"ADMIN"})]}),f.jsx("p",{className:"text-[11px] text-slate-500 mt-1 font-medium",children:new Date(r.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]}),f.jsxs("div",{className:"relative",children:[f.jsx("button",{onClick:de=>{de.stopPropagation(),j(!C)},className:"w-8 h-8 flex items-center justify-center rounded-xl hover:bg-slate-100 text-slate-400 hover:text-slate-600 transition-colors",children:f.jsx("i",{className:"fas fa-ellipsis-h text-sm"})}),C&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 z-10",onClick:de=>{de.stopPropagation(),j(!1)}}),f.jsxs("div",{className:"absolute right-0 top-10 bg-white shadow-premium rounded-2xl border border-slate-100 w-40 py-2 z-20 overflow-hidden animate-slide-up origin-top-right ring-1 ring-black/5",children:[Ce&&f.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-rose-500 hover:bg-rose-50 font-semibold transition-colors flex items-center gap-2",onClick:F,children:[f.jsx("i",{className:"far fa-trash-alt"})," Delete Post"]}),f.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 font-medium transition-colors flex items-center gap-2",onClick:de=>{de.stopPropagation(),p(r.id),j(!1)},children:[f.jsx("i",{className:"far fa-flag"})," Report Issue"]})]})]})]})]}),f.jsxs("div",{className:"text-slate-800 text-[15px] leading-relaxed whitespace-pre-wrap font-medium",children:[G,V&&!U&&f.jsx("button",{onClick:de=>{de.stopPropagation(),M(!0)},className:"text-orange-600 font-bold ml-1 hover:underline",children:"See more"})]}),!n&&!g&&f.jsxs("div",{className:"mt-4 flex items-center gap-6 text-slate-500",children:[f.jsxs("button",{className:`flex items-center gap-2 text-sm font-semibold transition-all duration-200 group/btn ${v?"text-rose-500":"hover:text-rose-500"}`,onClick:Y,children:[f.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${v?"bg-rose-50":"group-hover/btn:bg-rose-50"}`,children:f.jsx("i",{className:`${v?"fas":"far"} fa-heart ${S?"animate-scale-in":""}`})}),f.jsx("span",{children:_||""})]}),f.jsx("button",{className:"flex items-center gap-2 text-sm font-semibold transition-all duration-200 group/btn hover:text-orange-600",onClick:de=>{de.stopPropagation(),l(r.id)},children:f.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center group-hover/btn:bg-primary-50",children:f.jsx("i",{className:"far fa-comment"})})}),f.jsx("button",{className:"flex items-center gap-2 text-sm font-semibold transition-all duration-200 group/btn hover:text-blue-600 ml-auto",onClick:de=>{de.stopPropagation(),u(r)},children:f.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center group-hover/btn:bg-blue-50",children:f.jsx("i",{className:"far fa-share-square"})})})]})]})}),oI=({user:r,onSave:e,onDelete:n,onCancel:i,confirmAction:o})=>{const[l,u]=D.useState(r.bio||""),[m,p]=D.useState(!1),[g,v]=D.useState(!1);return f.jsx("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg mx-auto overflow-hidden animate-scale-in flex flex-col border border-white/50 relative",children:f.jsxs("div",{className:"p-8 pb-4",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[f.jsx("button",{onClick:i,className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-500 hover:bg-slate-100 transition-colors",children:f.jsx("i",{className:"fas fa-arrow-left"})}),f.jsx("h3",{className:"font-extrabold text-2xl text-slate-900",children:"Manage Account"})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-slate-400 mb-2",children:"About You (Bio)"}),f.jsx("textarea",{className:"premium-input min-h-[120px] resize-none",placeholder:"Tell the campus a bit about yourself...",value:l,onChange:b=>u(b.target.value),maxLength:160}),f.jsxs("div",{className:"text-right text-[10px] font-bold text-slate-400 mt-1",children:[l.length,"/160"]})]}),f.jsx("div",{className:"pt-4 border-t border-slate-50",children:f.jsx(mt,{className:"w-full rounded-xl py-3 shadow-glow",onClick:async()=>{p(!0),await e({bio:l}),p(!1)},disabled:m,children:m?"Saving...":"Update Bio"})}),f.jsxs("div",{className:"pt-8 mt-4 border-t border-rose-50",children:[f.jsx("h4",{className:"text-rose-600 font-black text-xs uppercase tracking-widest mb-4",children:"Danger Zone"}),f.jsxs("button",{onClick:async()=>{o("Delete Account?","ARE YOU SURE? This will permanently delete your account and all your confessions, messages, and comments. This cannot be undone.",async()=>{v(!0),await n(),v(!1)},"danger")},disabled:g,className:"w-full text-rose-500 text-sm font-black transition-all uppercase tracking-widest px-8 py-3 bg-rose-50/50 rounded-2xl border border-rose-100 hover:bg-rose-50 active:scale-95 flex items-center justify-center gap-2",children:[f.jsx("i",{className:"fas fa-trash-alt"}),g?"Deleting Account...":"Delete My Account Permanently"]}),f.jsx("p",{className:"text-[10px] text-slate-400 mt-3 text-center px-4 leading-relaxed italic",children:"Once deleted, your stories will be gone from the campus forever."})]})]})]})})},lI=({user:r,onClose:e,onLogout:n,setSubView:i,confirmAction:o})=>f.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-sm mx-auto overflow-hidden animate-scale-in flex flex-col border border-white/50 relative",children:[f.jsxs("div",{className:"p-6 border-b border-slate-50 flex items-center justify-between",children:[f.jsx("h3",{className:"font-extrabold text-xl text-slate-900",children:"Settings"}),f.jsx("button",{onClick:e,className:"w-8 h-8 rounded-full hover:bg-slate-50 flex items-center justify-center text-slate-400 transition-colors",children:f.jsx("i",{className:"fas fa-times"})})]}),f.jsxs("div",{className:"p-4 space-y-2",children:[f.jsxs("button",{onClick:()=>i("avatar"),className:"w-full flex items-center gap-3 p-4 rounded-2xl hover:bg-slate-50 transition-colors group",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary-50 flex items-center justify-center text-primary-600",children:f.jsx("i",{className:"far fa-user-circle text-lg"})}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-bold text-slate-900",children:"Change Avatar"}),f.jsx("p",{className:"text-xs text-slate-400",children:"Update your profile photo"})]}),f.jsx("i",{className:"fas fa-chevron-right text-slate-300 text-sm ml-auto group-hover:translate-x-1 transition-transform"})]}),f.jsxs("button",{onClick:()=>i("manage"),className:"w-full flex items-center gap-3 p-4 rounded-2xl hover:bg-slate-50 transition-colors group",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-50 flex items-center justify-center text-orange-600",children:f.jsx("i",{className:"fas fa-fingerprint text-lg"})}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-bold text-slate-900",children:"Manage Account"}),f.jsx("p",{className:"text-xs text-slate-400",children:"Bio, privacy, and account deletion"})]}),f.jsx("i",{className:"fas fa-chevron-right text-slate-300 text-sm ml-auto group-hover:translate-x-1 transition-transform"})]}),f.jsx("div",{className:"pt-4 mt-2 border-t border-slate-50",children:f.jsxs("button",{onClick:n,className:"w-full flex items-center gap-3 p-4 rounded-2xl hover:bg-rose-50 text-rose-500 transition-colors group",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-rose-50 flex items-center justify-center text-rose-600 group-hover:bg-rose-100",children:f.jsx("i",{className:"fas fa-sign-out-alt text-lg"})}),f.jsx("p",{className:"font-black uppercase tracking-widest text-xs",children:"Logout"})]})})]})]}),rx=({user:r,onSave:e,onCancel:n})=>{const[i,o]=D.useState(r.avatarUrl||""),l=["Felix","Aneka","Zack","Midnight","Bear","Tech","Chill","Vibe","Cool","Snap","Luna","Max","Sam","Leo","Mia"];return f.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg mx-auto overflow-hidden animate-scale-in flex flex-col border border-white/50 relative",children:[f.jsxs("div",{className:"p-8 pb-4 text-center",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[f.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-500 hover:bg-slate-100 transition-colors",children:f.jsx("i",{className:"fas fa-arrow-left"})}),f.jsx("h3",{className:"font-extrabold text-2xl text-slate-900",children:"Update Avatar"})]}),f.jsx("p",{className:"text-slate-500 text-sm",children:"Choose a new look for the campus."})]}),f.jsxs("div",{className:"p-6 pt-2 flex flex-col items-center space-y-6",children:[f.jsx("div",{className:"w-28 h-28 rounded-2xl bg-primary-50 flex items-center justify-center overflow-hidden border-4 border-white shadow-soft transform hover:scale-105 transition-transform duration-300",children:f.jsx("img",{src:i||`https://ui-avatars.com/api/?name=${r.username||"User"}`,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"w-full space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-slate-400 mb-2",children:"Avatar URL (Custom Image Link)"}),f.jsx("input",{className:"premium-input",placeholder:"Paste an image link here...",value:i,onChange:u=>o(u.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-slate-400 mb-2",children:"Quick Presets"}),f.jsx("div",{className:"w-full overflow-x-auto no-scrollbar py-2",children:f.jsx("div",{className:"flex gap-3",children:l.map(u=>{const m=`https://api.dicebear.com/9.x/avataaars/svg?seed=${u}&backgroundColor=e0e7ff`;return f.jsx("div",{onClick:()=>o(m),className:`w-10 h-10 flex-shrink-0 rounded-full cursor-pointer transition-all duration-300 p-0.5 border-2 ${i===m?"border-primary-500 scale-110":"border-transparent hover:scale-105 opacity-70 hover:opacity-100"}`,children:f.jsx("img",{src:m,className:"rounded-full w-full h-full"})},u)})})})]})]}),f.jsxs("div",{className:"flex w-full gap-3 pt-4",children:[f.jsx(mt,{variant:"secondary",className:"flex-1 rounded-xl py-3",onClick:n,children:"Cancel"}),f.jsx(mt,{className:"flex-1 rounded-xl py-3 shadow-glow",onClick:()=>e({avatarUrl:i}),disabled:!i,children:"Save Changes"})]})]})]})},cI=({confessionId:r,onClose:e})=>{const[n,i]=D.useState([]),[o,l]=D.useState(""),[u,m]=D.useState(!1),[p,g]=D.useState(null);D.useEffect(()=>{(async()=>{const _=await J.getCurrentUser();g(_);const x=await J.getComments(r);i(x)})()},[r]);const v=async()=>{if(!o.trim()||!p)return;if(p.isBanned){alert("Your account is restricted. You cannot comment.");return}m(!0),await J.addComment(r,p.id,p.username||"User",o),l("");const b=await J.getComments(r);i(b),m(!1)};return f.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 flex justify-center items-end md:items-center",onClick:e,children:f.jsxs("div",{className:"bg-white w-full md:max-w-md h-[85vh] md:h-[650px] md:rounded-3xl rounded-t-3xl flex flex-col overflow-hidden animate-slide-up shadow-2xl relative",onClick:b=>b.stopPropagation(),children:[f.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-white/80 backdrop-blur z-10 sticky top-0",children:[f.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Discussion"}),f.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center bg-slate-100 hover:bg-slate-200 rounded-full transition-colors",children:f.jsx("i",{className:"fas fa-times text-slate-500 text-sm"})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-5 bg-slate-50/50",children:n.length===0?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 opacity-60",children:[f.jsx("i",{className:"far fa-comments text-5xl mb-3"}),f.jsx("p",{className:"font-medium",children:"Be the first to reply!"})]}):n.map(b=>f.jsxs("div",{className:"flex gap-3 animate-slide-up",children:[f.jsx("div",{className:"w-9 h-9 rounded-xl bg-orange-100 flex-shrink-0 flex items-center justify-center font-bold text-orange-600 text-sm shadow-sm",children:b.username[0].toUpperCase()}),f.jsx("div",{className:"flex-1",children:f.jsxs("div",{className:"bg-white p-3 rounded-2xl rounded-tl-none shadow-sm border border-slate-100",children:[f.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[f.jsx("span",{className:"font-bold text-sm text-slate-900",children:b.username}),f.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(b.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),f.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:b.content})]})})]},b.id))}),f.jsx("div",{className:"p-3 border-t border-slate-100 bg-white pb-safe",children:f.jsxs("div",{className:"flex gap-2 items-end bg-slate-50 p-1.5 rounded-3xl border border-slate-200 focus-within:border-orange-300 focus-within:ring-2 focus-within:ring-orange-100 transition-all",children:[f.jsx("input",{className:"flex-1 bg-transparent border-none px-4 py-2 outline-none text-sm placeholder-slate-400 min-h-[44px]",placeholder:"Add to the discussion...",value:o,onChange:b=>l(b.target.value),onKeyDown:b=>b.key==="Enter"&&v()}),f.jsx("button",{className:"w-10 h-10 bg-primary-600 hover:bg-primary-700 text-white rounded-full flex items-center justify-center shadow-lg shadow-primary-500/30 transition-all disabled:opacity-50 disabled:shadow-none transform active:scale-90",disabled:!o.trim()||u,onClick:v,children:u?f.jsx("i",{className:"fas fa-spinner fa-spin text-sm"}):f.jsx("i",{className:"fas fa-paper-plane text-sm translate-x-px translate-y-px"})})]})})]})})},uI=({confession:r,onClose:e})=>{const[n,i]=D.useState(!1),o=()=>{navigator.clipboard.writeText(`Check this out on UniConfess: "${r.content.substring(0,30)}..."`),i(!0),setTimeout(()=>{i(!1),e()},1200)};return f.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex justify-center items-end md:items-center",onClick:e,children:f.jsxs("div",{className:"bg-white w-full md:max-w-sm rounded-t-3xl md:rounded-3xl overflow-hidden animate-slide-up p-6 pb-safe shadow-2xl",onClick:l=>l.stopPropagation(),children:[f.jsx("div",{className:"w-12 h-1.5 bg-slate-200 rounded-full mx-auto mb-6 opacity-50"}),f.jsx("h3",{className:"font-extrabold text-xl mb-6 text-center text-slate-800",children:"Share Post"}),f.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-8",children:[f.jsxs("button",{className:"flex flex-col items-center gap-2 group p-2 rounded-xl hover:bg-slate-50 transition-colors",onClick:o,children:[f.jsx("div",{className:`w-14 h-14 rounded-2xl ${n?"bg-green-100 text-green-600":"bg-slate-100 text-slate-600"} flex items-center justify-center text-xl transition-colors duration-300`,children:n?f.jsx("i",{className:"fas fa-check"}):f.jsx("i",{className:"fas fa-link"})}),f.jsx("span",{className:"text-xs font-semibold text-slate-600",children:n?"Copied!":"Copy Link"})]}),[{icon:"fab fa-whatsapp",color:"bg-green-100 text-green-600",label:"WhatsApp"},{icon:"fab fa-instagram",color:"bg-pink-100 text-pink-600",label:"Stories"},{icon:"far fa-envelope",color:"bg-blue-100 text-blue-600",label:"Email"}].map(l=>f.jsxs("button",{className:"flex flex-col items-center gap-2 group p-2 rounded-xl hover:bg-slate-50 transition-colors",children:[f.jsx("div",{className:`w-14 h-14 rounded-2xl ${l.color} flex items-center justify-center text-xl shadow-sm`,children:f.jsx("i",{className:l.icon})}),f.jsx("span",{className:"text-xs font-semibold text-slate-600",children:l.label})]},l.label))]}),f.jsx(mt,{variant:"secondary",className:"w-full py-3.5 rounded-xl font-bold bg-slate-100 hover:bg-slate-200",onClick:e,children:"Cancel"})]})})},dI=({onClose:r,onSubmit:e})=>{const[n,i]=D.useState("");return f.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:r,children:f.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[2rem] p-8 shadow-2xl animate-scale-in",onClick:o=>o.stopPropagation(),children:[f.jsx("div",{className:"w-16 h-16 bg-rose-50 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 text-2xl",children:f.jsx("i",{className:"fas fa-flag"})}),f.jsx("h3",{className:"text-2xl font-black text-center text-slate-900 mb-2",children:"Report Post"}),f.jsx("p",{className:"text-center text-slate-500 text-sm mb-6 leading-relaxed",children:"Help us keep the campus safe. Why are you reporting this?"}),f.jsx("textarea",{className:"w-full bg-slate-50 border border-slate-100 rounded-2xl p-4 text-sm font-medium focus:ring-2 focus:ring-rose-100 outline-none resize-none h-32 mb-6 placeholder:text-slate-400 text-slate-800",placeholder:"e.g., Harassment, Hate speech, Spam...",value:n,onChange:o=>i(o.target.value),autoFocus:!0}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:r,className:"flex-1 py-3.5 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition-colors",children:"Cancel"}),f.jsx("button",{onClick:()=>{n.trim()&&e(n)},disabled:!n.trim(),className:"flex-1 py-3.5 rounded-xl font-bold text-white bg-rose-500 hover:bg-rose-600 shadow-lg shadow-rose-500/30 transition-all disabled:opacity-50 disabled:shadow-none",children:"Submit Report"})]})]})})},ix=({isModal:r,onClose:e,onPostSuccess:n,user:i,adminCollegeId:o,setView:l,addToast:u,defaultVisibility:m="campus"})=>{const[p,g]=D.useState(""),[v,b]=D.useState(!1),[_,x]=D.useState(m),[S,T]=D.useState(!1),[C,j]=D.useState(!1),U=async()=>{if(p.trim()){T(!0);try{const V=await J.polishText(p);g(V),u("Text polished","success")}catch{u("Polishing failed","error")}finally{T(!1)}}},M=async()=>{if(!(!p.trim()||!i)){if(i.isBanned){u("Your account is restricted. You cannot create posts.","error"),setTimeout(()=>{e?e():l(ee.HOME)},500);return}j(!0);try{const V=o||i.collegeId||"general",G=await J.createConfession(i.id,i.username||"User",p,V,v,i.avatarUrl,_),Y={...G,timestamp:Number(G.timestamp),likes:[],__local:!0};g(""),u("Confession posted successfully!","success"),n&&n(Y),setTimeout(()=>{e?e():l(ee.HOME)},100)}catch{u("Failed to post. Please try again.","error")}finally{r&&j(!1)}}};return f.jsxs("div",{className:`${r?"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm":"min-h-screen bg-white flex flex-col"} z-50`,children:[f.jsxs("div",{className:`flex flex-col animate-slide-up bg-white ${r?"w-full max-w-xl min-h-[500px] rounded-3xl shadow-2xl overflow-hidden":"flex-1 w-full max-w-2xl mx-auto"}`,children:[f.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-100 bg-white sticky top-0 z-10",children:[f.jsx("button",{onClick:()=>r?e==null?void 0:e():l(ee.HOME),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-100 text-slate-500 transition-colors",children:f.jsx("i",{className:"fas fa-times"})}),f.jsx("h3",{className:"font-bold text-slate-900",children:"New Confession"}),f.jsx("div",{className:"w-8"})]}),f.jsxs("div",{className:"flex-1 p-6 flex flex-col overflow-y-auto",children:[f.jsxs("div",{className:"flex gap-4 mb-4",children:[f.jsx("div",{className:`w-12 h-12 rounded-full flex-shrink-0 flex items-center justify-center overflow-hidden border border-slate-100 ${v?"bg-slate-900 text-white":"bg-slate-100"}`,children:v?f.jsx("i",{className:"fas fa-mask"}):f.jsx("img",{src:(i==null?void 0:i.avatarUrl)||`https://ui-avatars.com/api/?name=${(i==null?void 0:i.username)||"User"}`,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("textarea",{className:"w-full min-h-[300px] bg-transparent text-xl text-slate-900 placeholder:text-slate-400 outline-none resize-none font-medium leading-relaxed",placeholder:"What's happening?",value:p,onChange:V=>g(V.target.value),autoFocus:!0,maxLength:1500}),f.jsxs("div",{className:`text-right text-[10px] font-bold mt-2 ${p.length>=1500?"text-rose-500":"text-slate-400"}`,children:[p.length,"/1500"]})]})]}),f.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-100 flex flex-col gap-4 bg-white pb-6 sticky bottom-0",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[f.jsx("button",{onClick:()=>b(!v),className:`flex items-center gap-2 px-4 py-2 rounded-full font-bold text-sm transition-all ${v?"bg-slate-900 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:v?f.jsxs(f.Fragment,{children:[f.jsx("i",{className:"fas fa-user-secret"})," ",f.jsx("span",{children:"Anonymous"})]}):f.jsxs(f.Fragment,{children:[f.jsx("i",{className:"fas fa-globe"})," ",f.jsx("span",{children:"Public"})]})}),f.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-full shrink-0",children:[f.jsx("button",{onClick:()=>x("campus"),className:`px-4 py-1.5 rounded-full text-xs font-black uppercase tracking-wider transition-all ${_==="campus"?"bg-white text-primary-600 shadow-sm":"text-slate-500"}`,children:"My Campus"}),f.jsx("button",{onClick:()=>x("open"),className:`px-4 py-1.5 rounded-full text-xs font-black uppercase tracking-wider transition-all ${_==="open"?"bg-white text-primary-600 shadow-sm":"text-slate-500"}`,children:"Global"})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("button",{onClick:U,disabled:!p.trim()||S,className:"text-primary-600 flex items-center gap-2 font-bold text-sm hover:opacity-75 transition-opacity disabled:opacity-30",children:[f.jsx("i",{className:`fas fa-magic ${S?"animate-pulse":""}`}),S?"Magic...":"Polish Text"]}),f.jsx("button",{onClick:M,disabled:!p.trim()||C,className:"bg-primary-600 text-white px-8 py-2.5 rounded-full font-black text-sm shadow-glow hover:scale-105 active:scale-95 transition-all disabled:opacity-50",children:C?"Posting...":"Post Confession"})]})]})]})]}),!r&&f.jsx("p",{className:"px-6 py-8 text-slate-400 text-[10px] font-black text-center tracking-[0.2em] uppercase opacity-50",children:"UniConfess Safe Space"})]})},hI=({user:r,setSelectedUser:e,navigateTo:n})=>{const[i,o]=D.useState(""),[l,u]=D.useState([]);return D.useEffect(()=>{if(!i.trim()){u([]);return}const m=setTimeout(async()=>{const p=await J.getAllUsers(),g=i.toLowerCase(),v=p.filter(b=>{var _,x;return b.id!==(r==null?void 0:r.id)&&(((_=b.username)==null?void 0:_.toLowerCase().includes(g))||((x=b.displayName)==null?void 0:x.toLowerCase().includes(g)))});u(v)},300);return()=>clearTimeout(m)},[i,r]),f.jsxs("div",{className:"animate-fade-in min-h-screen",children:[f.jsx("div",{className:"sticky top-0 bg-white/90 backdrop-blur-md z-30 border-b border-slate-100 px-4 py-3",children:f.jsxs("div",{className:"relative group",children:[f.jsx("i",{className:"fas fa-search absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary-600 transition-colors"}),f.jsx("input",{type:"text",className:"w-full h-11 pl-12 pr-4 bg-slate-100 rounded-full outline-none text-slate-900 font-medium focus:bg-white focus:ring-2 focus:ring-primary-500/20 transition-all placeholder:text-slate-500",placeholder:"Search for people",value:i,onChange:m=>o(m.target.value)})]})}),f.jsxs("div",{className:"p-4 space-y-2",children:[i&&l.length===0&&f.jsxs("div",{className:"py-20 text-center text-slate-400",children:[f.jsxs("p",{className:"font-bold text-slate-900 mb-1",children:['No results for "',i,'"']}),f.jsx("p",{className:"text-sm",children:"Try searching for someone else."})]}),l.map(m=>f.jsxs("div",{onClick:()=>{e(m),n(ee.USER_PROFILE)},className:"flex items-center gap-4 p-3 hover:bg-slate-50 rounded-xl cursor-pointer transition-colors",children:[f.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-slate-100 bg-slate-100",children:f.jsx("img",{src:m.avatarUrl||`https://ui-avatars.com/api/?name=${m.username||"User"}`,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"font-bold text-slate-900 truncate",children:m.displayName||m.username}),f.jsxs("p",{className:"text-slate-500 text-sm truncate",children:["@",m.username]})]})]},m.id)),!i&&f.jsx("div",{className:"py-10 text-center",children:f.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Try searching for people, topics, or keywords"})})]})]})},Yv=({user:r,setSelectedUser:e,navigateTo:n,confirmAction:i})=>{const[o,l]=D.useState({requests:[],accepted:[]}),[u,m]=D.useState({}),[p,g]=D.useState({}),[v,b]=D.useState("primary"),[_,x]=D.useState(null);D.useEffect(()=>{if(!r)return;const C=async()=>{const U=await J.getInbox(r.id);l(U);const M=await J.getUnreadCountsPerPeer(r.id);g(M);const V=Array.from(new Set([...U.accepted,...U.requests])),G={};for(const Y of V){const F=await J.getUser(Y);F&&(G[Y]=F)}m(G)};C();const j=setInterval(C,5e3);return()=>clearInterval(j)},[r]);const S=v==="primary"?o.accepted:o.requests,T=(C,j)=>{i("Delete Conversation?",`Delete chat with ${j}? This will remove it from your inbox.`,async()=>{await J.rejectChat(r.id,C),l(U=>({...U,accepted:U.accepted.filter(M=>M!==C),requests:U.requests.filter(M=>M!==C)})),x(null)},"danger")};return f.jsxs("div",{className:"animate-fade-in min-h-screen pb-safe",onClick:()=>x(null),children:[f.jsxs("div",{className:"sticky top-0 bg-white/90 backdrop-blur-md z-30 border-b border-slate-100 px-4 py-3 flex items-center justify-between",children:[f.jsx("h2",{className:"font-black text-xl text-slate-900",children:"Messages"}),f.jsx("button",{className:"w-9 h-9 flex items-center justify-center rounded-full hover:bg-slate-100 text-slate-600 transition-colors",children:f.jsx("i",{className:"fas fa-cog"})})]}),f.jsxs("div",{className:"flex border-b border-slate-100",children:[f.jsxs("button",{onClick:()=>b("primary"),className:`flex-1 py-4 text-sm font-bold transition-all relative ${v==="primary"?"text-slate-900":"text-slate-500 hover:text-slate-700"}`,children:["Primary",v==="primary"&&f.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-14 h-1 bg-orange-600 rounded-full"})]}),f.jsxs("button",{onClick:()=>b("requests"),className:`flex-1 py-4 text-sm font-bold transition-all relative ${v==="requests"?"text-slate-900":"text-slate-500 hover:text-slate-700"}`,children:["Requests ",o.requests.length>0&&f.jsx("span",{className:"ml-1 bg-rose-500 text-white px-1.5 py-0.5 rounded-full text-[10px]",children:o.requests.length}),v==="requests"&&f.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-14 h-1 bg-orange-600 rounded-full"})]})]}),f.jsx("div",{className:"divide-y divide-slate-50",children:S.length===0?f.jsxs("div",{className:"py-20 text-center p-6",children:[f.jsx("h3",{className:"font-extrabold text-2xl text-slate-900 mb-2",children:"Welcome to your inbox!"}),f.jsx("p",{className:"text-slate-500 leading-relaxed mb-6",children:"Drop a line, share posts and more with private conversations between you and others on UniConfess."}),f.jsx("button",{className:"px-6 py-3 rounded-full bg-orange-600 text-white font-bold hover:bg-orange-700 transition-all shadow-lg shadow-orange-600/20",onClick:()=>n(ee.SEARCH),children:"Write a message"})]}):S.map(C=>u[C]&&f.jsxs("div",{className:"group relative",children:[f.jsxs("div",{onClick:()=>{e(u[C]),n(ee.CHAT_DETAIL)},className:"flex items-center gap-4 p-4 hover:bg-slate-50 cursor-pointer transition-colors pr-12",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:u[C].avatarUrl||`https://ui-avatars.com/api/?name=${u[C].username||"User"}`,className:"w-12 h-12 rounded-full object-cover bg-slate-100 border border-slate-100"}),f.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-green-500 border-2 border-white rounded-full"})]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h3",{className:`font-bold ${p[C]>0?"text-slate-900":"text-slate-700"}`,children:u[C].displayName||u[C].username}),p[C]>0&&f.jsxs("span",{className:"bg-primary-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg shadow-primary-600/20 animate-fade-in whitespace-nowrap",children:[p[C]," new"]})]}),f.jsxs("p",{className:"text-sm text-slate-500 truncate",children:["@",u[C].username]})]})]}),f.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center",children:[f.jsx("button",{onClick:j=>{j.stopPropagation(),x(_===C?null:C)},className:"w-10 h-10 flex items-center justify-center text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-all",children:f.jsx("i",{className:"fas fa-ellipsis-v text-sm"})}),_===C&&f.jsx("div",{className:"absolute right-0 top-12 bg-white shadow-premium rounded-2xl border border-slate-100 w-44 py-2 z-50 overflow-hidden animate-slide-up origin-top-right ring-1 ring-black/5",children:f.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-rose-500 hover:bg-rose-50 font-bold transition-colors flex items-center gap-3",onClick:j=>{j.stopPropagation(),T(C,u[C].displayName||u[C].username)},children:[f.jsx("i",{className:"far fa-trash-alt"})," Delete Conversation"]})})]})]},C))})]})},Jv=({user:r,selectedUser:e,goBack:n,onMessagesRead:i,confirmAction:o})=>{var C;const[l,u]=D.useState(""),[m,p]=D.useState([]),g=D.useRef(null),[v,b]=D.useState(!1),[_,x]=D.useState(((C=r==null?void 0:r.blockedUsers)==null?void 0:C.includes((e==null?void 0:e.id)||""))||!1);D.useEffect(()=>{var V;if(!r||!e)return;x(((V=r.blockedUsers)==null?void 0:V.includes(e.id))||!1);const j=async()=>{const G=await J.getMessages(r.id,e.id);p(G),await J.markAsRead(r.id,e.id),i&&i();const Y=await J.getInbox(r.id);b(Y.requests.includes(e.id))};j();const U=J.subscribeToMessages(r.id,G=>{G.senderId===e.id&&(p(Y=>Y.find(F=>F.id===G.id)?Y:[...Y,G]),J.markAsRead(r.id,e.id),i&&i())}),M=setInterval(j,1e4);return()=>{U.unsubscribe(),clearInterval(M)}},[r==null?void 0:r.id,e==null?void 0:e.id,r==null?void 0:r.blockedUsers]),D.useEffect(()=>{var j;(j=g.current)==null||j.scrollIntoView({behavior:"smooth"})},[m]);const S=async()=>{if(!l.trim()||!r||!e||_)return;const j=l;u(""),p(U=>[...U,{id:"temp-"+Date.now(),senderId:r.id,receiverId:e.id,content:j,timestamp:Date.now(),read:!1}]);try{await J.sendMessage(r.id,e.id,j)}catch(U){alert(U.message||"Failed to send message");const M=await J.getMessages(r.id,e.id);p(M)}},T=async()=>{!r||!e||(_?(await J.unblockUser(r.id,e.id),x(!1)):o("Block User?",`Block ${e.displayName||e.username}? You won't see messages from each other.`,async()=>{await J.blockUser(r.id,e.id),x(!0)},"danger"))};return e?f.jsxs("div",{className:"flex flex-col h-screen bg-white fixed inset-0 z-50 lg:relative lg:inset-auto",children:[f.jsxs("div",{className:"px-4 py-3 bg-white/90 backdrop-blur-md border-b border-slate-100 flex items-center gap-4 pt-safe z-20",children:[f.jsx("button",{onClick:n,className:"w-9 h-9 flex items-center justify-center hover:bg-slate-100 rounded-full transition-colors",children:f.jsx("i",{className:"fas fa-arrow-left text-slate-800"})}),f.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[f.jsx("span",{className:"font-bold text-slate-900 leading-tight truncate",children:e.displayName||e.username}),f.jsxs("span",{className:"text-[10px] text-slate-500 truncate",children:["@",e.username]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:T,className:`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${_?"bg-rose-50 text-rose-600":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:_?"Unblock":"Block"}),f.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-slate-100 bg-slate-100 flex-shrink-0",children:f.jsx("img",{src:e.avatarUrl||`https://ui-avatars.com/api/?name=${e.username||"User"}`,className:"w-full h-full object-cover"})})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 pb-24 bg-white",children:[_&&f.jsxs("div",{className:"bg-rose-50 text-rose-600 p-6 rounded-3xl text-center text-sm font-bold mb-4 animate-fade-in border border-rose-100",children:[f.jsx("i",{className:"fas fa-ban mb-2 text-xl block"}),"You have blocked this user."]}),v&&!_&&f.jsxs("div",{className:"border border-slate-100 p-6 rounded-2xl text-center mb-6 mx-4 bg-slate-50/30",children:[f.jsx("p",{className:"font-bold text-slate-900 mb-1",children:"Message Request"}),f.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Accept to start chatting."}),f.jsxs("div",{className:"flex justify-center gap-3",children:[f.jsx(mt,{variant:"danger",className:"py-2 px-6 rounded-full text-sm",onClick:async()=>{await J.rejectChat(r.id,e.id),n()},children:"Delete"}),f.jsx(mt,{className:"py-2 px-6 rounded-full text-sm",onClick:async()=>{await J.acceptChat(r.id,e.id),b(!1)},children:"Accept"})]})]}),m.map(j=>f.jsx("div",{className:`flex ${j.senderId===(r==null?void 0:r.id)?"justify-end":"justify-start"} animate-fade-in`,children:f.jsx("div",{className:`max-w-[75%] px-4 py-3 rounded-2xl text-[14px] shadow-sm leading-relaxed ${j.senderId===(r==null?void 0:r.id)?"bg-primary-600 text-white rounded-br-sm":"bg-slate-100 text-slate-800 rounded-bl-sm"}`,children:j.content})},j.id)),f.jsx("div",{ref:g})]}),!v&&!_&&f.jsx("div",{className:"p-3 bg-white border-t border-slate-100 pb-safe fixed bottom-0 left-0 right-0 z-20 md:absolute",children:f.jsxs("div",{className:"flex gap-2 items-center bg-slate-100 p-1.5 rounded-full px-4 focus-within:bg-white focus-within:ring-2 focus-within:ring-primary-500/20 transition-all border border-transparent focus-within:border-primary-500",children:[f.jsx("input",{className:"flex-1 bg-transparent border-none py-1.5 outline-none text-sm placeholder:text-slate-500 text-slate-900",placeholder:"Start a message...",value:l,onChange:j=>u(j.target.value),onKeyDown:j=>j.key==="Enter"&&S()}),f.jsx("button",{onClick:S,disabled:!l.trim(),className:"w-8 h-8 text-primary-600 rounded-full flex items-center justify-center hover:bg-primary-50 transition-colors disabled:opacity-30 disabled:hover:bg-transparent",children:f.jsx("i",{className:"fas fa-paper-plane text-sm"})})]})})]}):null},fI=({user:r,setView:e,setUser:n,navigateTo:i,confessions:o,colleges:l,onDelete:u,onLike:m,onAccountDelete:p,onUpdateProfile:g,confirmAction:v})=>{var V;const[b,_]=D.useState([]),[x,S]=D.useState("Posts"),[T,C]=D.useState(!1),[j,U]=D.useState(null),M=((V=l.find(G=>G.id===r.collegeId))==null?void 0:V.name)||"Campus Student";return D.useEffect(()=>{(async()=>{const Y=await J.getConfessionsByUser(r.id);_(Y)})()},[r.id]),f.jsxs("div",{className:"px-4 lg:px-0 animate-fade-in pb-32",children:[f.jsxs("div",{className:"bg-white rounded-3xl shadow-soft overflow-hidden mb-6 border border-white relative group",children:[f.jsx("div",{className:"h-32 bg-gradient-to-r from-primary-500 to-amber-500"}),f.jsxs("div",{className:"px-6 relative pb-6",children:[f.jsx("div",{className:"absolute -top-12 left-6 w-24 h-24 rounded-2xl border-4 border-white bg-white overflow-hidden shadow-md group-hover:scale-105 transition-transform origin-bottom-left cursor-pointer",children:f.jsx("img",{src:r.avatarUrl||`https://ui-avatars.com/api/?name=${r.username||"User"}`,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"flex justify-end pt-4 gap-2",children:[(r.isAdmin||r.email==="admin@yug.com")&&f.jsxs(mt,{className:"py-2 px-4 text-xs rounded-xl bg-slate-800 text-white shadow-lg shadow-slate-900/20",onClick:()=>i(ee.ADMIN),children:[f.jsx("i",{className:"fas fa-shield-alt mr-2"}),"Admin"]}),f.jsx("button",{className:"w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center text-slate-500 hover:bg-slate-100 shadow-sm border border-slate-100 transition-all hover:rotate-12",onClick:()=>C(!0),children:f.jsx("i",{className:"fas fa-cog text-lg"})})]}),f.jsxs("div",{className:"mt-4",children:[f.jsxs("h2",{className:"font-black text-2xl text-slate-900 flex items-center gap-2",children:[r.displayName||r.username,r.isAdmin&&f.jsx("i",{className:"fas fa-badge-check text-primary-500 text-sm",title:"Admin"})]}),f.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-medium",children:[f.jsxs("span",{children:["@",r.username]}),f.jsx("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),f.jsx("span",{className:"text-primary-600 font-bold text-xs uppercase tracking-wider",children:M})]}),f.jsx("p",{className:"mt-3 text-slate-700 leading-relaxed text-sm max-w-lg",children:r.bio||"Living the campus life, one coffee at a time. "}),r.isBanned&&f.jsxs("div",{className:"mt-4 bg-rose-50 border border-rose-200 text-rose-700 px-4 py-3 rounded-xl flex items-center gap-3",children:[f.jsx("i",{className:"fas fa-ban text-lg"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-sm",children:"Account Restricted"}),f.jsx("p",{className:"text-xs opacity-80",children:"You cannot create posts or comments."})]})]}),f.jsxs("div",{className:"flex gap-6 mt-4 pt-4 border-t border-slate-50",children:[f.jsxs("div",{className:"text-center cursor-pointer hover:opacity-75 transition-opacity",children:[f.jsx("span",{className:"block font-black text-slate-900 text-lg",children:(r.following||[]).length}),f.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider",children:"Following"})]}),f.jsxs("div",{className:"text-center cursor-pointer hover:opacity-75 transition-opacity",children:[f.jsx("span",{className:"block font-black text-slate-900 text-lg",children:(r.followers||[]).length}),f.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider",children:"Followers"})]}),f.jsxs("div",{className:"text-center cursor-pointer hover:opacity-75 transition-opacity",children:[f.jsx("span",{className:"block font-black text-slate-900 text-lg",children:b.length}),f.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider",children:"Posts"})]})]})]})]})]}),T&&f.jsxs("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[60] flex items-center justify-center p-4",onClick:G=>G.target===G.currentTarget&&C(!1),children:[j===null&&f.jsx(lI,{user:r,onClose:()=>C(!1),setSubView:U,onLogout:async()=>{await J.logout(),window.location.reload()},confirmAction:v}),j==="avatar"&&f.jsx(rx,{user:r,onSave:async G=>{await g(G),U(null)},onCancel:()=>U(null)}),j==="manage"&&f.jsx(oI,{user:r,onSave:async G=>{await g(G),U(null)},onDelete:p,onCancel:()=>U(null),confirmAction:v})]}),f.jsx("div",{className:"space-y-4",children:b.length===0?f.jsxs("div",{className:"text-center p-12 bg-white rounded-[2rem] border border-slate-100 border-dashed",children:[f.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-300 text-2xl",children:f.jsx("i",{className:"far fa-newspaper"})}),f.jsx("p",{className:"text-slate-900 font-bold",children:"No posts yet"}),f.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"When you share a confession, it will appear here."})]}):b.map(G=>f.jsx("div",{children:f.jsx(sx,{confession:G,currentUser:r,onDelete:u,onLike:m,onReply:()=>{},onShare:()=>{},onProfileClick:()=>{},onReport:()=>{},hideSocials:!0})},G.id))})]})},mI=({children:r,user:e,view:n,setView:i,unreadMsgCount:o,adminCollegeId:l,addToast:u,onPostSuccess:m})=>{const{signOut:p}=Pf(),[g,v]=D.useState(!1);return e?f.jsxs("div",{className:"min-h-screen bg-slate-50 flex justify-center text-slate-900",children:[f.jsxs("aside",{className:"hidden lg:flex flex-col w-[280px] social-sidebar px-6 py-8 fixed left-[max(16px,calc(50%-440px))]",children:[f.jsxs("div",{className:"mb-10 flex items-center gap-4 px-2",children:[f.jsx("div",{className:"w-10 h-10 drop-shadow-md",children:f.jsx(Ic,{className:"w-full h-full"})}),f.jsx("h1",{className:"font-extrabold text-xl tracking-tight text-slate-900",children:"UniConfess"})]}),f.jsxs("nav",{className:"space-y-2 flex-1",children:[f.jsx(ic,{active:n===ee.HOME,icon:f.jsx("i",{className:"fas fa-home"}),label:"Home Feed",onClick:()=>i(ee.HOME)}),f.jsx(ic,{active:n===ee.SEARCH,icon:f.jsx("i",{className:"fas fa-search"}),label:"Discover",onClick:()=>i(ee.SEARCH)}),f.jsx(ic,{active:n===ee.MESSAGES,icon:f.jsx("i",{className:"far fa-comment-dots"}),label:"Messages",onClick:()=>i(ee.MESSAGES),badge:o}),f.jsx(ic,{active:n===ee.PROFILE,icon:f.jsx("i",{className:"far fa-user"}),label:"My Profile",onClick:()=>i(ee.PROFILE)})]}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("button",{onClick:()=>v(!0),className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-3 transition-all shadow-lg shadow-primary-600/20 active:scale-95 group",children:[f.jsx("i",{className:"fas fa-plus bg-white/20 w-8 h-8 rounded-lg flex items-center justify-center text-sm group-hover:rotate-90 transition-transform"}),f.jsx("span",{className:"tracking-tight text-lg",children:"Post Confession"})]}),f.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest text-center mt-4 px-2 opacity-50",children:"Share your thoughts anonymously"})]}),f.jsx("div",{className:"mt-auto pt-6 border-t border-slate-50",children:f.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-2xl hover:bg-slate-50 cursor-pointer transition-colors group",onClick:()=>p().then(()=>{i(ee.AUTH)}),children:[f.jsx("img",{src:e.avatarUrl||`https://ui-avatars.com/api/?name=${e.username||"User"}`,className:"w-10 h-10 rounded-xl object-cover bg-slate-100"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"font-bold text-sm truncate",children:e.displayName||e.username}),f.jsx("p",{className:"text-slate-400 text-xs truncate",children:"Log out"})]}),f.jsx("i",{className:"fas fa-sign-out-alt text-slate-300 group-hover:text-rose-500 transition-colors"})]})})]}),f.jsx("main",{className:"w-full lg:w-[600px] lg:ml-[280px] min-h-screen relative border-r border-slate-100 bg-white",children:r}),f.jsxs("nav",{className:"lg:hidden fixed bottom-0 w-full bg-white/90 backdrop-blur-xl border-t border-slate-100 flex justify-around items-center px-6 py-3 pb-safe z-40 shadow-premium",children:[f.jsx("button",{onClick:()=>i(ee.HOME),className:`text-xl p-2 transition-all ${n===ee.HOME?"text-primary-600 scale-110":"text-slate-400 hover:text-slate-600"}`,children:f.jsx("i",{className:"fas fa-home"})}),f.jsx("button",{onClick:()=>i(ee.SEARCH),className:`text-xl p-2 transition-all ${n===ee.SEARCH?"text-primary-600 scale-110":"text-slate-400 hover:text-slate-600"}`,children:f.jsx("i",{className:"fas fa-search"})}),f.jsx("button",{onClick:()=>v(!0),className:"w-12 h-12 bg-primary-600 text-white rounded-2xl flex items-center justify-center shadow-lg shadow-primary-600/20 active:scale-95",children:f.jsx("i",{className:"fas fa-plus"})}),f.jsxs("button",{onClick:()=>i(ee.MESSAGES),className:`text-xl p-2 transition-all relative ${n===ee.MESSAGES?"text-primary-600 scale-110":"text-slate-400 hover:text-slate-600"}`,children:[f.jsx("i",{className:"far fa-comment-alt"}),o>0&&f.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-rose-500 text-white text-[10px] font-black rounded-full border-2 border-white flex items-center justify-center px-1 animate-fade-in shadow-sm",children:o})]}),f.jsx("button",{onClick:()=>i(ee.PROFILE),className:`text-xl p-2 transition-all ${n===ee.PROFILE?"text-primary-600 scale-110":"text-slate-400 hover:text-slate-600"}`,children:f.jsx("i",{className:"far fa-user"})})]}),g&&f.jsx(ix,{isModal:!0,onClose:()=>v(!1),onPostSuccess:b=>{m(b),v(!1)},user:e,adminCollegeId:l,setView:i,addToast:u})]}):f.jsx(f.Fragment,{children:r})};function pI(){var No;const{signOut:r}=Pf(),[e,n]=D.useState(null),[i,o]=D.useState(ee.AUTH),[l,u]=D.useState([]),[m,p]=D.useState([]),[g,v]=D.useState(!0),[b,_]=D.useState(!0),[x,S]=D.useState([]),[T,C]=D.useState([]),[j,U]=D.useState(null),[M,V]=D.useState(!1),[G,Y]=D.useState("campus"),[F,ye]=D.useState(0),[X,be]=D.useState(0),[fe,Ce]=D.useState(null),[de,ke]=D.useState(null),[Xe,z]=D.useState(!1),[W,te]=D.useState(null),[xe,Be]=D.useState(""),[A,$]=D.useState([]),[Q,se]=D.useState([]),[_e,Ae]=D.useState("overview"),[Se,pt]=D.useState(null),[Pe,Cn]=D.useState("idle"),[mn,na]=D.useState("");D.useEffect(()=>{if(!mn||mn.length<3){Cn("idle");return}const le=setTimeout(async()=>{Cn("checking");const me=await J.isUsernameAvailable(mn);Cn(me?"available":"taken")},500);return()=>clearTimeout(le)},[mn]);const[gs,kn]=D.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"danger"}),tn=D.useCallback((K,le,me,oe="danger")=>{kn({isOpen:!0,title:K,message:le,onConfirm:me,type:oe})},[]),Fr=D.useRef(l),To=D.useRef(i);D.useEffect(()=>{Fr.current=l},[l]),D.useEffect(()=>{To.current=i},[i]),D.useEffect(()=>{const K=le=>{const me=Fr.current;if(me.length>0){const oe=me[me.length-1];u(ce=>ce.slice(0,-1)),o(oe)}else{const oe=To.current;oe!==ee.HOME&&oe!==ee.AUTH&&o(ee.HOME)}};return window.addEventListener("popstate",K),()=>window.removeEventListener("popstate",K)},[]);const An=D.useCallback(K=>{u(le=>[...le,i]),window.history.pushState({view:K},"",""),o(K)},[i]),ys=D.useCallback(()=>{l.length>0?window.history.back():i!==ee.HOME&&o(ee.HOME)},[l,i]);D.useEffect(()=>{const K=le=>{ys(!0)};return window.addEventListener("popstate",K),()=>window.removeEventListener("popstate",K)},[l,i]),WU(),D.useEffect(()=>{const K=setTimeout(()=>v(!1),2e3);(async()=>{const oe=await J.getColleges();S(oe)})();const me=__(Rr,async oe=>{if(oe)try{let ce=await J.getUser(oe.uid);ce&&(n(ce),J.requestNotificationPermission(ce.id),ce.username?!ce.collegeId&&!ce.isAdmin?o(ee.SETUP_COLLEGE):i===ee.AUTH&&o(ee.HOME):o(ee.SETUP_USERNAME))}catch(ce){console.error("Sync failed",ce)}else n(null),o(ee.AUTH);_(!1)});return()=>{clearTimeout(K),me()}},[]);const ir=D.useCallback(async()=>{if(!e)return;const K=await J.getUnreadCount(e.id);be(K);const le=await J.getUnreadNotificationCount(e.id);ye(le)},[e==null?void 0:e.id]);D.useEffect(()=>{let K;if(e||Se){const le=Se||(e==null?void 0:e.collegeId);if(!le&&G==="campus"){C([]);return}C([]),console.log(`Subscribing to ${G} feed (${le})...`),K=J.subscribeToConfessions(le||"global",G,me=>{console.log("Received data:",me.length),C(oe=>{const ce=oe.filter(dt=>dt.__local),Dt=new Set(me.map(dt=>dt.id));return[...ce.filter(dt=>!Dt.has(dt.id)),...me]})})}return()=>{K&&K()}},[e==null?void 0:e.id,e==null?void 0:e.collegeId,Se,G]),D.useEffect(()=>{i===ee.ADMIN&&(async()=>{const le=await J.getAllUsers(),me=await J.getAllConfessions();$(le),se(me)})()},[i]),D.useEffect(()=>{if(!e)return;const K=J.subscribeToNotifications(e.id,oe=>{ye(ce=>ce+1);try{const Dt=oe.type==="system"&&oe.actorName!=="New Confession"?"/admin-notification.mp3":"/notification.mp3";new Audio(Dt).play().catch(dt=>console.log("Audio play failed (user interaction needed first):",dt))}catch(ce){console.error("Error playing notification sound:",ce)}if(typeof window<"u"&&"Notification"in window&&window.Notification.permission==="granted")try{new window.Notification(oe.actorName||"UniConfess",{body:oe.content,icon:"/logo.svg"})}catch(ce){console.error("System notification failed:",ce)}oe.type==="system"&&oe.actorName!=="New Confession"?ut(`IMPORTANT: ${oe.content}`,"info"):ut(oe.content||"New Notification","info")}),le=J.subscribeToMessages(e.id,async oe=>{const ce=await J.getUnreadCount(e.id);be(ce),i!==ee.CHAT_DETAIL&&ut(`New message received (${ce} unread)`,"info")}),me=setInterval(ir,15e3);return()=>{K.unsubscribe(),le.unsubscribe(),clearInterval(me)}},[e==null?void 0:e.id,i,ir]);const ar=async()=>{V(!0);try{const K=Se||(e==null?void 0:e.collegeId);if(K){const le=await J.getConfessionsByCollege(K);C(me=>{const oe=me.filter(ve=>ve.__local),ce=new Set(le.map(ve=>ve.id));return[...oe.filter(ve=>!ce.has(ve.id)),...le]})}}catch(K){console.error("Refresh failed",K),ut("Failed to refresh","error")}finally{V(!1)}},ut=(K,le="info")=>{const me=Date.now().toString();p(oe=>[...oe,{id:me,message:K,type:le}]),setTimeout(()=>{p(oe=>oe.filter(ce=>ce.id!==me))},3e3)},Co=K=>{C(le=>[K,...le]),ar()},Ct=D.useCallback(async K=>{e&&await J.toggleLike(K,e.id)},[e]),ko=D.useCallback(K=>{if(!e)return;const le=e.isAdmin||e.id==="admin_user"||e.email==="admin@yug.com",me=e.id===K.userId;!le&&!me||tn("Delete Post?","Are you sure you want to delete this confession? This action cannot be undone.",async()=>{C(oe=>oe.filter(ce=>ce.id!==K.id)),se(oe=>oe.filter(ce=>ce.id!==K.id));try{if(await J.deleteConfession(K))fe===K.id&&Ce(null),ut("Post deleted","success");else throw new Error("Deletion failed")}catch(oe){console.error("Delete error:",oe),Se||e.collegeId,ar(),ut(`Failed to delete: ${oe.message||"Unknown error"}`,"error")}})},[e,G,Se,fe,i,tn,ar]),Ao=D.useCallback(K=>{te(K),z(!0)},[]),jo=async K=>{if(!(!e||!W)){try{await J.submitReport(W,e.id,K),ut("Report submitted. Thank you.","success")}catch{ut("Failed to submit report.","error")}z(!1),te(null)}},Wr=D.useCallback(async(K,le)=>{if(le)return;if(K===(e==null?void 0:e.id)){o(ee.PROFILE);return}const me=await J.getUser(K);me&&(U(me),An(ee.USER_PROFILE))},[e]);D.useCallback(async K=>{var me;if(!e)return;const le=(me=e.following)==null?void 0:me.includes(K);n(oe=>{if(!oe)return null;const ce=oe.following||[];return{...oe,following:le?ce.filter(Dt=>Dt!==K):[...ce,K]}}),j&&j.id===K&&U(oe=>{if(!oe)return null;const ce=oe.followers||[];return{...oe,followers:le?ce.filter(Dt=>Dt!==e.id):[...ce,e.id]}}),ut(le?"Unfollowed":"Followed","success");try{le?await J.unfollowUser(e.id,K):await J.followUser(e.id,K)}catch(oe){console.error("Follow action failed:",oe),ut("Action failed. Please try again.","error");const ce=await J.getUser(e.id);n(ce);const Dt=await J.getUser(K);j&&j.id===K&&U(Dt)}},[e,j]);const eu=({user:K,setView:le,setSelectedUser:me})=>{const[oe,ce]=D.useState([]);D.useEffect(()=>{if(!K)return;(async()=>{const dt=await J.getNotifications(K.id);ce(dt),dt.some(vs=>!vs.read)&&(await J.markNotificationsRead(K.id),ye(vs=>Math.max(0,vs-dt.filter(Yr=>!Yr.read).length)))})()},[K]);const Dt=async ve=>{if(ve.type!=="system"){if(ve.type==="follow"){const dt=await J.getUser(ve.actorId);dt&&(me(dt),le(ee.USER_PROFILE))}else if(ve.entityId){const dt=await J.getUser(ve.actorId);dt&&(me(dt),le(ee.USER_PROFILE))}}};return f.jsxs("div",{className:"animate-fade-in min-h-screen pb-safe bg-slate-50",children:[f.jsx("div",{className:"sticky top-0 bg-white/90 backdrop-blur-md z-30 border-b border-slate-100 px-4 py-3",children:f.jsx("h2",{className:"font-black text-xl text-slate-900",children:"Notifications"})}),f.jsx("div",{className:"max-w-md mx-auto",children:oe.length===0?f.jsxs("div",{className:"py-20 text-center text-slate-400",children:[f.jsx("i",{className:"far fa-bell text-4xl mb-4 opacity-50"}),f.jsx("p",{children:"No notifications yet"})]}):f.jsx("div",{className:"divide-y divide-slate-100 bg-white shadow-sm rounded-none md:rounded-2xl mt-0 md:mt-4 overflow-hidden",children:oe.filter(ve=>ve.type==="system"||ve.actorName!=="New Confession").map(ve=>f.jsxs("div",{onClick:()=>Dt(ve),className:`p-4 flex gap-3 hover:bg-slate-50 transition-colors cursor-pointer relative overflow-hidden ${ve.type==="system"&&ve.actorName!=="New Confession"?"bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-500":ve.read?"":"bg-primary-50/50"}`,children:[f.jsx("div",{className:`w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center overflow-hidden shadow-sm z-10 ${ve.type==="system"&&ve.actorName!=="New Confession"?"bg-amber-100 text-amber-600 ring-2 ring-white":ve.actorName==="New Confession"?"bg-indigo-100 text-indigo-600":"bg-slate-200"}`,children:ve.type==="system"&&ve.actorName!=="New Confession"?f.jsx("i",{className:"fas fa-shield-alt text-lg"}):ve.actorName==="New Confession"?f.jsx("i",{className:"fas fa-feather-pointed"}):f.jsx("img",{src:ve.actorAvatar||`https://ui-avatars.com/api/?name=${ve.actorName||"User"}`,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"flex-1 z-10",children:[f.jsxs("p",{className:"text-sm text-slate-800",children:[ve.type==="system"&&ve.actorName!=="New Confession"?f.jsx("span",{className:"font-black text-amber-700 uppercase tracking-wide text-xs",children:"ADMIN ANNOUNCEMENT"}):f.jsx("span",{className:"font-bold",children:ve.actorName}),ve.type==="like"&&" liked your post.",ve.type==="comment"&&" commented on your post.",ve.type==="follow"&&" started following you."]}),f.jsxs("p",{className:`text-xs mt-1 ${ve.type==="system"&&ve.actorName!=="New Confession"?"text-amber-900 font-bold text-sm leading-snug":ve.actorName==="New Confession"?"text-indigo-600 font-medium":"text-slate-500 line-clamp-1 italic"}`,children:['"',ve.content,'"']}),f.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:new Date(ve.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),ve.type==="system"&&ve.actorName!=="New Confession"&&f.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 pointer-events-none",children:f.jsx("i",{className:"fas fa-bullhorn text-6xl text-amber-500 transform rotate-12"})})]},ve.id))})})]})};let pn;return g?pn=f.jsxs("div",{className:"fixed inset-0 bg-white flex flex-col items-center justify-center z-50",children:[f.jsx("div",{className:"w-24 h-24 drop-shadow-2xl animate-float",children:f.jsx(Ic,{className:"w-full h-full"})}),f.jsx("h1",{className:"mt-8 text-2xl font-black text-slate-800 tracking-tight",children:"UniConfess"})]}):i===ee.AUTH?pn=f.jsx(rI,{setUser:n,setView:o,addToast:ut}):i===ee.SETUP_USERNAME?pn=f.jsxs("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center p-6 text-center",children:[f.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mb-6 text-primary-600 text-3xl",children:f.jsx("i",{className:"fas fa-user-tag"})}),f.jsx("h2",{className:"text-3xl font-black mb-2 text-slate-900",children:"Choose a Handle"}),f.jsx("p",{className:"text-slate-500 mb-8",children:"This is how you'll be known on campus."}),f.jsxs("div",{className:"w-full max-w-xs relative mb-8",children:[f.jsx("input",{className:`w-full text-center text-2xl font-bold border-b-2 outline-none py-2 bg-transparent transition-colors ${Pe==="available"?"border-green-500":Pe==="taken"?"border-red-500":"border-slate-200 focus:border-primary-500"}`,placeholder:"@username",value:(e==null?void 0:e.username)||"",onChange:K=>{const le=K.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"");n(me=>me?{...me,username:le}:null),na(le)}}),f.jsxs("div",{className:"absolute top-1/2 -right-8 -translate-y-1/2",children:[Pe==="checking"&&f.jsx("i",{className:"fas fa-spinner animate-spin text-slate-400"}),Pe==="available"&&f.jsx("i",{className:"fas fa-check-circle text-green-500"}),Pe==="taken"&&f.jsx("i",{className:"fas fa-times-circle text-red-500"})]}),Pe==="taken"&&f.jsx("p",{className:"text-red-500 text-xs font-bold mt-2",children:"Handle already taken!"}),mn&&mn.length<3&&f.jsx("p",{className:"text-slate-400 text-[10px] mt-2",children:"Minimum 3 characters"})]}),f.jsx(mt,{className:"w-full max-w-xs rounded-xl shadow-lg",disabled:Pe!=="available"||!(e!=null&&e.username)||e.username.length<3,onClick:async()=>{if(e!=null&&e.username&&Pe==="available")try{await J.updateUser(e.id,{username:e.username}),o(ee.SETUP_COLLEGE)}catch{ut("Failed to save username. It might have been taken.","error"),Cn("taken")}},children:"Continue"}),f.jsxs("button",{onClick:async()=>{await r(),n(null),o(ee.AUTH)},className:"mt-10 text-rose-500 text-base font-black transition-all uppercase tracking-widest px-8 py-3 bg-slate-50 rounded-2xl border border-slate-100 shadow-sm active:scale-95 flex items-center gap-2",children:[f.jsx("i",{className:"fas fa-sign-out-alt"}),"Logout"]})]}):i===ee.POST?pn=f.jsx(ix,{onPostSuccess:Co,user:e,adminCollegeId:Se,setView:o,addToast:ut,defaultVisibility:G}):i===ee.SETUP_COLLEGE?pn=f.jsx(iI,{user:e,colleges:x,setColleges:S,setView:o,setUser:n}):i===ee.SETUP_AVATAR?pn=f.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:f.jsx(rx,{user:e,onSave:async K=>{const le=await J.updateUser(e.id,K);n(le),o(ee.HOME)},onCancel:()=>o(ee.HOME)})}):pn=f.jsxs(mI,{user:e,view:i,setView:o,unreadMsgCount:X,adminCollegeId:Se,addToast:ut,onPostSuccess:Co,children:[i===ee.HOME&&f.jsxs("div",{className:"animate-fade-in",children:[M&&f.jsxs("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-40 bg-white/90 backdrop-blur-md px-4 py-2 rounded-full shadow-premium border border-slate-100 flex items-center gap-2 animate-bounce",children:[f.jsx("i",{className:"fas fa-circle-notch animate-spin text-primary-600 text-xs"}),f.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-700",children:"Syncing..."})]}),f.jsxs("div",{className:"sticky top-0 bg-white/80 backdrop-blur-md z-30 border-b border-slate-50",children:[f.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"font-extrabold text-xl text-slate-900 tracking-tight",children:"UniConfess"}),f.jsx("p",{className:"text-xs font-bold text-primary-600 uppercase tracking-wider mt-0.5",children:((No=x.find(K=>K.id===(Se||e.collegeId)))==null?void 0:No.name)||"My Campus"})]}),f.jsxs("button",{onClick:()=>An(ee.NOTIFICATIONS),className:"w-10 h-10 rounded-full hover:bg-slate-50 flex items-center justify-center text-slate-600 transition-colors relative",children:[f.jsx("i",{className:"far fa-bell text-lg"}),F>0&&f.jsx("span",{className:"absolute top-2 right-2 w-2.5 h-2.5 bg-rose-500 border-2 border-white rounded-full"})]})]}),f.jsx("div",{className:"flex px-4 border-b border-slate-50",children:[{id:"campus",label:"My Campus"},{id:"open",label:"Global"}].map(K=>f.jsxs("button",{onClick:()=>Y(K.id),className:`flex-1 py-4 flex flex-col items-center gap-1.5 transition-all relative ${G===K.id?"text-primary-600":"text-slate-400 font-medium hover:text-slate-600"}`,children:[f.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:K.label}),G===K.id&&f.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-8 h-1 bg-primary-600 rounded-t-full shadow-glow-sm animate-fade-in-up"})]},K.id))})]}),((e==null?void 0:e.isAdmin)||(e==null?void 0:e.email)==="admin@yug.com")&&f.jsx("div",{className:"px-6 py-3 bg-slate-50/50 border-b border-slate-50",children:f.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-xl px-4 py-2 border border-slate-100 shadow-sm",children:[f.jsx("i",{className:"fas fa-shield-alt text-primary-600 text-sm"}),f.jsxs("select",{className:"bg-transparent outline-none w-full text-xs font-bold text-slate-700",value:Se||e.collegeId||"",onChange:K=>pt(K.target.value),children:[f.jsx("option",{value:e.collegeId,disabled:!0,children:"Switch Campus View..."}),x.map(K=>f.jsx("option",{value:K.id,children:K.name},K.id))]}),Se&&f.jsx("button",{onClick:()=>pt(null),className:"text-xs text-rose-500 font-bold hover:underline",children:"Reset"})]})}),f.jsx("div",{className:"space-y-0 pb-32",children:T.length===0?f.jsxs("div",{className:"py-20 text-center flex flex-col items-center",children:[f.jsx("div",{className:"w-20 h-20 bg-primary-50 rounded-[2.5rem] flex items-center justify-center text-primary-600 text-3xl mb-6 shadow-sm",children:f.jsx("i",{className:"fas fa-feather-pointed"})}),f.jsx("h3",{className:"font-bold text-slate-900 text-lg mb-2",children:"No confessions yet"}),f.jsx("p",{className:"text-slate-400 text-sm max-w-[240px]",children:"Be the first to share a story from your campus."}),f.jsx(mt,{className:"mt-8 rounded-xl px-8",onClick:()=>An(ee.POST),children:"Start Sharing"})]}):T.map(K=>f.jsx(sx,{confession:K,currentUser:e,onLike:Ct,onDelete:ko,onReply:le=>Ce(le),onShare:le=>ke(le),onProfileClick:Wr,onReport:Ao},K.id))})]}),i===ee.SEARCH&&f.jsx(hI,{user:e,setSelectedUser:U,navigateTo:An}),i===ee.MESSAGES&&f.jsx(Yv,{user:e,setSelectedUser:U,navigateTo:An,confirmAction:tn}),i===ee.NOTIFICATIONS&&f.jsx(eu,{user:e,setView:o,setSelectedUser:U}),i===ee.CHAT_DETAIL&&f.jsx(Jv,{user:e,selectedUser:j,goBack:ys,onMessagesRead:ir,confirmAction:tn}),i===ee.PROFILE&&e&&f.jsx(fI,{user:e,setView:o,setUser:n,navigateTo:An,confessions:T,colleges:x,onDelete:ko,onLike:Ct,onUpdateProfile:async K=>{const le=await J.updateUser(e.id,K);n(le),ut("Profile updated","success")},onAccountDelete:async()=>{try{await J.deleteAccount(e.id),ut("Your account was successfully deleted","success"),await r(),n(null),o(ee.AUTH)}catch{ut("Failed to delete account","error")}},confirmAction:tn}),i===ee.MESSAGES&&f.jsx(Yv,{user:e,setSelectedUser:U,navigateTo:An,confirmAction:tn}),i===ee.CHAT_DETAIL&&f.jsx(Jv,{user:e,selectedUser:j,goBack:ys,onMessagesRead:e?(()=>J.markAsRead(e.id,(j==null?void 0:j.id)||"")):void 0,confirmAction:tn}),i===ee.ADMIN&&f.jsx(sI,{onBack:ys,confirmAction:tn}),fe&&f.jsx(cI,{confessionId:fe,onClose:()=>Ce(null)}),de&&f.jsx(uI,{confession:de,onClose:()=>ke(null)}),Xe&&f.jsx(dI,{onClose:()=>{z(!1),te(null)},onSubmit:jo}),f.jsx(aI,{isOpen:gs.isOpen,title:gs.title,message:gs.message,onConfirm:gs.onConfirm,onClose:()=>kn(K=>({...K,isOpen:!1})),type:gs.type})]}),f.jsxs(f.Fragment,{children:[pn,f.jsx("div",{className:"fixed bottom-24 md:bottom-10 left-1/2 transform -translate-x-1/2 z-[100] flex flex-col gap-2 w-max max-w-[90%] pointer-events-none",children:m.map(K=>f.jsxs("div",{className:"bg-slate-900/90 backdrop-blur-xl text-white px-6 py-4 rounded-2xl shadow-[0_20px_50px_rgba(0,0,0,0.3)] font-black text-sm animate-slide-up text-center border border-white/10 ring-1 ring-black/5 flex items-center gap-3",children:[K.type==="error"&&f.jsx("i",{className:"fas fa-exclamation-circle text-rose-500"}),K.type==="success"&&f.jsx("i",{className:"fas fa-check-circle text-emerald-500"}),K.type==="info"&&f.jsx("i",{className:"fas fa-info-circle text-primary-500"}),f.jsx("span",{children:K.message})]},K.id))})]})}const ax=document.getElementById("root");if(!ax)throw new Error("Could not find root element to mount to");const gI=UE.createRoot(ax);gI.render(f.jsx(P.StrictMode,{children:f.jsx(jb,{publishableKey:"pk_test_d2FudGVkLWhhZGRvY2stNDEuY2xlcmsuYWNjb3VudHMuZGV2JA",afterSignOutUrl:"/",children:f.jsx(pI,{})})}));
